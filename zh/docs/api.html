<!-- layout.html -->


<!DOCTYPE html>
<html class="writer-html5" lang="zh" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Enumeration &mdash; MemoryScope  文档</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../_static/autodoc_pydantic.css" />
      <link rel="stylesheet" type="text/css" href="../_static/custom.css?v=c9484b72" />

  
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=2ccfc426"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="索引" href="../genindex.html" />
    <link rel="search" title="搜索" href="../search.html" />
    <link rel="prev" title="贡献到MemoryScope" href="contribution.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" > 

          
          
          <a href="../index.html" class="icon icon-home">
            MemoryScope
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="搜索文档" aria-label="搜索文档" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div> <!-- language_selector.html -->
<div class="language-selector">
    <a href="../../en/docs/api.html">English</a></li> |
    <a href="../../zh/docs/api.html">中文</a></li>
</div> 
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="导航菜单">
              <p class="caption" role="heading"><span class="caption-text">MemoryScope 教程</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../README.html">关于 MemoryScope</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">安装</a></li>
<li class="toctree-l1"><a class="reference internal" href="../examples/cli/CLI_README_ZH.html">命令行终端</a></li>
<li class="toctree-l1"><a class="reference internal" href="../examples/api/simple_usages_zh.html">简单案例</a></li>
<li class="toctree-l1"><a class="reference internal" href="../examples/advance/custom_operator_zh.html">高级用法</a></li>
<li class="toctree-l1"><a class="reference internal" href="contribution.html">贡献</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">MemoryScope 接口</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Enumeration</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#memoryscope.enumeration.ActionStatusEnum"><code class="docutils literal notranslate"><span class="pre">ActionStatusEnum</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#memoryscope.enumeration.LanguageEnum"><code class="docutils literal notranslate"><span class="pre">LanguageEnum</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#memoryscope.enumeration.MemoryTypeEnum"><code class="docutils literal notranslate"><span class="pre">MemoryTypeEnum</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#memoryscope.enumeration.MessageRoleEnum"><code class="docutils literal notranslate"><span class="pre">MessageRoleEnum</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#memoryscope.enumeration.ModelEnum"><code class="docutils literal notranslate"><span class="pre">ModelEnum</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#memoryscope.enumeration.StoreStatusEnum"><code class="docutils literal notranslate"><span class="pre">StoreStatusEnum</span></code></a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="#module-memoryscope.scheme">Scheme</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#memoryscope.scheme.MemoryNode"><code class="docutils literal notranslate"><span class="pre">MemoryNode</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#memoryscope.scheme.MemoryNode.memory_id"><code class="docutils literal notranslate"><span class="pre">MemoryNode.memory_id</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#memoryscope.scheme.MemoryNode.user_name"><code class="docutils literal notranslate"><span class="pre">MemoryNode.user_name</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#memoryscope.scheme.MemoryNode.target_name"><code class="docutils literal notranslate"><span class="pre">MemoryNode.target_name</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#memoryscope.scheme.MemoryNode.meta_data"><code class="docutils literal notranslate"><span class="pre">MemoryNode.meta_data</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#memoryscope.scheme.MemoryNode.content"><code class="docutils literal notranslate"><span class="pre">MemoryNode.content</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#memoryscope.scheme.MemoryNode.key"><code class="docutils literal notranslate"><span class="pre">MemoryNode.key</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#memoryscope.scheme.MemoryNode.key_vector"><code class="docutils literal notranslate"><span class="pre">MemoryNode.key_vector</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#memoryscope.scheme.MemoryNode.value"><code class="docutils literal notranslate"><span class="pre">MemoryNode.value</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#memoryscope.scheme.MemoryNode.score_recall"><code class="docutils literal notranslate"><span class="pre">MemoryNode.score_recall</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#memoryscope.scheme.MemoryNode.score_rank"><code class="docutils literal notranslate"><span class="pre">MemoryNode.score_rank</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#memoryscope.scheme.MemoryNode.score_rerank"><code class="docutils literal notranslate"><span class="pre">MemoryNode.score_rerank</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#memoryscope.scheme.MemoryNode.memory_type"><code class="docutils literal notranslate"><span class="pre">MemoryNode.memory_type</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#memoryscope.scheme.MemoryNode.action_status"><code class="docutils literal notranslate"><span class="pre">MemoryNode.action_status</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#memoryscope.scheme.MemoryNode.store_status"><code class="docutils literal notranslate"><span class="pre">MemoryNode.store_status</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#memoryscope.scheme.MemoryNode.vector"><code class="docutils literal notranslate"><span class="pre">MemoryNode.vector</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#memoryscope.scheme.MemoryNode.timestamp"><code class="docutils literal notranslate"><span class="pre">MemoryNode.timestamp</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#memoryscope.scheme.MemoryNode.obs_reflected"><code class="docutils literal notranslate"><span class="pre">MemoryNode.obs_reflected</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#memoryscope.scheme.MemoryNode.obs_updated"><code class="docutils literal notranslate"><span class="pre">MemoryNode.obs_updated</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#memoryscope.scheme.MemoryNode.__init__"><code class="docutils literal notranslate"><span class="pre">MemoryNode.__init__</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#memoryscope.scheme.MemoryNode.dt"><code class="docutils literal notranslate"><span class="pre">MemoryNode.dt</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#memoryscope.scheme.MemoryNode.node_keys"><code class="docutils literal notranslate"><span class="pre">MemoryNode.node_keys</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#memoryscope.scheme.Message"><code class="docutils literal notranslate"><span class="pre">Message</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#memoryscope.scheme.Message.role"><code class="docutils literal notranslate"><span class="pre">Message.role</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#memoryscope.scheme.Message.role_name"><code class="docutils literal notranslate"><span class="pre">Message.role_name</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#memoryscope.scheme.Message.content"><code class="docutils literal notranslate"><span class="pre">Message.content</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#memoryscope.scheme.Message.time_created"><code class="docutils literal notranslate"><span class="pre">Message.time_created</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#memoryscope.scheme.Message.memorized"><code class="docutils literal notranslate"><span class="pre">Message.memorized</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#memoryscope.scheme.Message.meta_data"><code class="docutils literal notranslate"><span class="pre">Message.meta_data</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#id0"><code class="docutils literal notranslate"><span class="pre">Message.role</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#id1"><code class="docutils literal notranslate"><span class="pre">Message.role_name</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#id2"><code class="docutils literal notranslate"><span class="pre">Message.content</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#id3"><code class="docutils literal notranslate"><span class="pre">Message.time_created</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#id4"><code class="docutils literal notranslate"><span class="pre">Message.memorized</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#id5"><code class="docutils literal notranslate"><span class="pre">Message.meta_data</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#memoryscope.scheme.ModelResponse"><code class="docutils literal notranslate"><span class="pre">ModelResponse</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#memoryscope.scheme.ModelResponse.message"><code class="docutils literal notranslate"><span class="pre">ModelResponse.message</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#memoryscope.scheme.ModelResponse.delta"><code class="docutils literal notranslate"><span class="pre">ModelResponse.delta</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#memoryscope.scheme.ModelResponse.embedding_results"><code class="docutils literal notranslate"><span class="pre">ModelResponse.embedding_results</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#memoryscope.scheme.ModelResponse.rank_scores"><code class="docutils literal notranslate"><span class="pre">ModelResponse.rank_scores</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#memoryscope.scheme.ModelResponse.m_type"><code class="docutils literal notranslate"><span class="pre">ModelResponse.m_type</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#memoryscope.scheme.ModelResponse.status"><code class="docutils literal notranslate"><span class="pre">ModelResponse.status</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#memoryscope.scheme.ModelResponse.details"><code class="docutils literal notranslate"><span class="pre">ModelResponse.details</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#memoryscope.scheme.ModelResponse.raw"><code class="docutils literal notranslate"><span class="pre">ModelResponse.raw</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#memoryscope.scheme.ModelResponse.meta_data"><code class="docutils literal notranslate"><span class="pre">ModelResponse.meta_data</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="#module-memoryscope.core.config">Config</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#memoryscope.core.config.Arguments"><code class="docutils literal notranslate"><span class="pre">Arguments</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#memoryscope.core.config.Arguments.__init__"><code class="docutils literal notranslate"><span class="pre">Arguments.__init__</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="#module-memoryscope.core.models">Models</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#memoryscope.core.models.DummyGenerationModel"><code class="docutils literal notranslate"><span class="pre">DummyGenerationModel</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#memoryscope.core.models.DummyGenerationModel.before_call"><code class="docutils literal notranslate"><span class="pre">DummyGenerationModel.before_call</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#memoryscope.core.models.DummyGenerationModel.after_call"><code class="docutils literal notranslate"><span class="pre">DummyGenerationModel.after_call</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#memoryscope.core.models.LlamaIndexEmbeddingModel"><code class="docutils literal notranslate"><span class="pre">LlamaIndexEmbeddingModel</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#memoryscope.core.models.LlamaIndexEmbeddingModel.__init__"><code class="docutils literal notranslate"><span class="pre">LlamaIndexEmbeddingModel.__init__</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#memoryscope.core.models.LlamaIndexEmbeddingModel.register_model"><code class="docutils literal notranslate"><span class="pre">LlamaIndexEmbeddingModel.register_model</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#memoryscope.core.models.LlamaIndexGenerationModel"><code class="docutils literal notranslate"><span class="pre">LlamaIndexGenerationModel</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#memoryscope.core.models.LlamaIndexGenerationModel.__init__"><code class="docutils literal notranslate"><span class="pre">LlamaIndexGenerationModel.__init__</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#memoryscope.core.models.LlamaIndexGenerationModel.before_call"><code class="docutils literal notranslate"><span class="pre">LlamaIndexGenerationModel.before_call</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#memoryscope.core.models.LlamaIndexRankModel"><code class="docutils literal notranslate"><span class="pre">LlamaIndexRankModel</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#memoryscope.core.models.LlamaIndexRankModel.__init__"><code class="docutils literal notranslate"><span class="pre">LlamaIndexRankModel.__init__</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#memoryscope.core.models.LlamaIndexRankModel.before_call"><code class="docutils literal notranslate"><span class="pre">LlamaIndexRankModel.before_call</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#memoryscope.core.models.LlamaIndexRankModel.after_call"><code class="docutils literal notranslate"><span class="pre">LlamaIndexRankModel.after_call</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="#module-memoryscope.core.storage">Storage</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#memoryscope.core.storage.BaseMemoryStore"><code class="docutils literal notranslate"><span class="pre">BaseMemoryStore</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#memoryscope.core.storage.BaseMemoryStore.retrieve_memories"><code class="docutils literal notranslate"><span class="pre">BaseMemoryStore.retrieve_memories</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#memoryscope.core.storage.BaseMemoryStore.a_retrieve_memories"><code class="docutils literal notranslate"><span class="pre">BaseMemoryStore.a_retrieve_memories</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#memoryscope.core.storage.BaseMemoryStore.flush"><code class="docutils literal notranslate"><span class="pre">BaseMemoryStore.flush</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#memoryscope.core.storage.BaseMemoryStore.close"><code class="docutils literal notranslate"><span class="pre">BaseMemoryStore.close</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#memoryscope.core.storage.BaseMonitor"><code class="docutils literal notranslate"><span class="pre">BaseMonitor</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#memoryscope.core.storage.BaseMonitor.__init__"><code class="docutils literal notranslate"><span class="pre">BaseMonitor.__init__</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#memoryscope.core.storage.BaseMonitor.add"><code class="docutils literal notranslate"><span class="pre">BaseMonitor.add</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#memoryscope.core.storage.BaseMonitor.add_token"><code class="docutils literal notranslate"><span class="pre">BaseMonitor.add_token</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#memoryscope.core.storage.BaseMonitor.flush"><code class="docutils literal notranslate"><span class="pre">BaseMonitor.flush</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#memoryscope.core.storage.BaseMonitor.close"><code class="docutils literal notranslate"><span class="pre">BaseMonitor.close</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#memoryscope.core.storage.DummyMemoryStore"><code class="docutils literal notranslate"><span class="pre">DummyMemoryStore</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#memoryscope.core.storage.DummyMemoryStore.__init__"><code class="docutils literal notranslate"><span class="pre">DummyMemoryStore.__init__</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#memoryscope.core.storage.DummyMemoryStore.retrieve_memories"><code class="docutils literal notranslate"><span class="pre">DummyMemoryStore.retrieve_memories</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#memoryscope.core.storage.DummyMemoryStore.a_retrieve_memories"><code class="docutils literal notranslate"><span class="pre">DummyMemoryStore.a_retrieve_memories</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#memoryscope.core.storage.DummyMemoryStore.close"><code class="docutils literal notranslate"><span class="pre">DummyMemoryStore.close</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#memoryscope.core.storage.DummyMonitor"><code class="docutils literal notranslate"><span class="pre">DummyMonitor</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#memoryscope.core.storage.DummyMonitor.add"><code class="docutils literal notranslate"><span class="pre">DummyMonitor.add</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#memoryscope.core.storage.DummyMonitor.add_token"><code class="docutils literal notranslate"><span class="pre">DummyMonitor.add_token</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#memoryscope.core.storage.DummyMonitor.close"><code class="docutils literal notranslate"><span class="pre">DummyMonitor.close</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#memoryscope.core.storage.LlamaIndexEsMemoryStore"><code class="docutils literal notranslate"><span class="pre">LlamaIndexEsMemoryStore</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#memoryscope.core.storage.LlamaIndexEsMemoryStore.__init__"><code class="docutils literal notranslate"><span class="pre">LlamaIndexEsMemoryStore.__init__</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#memoryscope.core.storage.LlamaIndexEsMemoryStore.retrieve_memories"><code class="docutils literal notranslate"><span class="pre">LlamaIndexEsMemoryStore.retrieve_memories</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#memoryscope.core.storage.LlamaIndexEsMemoryStore.a_retrieve_memories"><code class="docutils literal notranslate"><span class="pre">LlamaIndexEsMemoryStore.a_retrieve_memories</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#memoryscope.core.storage.LlamaIndexEsMemoryStore.close"><code class="docutils literal notranslate"><span class="pre">LlamaIndexEsMemoryStore.close</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#memoryscope.core.storage.ESCombinedRetrieveStrategy"><code class="docutils literal notranslate"><span class="pre">ESCombinedRetrieveStrategy</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#memoryscope.core.storage.ESCombinedRetrieveStrategy.__init__"><code class="docutils literal notranslate"><span class="pre">ESCombinedRetrieveStrategy.__init__</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#memoryscope.core.storage.ESCombinedRetrieveStrategy.es_query"><code class="docutils literal notranslate"><span class="pre">ESCombinedRetrieveStrategy.es_query</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#memoryscope.core.storage.ESCombinedRetrieveStrategy.before_index_creation"><code class="docutils literal notranslate"><span class="pre">ESCombinedRetrieveStrategy.before_index_creation</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#memoryscope.core.storage.SyncElasticsearchStore"><code class="docutils literal notranslate"><span class="pre">SyncElasticsearchStore</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#memoryscope.core.storage.SyncElasticsearchStore.__init__"><code class="docutils literal notranslate"><span class="pre">SyncElasticsearchStore.__init__</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#memoryscope.core.storage.SyncElasticsearchStore.client"><code class="docutils literal notranslate"><span class="pre">SyncElasticsearchStore.client</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#memoryscope.core.storage.SyncElasticsearchStore.add"><code class="docutils literal notranslate"><span class="pre">SyncElasticsearchStore.add</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#memoryscope.core.storage.SyncElasticsearchStore.sync_add"><code class="docutils literal notranslate"><span class="pre">SyncElasticsearchStore.sync_add</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#memoryscope.core.storage.SyncElasticsearchStore.delete"><code class="docutils literal notranslate"><span class="pre">SyncElasticsearchStore.delete</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#memoryscope.core.storage.SyncElasticsearchStore.sync_delete"><code class="docutils literal notranslate"><span class="pre">SyncElasticsearchStore.sync_delete</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#memoryscope.core.storage.SyncElasticsearchStore.query"><code class="docutils literal notranslate"><span class="pre">SyncElasticsearchStore.query</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#memoryscope.core.storage.SyncElasticsearchStore.sync_query"><code class="docutils literal notranslate"><span class="pre">SyncElasticsearchStore.sync_query</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="#worker">Worker</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#module-memoryscope.core.worker">Base</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#memoryscope.core.worker.BaseWorker"><code class="docutils literal notranslate"><span class="pre">BaseWorker</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#memoryscope.core.worker.BaseWorker.__init__"><code class="docutils literal notranslate"><span class="pre">BaseWorker.__init__</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#memoryscope.core.worker.BaseWorker.submit_async_task"><code class="docutils literal notranslate"><span class="pre">BaseWorker.submit_async_task</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#memoryscope.core.worker.BaseWorker.gather_async_result"><code class="docutils literal notranslate"><span class="pre">BaseWorker.gather_async_result</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#memoryscope.core.worker.BaseWorker.submit_thread_task"><code class="docutils literal notranslate"><span class="pre">BaseWorker.submit_thread_task</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#memoryscope.core.worker.BaseWorker.gather_thread_result"><code class="docutils literal notranslate"><span class="pre">BaseWorker.gather_thread_result</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#memoryscope.core.worker.BaseWorker.run"><code class="docutils literal notranslate"><span class="pre">BaseWorker.run</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#memoryscope.core.worker.BaseWorker.get_workflow_context"><code class="docutils literal notranslate"><span class="pre">BaseWorker.get_workflow_context</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#memoryscope.core.worker.BaseWorker.set_workflow_context"><code class="docutils literal notranslate"><span class="pre">BaseWorker.set_workflow_context</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#memoryscope.core.worker.BaseWorker.has_content"><code class="docutils literal notranslate"><span class="pre">BaseWorker.has_content</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#memoryscope.core.worker.DummyWorker"><code class="docutils literal notranslate"><span class="pre">DummyWorker</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#memoryscope.core.worker.MemoryBaseWorker"><code class="docutils literal notranslate"><span class="pre">MemoryBaseWorker</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#memoryscope.core.worker.MemoryBaseWorker.__init__"><code class="docutils literal notranslate"><span class="pre">MemoryBaseWorker.__init__</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#memoryscope.core.worker.MemoryBaseWorker.chat_messages"><code class="docutils literal notranslate"><span class="pre">MemoryBaseWorker.chat_messages</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#memoryscope.core.worker.MemoryBaseWorker.chat_messages_scatter"><code class="docutils literal notranslate"><span class="pre">MemoryBaseWorker.chat_messages_scatter</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#memoryscope.core.worker.MemoryBaseWorker.chat_kwargs"><code class="docutils literal notranslate"><span class="pre">MemoryBaseWorker.chat_kwargs</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#memoryscope.core.worker.MemoryBaseWorker.embedding_model"><code class="docutils literal notranslate"><span class="pre">MemoryBaseWorker.embedding_model</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#memoryscope.core.worker.MemoryBaseWorker.generation_model"><code class="docutils literal notranslate"><span class="pre">MemoryBaseWorker.generation_model</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#memoryscope.core.worker.MemoryBaseWorker.rank_model"><code class="docutils literal notranslate"><span class="pre">MemoryBaseWorker.rank_model</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#memoryscope.core.worker.MemoryBaseWorker.memory_store"><code class="docutils literal notranslate"><span class="pre">MemoryBaseWorker.memory_store</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#memoryscope.core.worker.MemoryBaseWorker.monitor"><code class="docutils literal notranslate"><span class="pre">MemoryBaseWorker.monitor</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#memoryscope.core.worker.MemoryBaseWorker.prompt_handler"><code class="docutils literal notranslate"><span class="pre">MemoryBaseWorker.prompt_handler</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#memoryscope.core.worker.MemoryBaseWorker.memory_manager"><code class="docutils literal notranslate"><span class="pre">MemoryBaseWorker.memory_manager</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#memoryscope.core.worker.MemoryBaseWorker.get_language_value"><code class="docutils literal notranslate"><span class="pre">MemoryBaseWorker.get_language_value</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#memoryscope.core.worker.MemoryBaseWorker.prompt_to_msg"><code class="docutils literal notranslate"><span class="pre">MemoryBaseWorker.prompt_to_msg</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#memoryscope.core.worker.MemoryManager"><code class="docutils literal notranslate"><span class="pre">MemoryManager</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#memoryscope.core.worker.MemoryManager.__init__"><code class="docutils literal notranslate"><span class="pre">MemoryManager.__init__</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#memoryscope.core.worker.MemoryManager.memory_store"><code class="docutils literal notranslate"><span class="pre">MemoryManager.memory_store</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#memoryscope.core.worker.MemoryManager.clear"><code class="docutils literal notranslate"><span class="pre">MemoryManager.clear</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#memoryscope.core.worker.MemoryManager.add_memories"><code class="docutils literal notranslate"><span class="pre">MemoryManager.add_memories</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#memoryscope.core.worker.MemoryManager.set_memories"><code class="docutils literal notranslate"><span class="pre">MemoryManager.set_memories</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#memoryscope.core.worker.MemoryManager.get_memories"><code class="docutils literal notranslate"><span class="pre">MemoryManager.get_memories</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#memoryscope.core.worker.MemoryManager.delete_memories"><code class="docutils literal notranslate"><span class="pre">MemoryManager.delete_memories</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#memoryscope.core.worker.MemoryManager.update_memories"><code class="docutils literal notranslate"><span class="pre">MemoryManager.update_memories</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#module-memoryscope.core.worker.frontend">Frontend</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#memoryscope.core.worker.frontend.ExtractTimeWorker"><code class="docutils literal notranslate"><span class="pre">ExtractTimeWorker</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#memoryscope.core.worker.frontend.FuseRerankWorker"><code class="docutils literal notranslate"><span class="pre">FuseRerankWorker</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#memoryscope.core.worker.frontend.FuseRerankWorker.match_node_time"><code class="docutils literal notranslate"><span class="pre">FuseRerankWorker.match_node_time</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#memoryscope.core.worker.frontend.PrintMemoryWorker"><code class="docutils literal notranslate"><span class="pre">PrintMemoryWorker</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#memoryscope.core.worker.frontend.ReadMessageWorker"><code class="docutils literal notranslate"><span class="pre">ReadMessageWorker</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#memoryscope.core.worker.frontend.RetrieveMemoryWorker"><code class="docutils literal notranslate"><span class="pre">RetrieveMemoryWorker</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#memoryscope.core.worker.frontend.RetrieveMemoryWorker.retrieve_from_observation"><code class="docutils literal notranslate"><span class="pre">RetrieveMemoryWorker.retrieve_from_observation</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#memoryscope.core.worker.frontend.RetrieveMemoryWorker.retrieve_from_insight"><code class="docutils literal notranslate"><span class="pre">RetrieveMemoryWorker.retrieve_from_insight</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#memoryscope.core.worker.frontend.RetrieveMemoryWorker.retrieve_expired_memory"><code class="docutils literal notranslate"><span class="pre">RetrieveMemoryWorker.retrieve_expired_memory</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#memoryscope.core.worker.frontend.SemanticRankWorker"><code class="docutils literal notranslate"><span class="pre">SemanticRankWorker</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#memoryscope.core.worker.frontend.SetQueryWorker"><code class="docutils literal notranslate"><span class="pre">SetQueryWorker</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#module-memoryscope.core.worker.backend">Backend</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#memoryscope.core.worker.backend.ContraRepeatWorker"><code class="docutils literal notranslate"><span class="pre">ContraRepeatWorker</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#memoryscope.core.worker.backend.GetObservationWithTimeWorker"><code class="docutils literal notranslate"><span class="pre">GetObservationWithTimeWorker</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#memoryscope.core.worker.backend.GetObservationWithTimeWorker.filter_messages"><code class="docutils literal notranslate"><span class="pre">GetObservationWithTimeWorker.filter_messages</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#memoryscope.core.worker.backend.GetObservationWithTimeWorker.build_message"><code class="docutils literal notranslate"><span class="pre">GetObservationWithTimeWorker.build_message</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#memoryscope.core.worker.backend.GetObservationWorker"><code class="docutils literal notranslate"><span class="pre">GetObservationWorker</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#memoryscope.core.worker.backend.GetObservationWorker.add_observation"><code class="docutils literal notranslate"><span class="pre">GetObservationWorker.add_observation</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#memoryscope.core.worker.backend.GetObservationWorker.filter_messages"><code class="docutils literal notranslate"><span class="pre">GetObservationWorker.filter_messages</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#memoryscope.core.worker.backend.GetObservationWorker.build_message"><code class="docutils literal notranslate"><span class="pre">GetObservationWorker.build_message</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#memoryscope.core.worker.backend.GetReflectionSubjectWorker"><code class="docutils literal notranslate"><span class="pre">GetReflectionSubjectWorker</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#memoryscope.core.worker.backend.GetReflectionSubjectWorker.new_insight_node"><code class="docutils literal notranslate"><span class="pre">GetReflectionSubjectWorker.new_insight_node</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#memoryscope.core.worker.backend.InfoFilterWorker"><code class="docutils literal notranslate"><span class="pre">InfoFilterWorker</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#memoryscope.core.worker.backend.LoadMemoryWorker"><code class="docutils literal notranslate"><span class="pre">LoadMemoryWorker</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#memoryscope.core.worker.backend.LoadMemoryWorker.retrieve_not_reflected_memory"><code class="docutils literal notranslate"><span class="pre">LoadMemoryWorker.retrieve_not_reflected_memory</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#memoryscope.core.worker.backend.LoadMemoryWorker.retrieve_not_updated_memory"><code class="docutils literal notranslate"><span class="pre">LoadMemoryWorker.retrieve_not_updated_memory</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#memoryscope.core.worker.backend.LoadMemoryWorker.retrieve_insight_memory"><code class="docutils literal notranslate"><span class="pre">LoadMemoryWorker.retrieve_insight_memory</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#memoryscope.core.worker.backend.LoadMemoryWorker.retrieve_today_memory"><code class="docutils literal notranslate"><span class="pre">LoadMemoryWorker.retrieve_today_memory</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#memoryscope.core.worker.backend.LongContraRepeatWorker"><code class="docutils literal notranslate"><span class="pre">LongContraRepeatWorker</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#memoryscope.core.worker.backend.LongContraRepeatWorker.retrieve_similar_content"><code class="docutils literal notranslate"><span class="pre">LongContraRepeatWorker.retrieve_similar_content</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#memoryscope.core.worker.backend.UpdateInsightWorker"><code class="docutils literal notranslate"><span class="pre">UpdateInsightWorker</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#memoryscope.core.worker.backend.UpdateInsightWorker.filter_obs_nodes"><code class="docutils literal notranslate"><span class="pre">UpdateInsightWorker.filter_obs_nodes</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#memoryscope.core.worker.backend.UpdateInsightWorker.update_insight_node"><code class="docutils literal notranslate"><span class="pre">UpdateInsightWorker.update_insight_node</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#memoryscope.core.worker.backend.UpdateInsightWorker.update_insight"><code class="docutils literal notranslate"><span class="pre">UpdateInsightWorker.update_insight</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#memoryscope.core.worker.backend.UpdateMemoryWorker"><code class="docutils literal notranslate"><span class="pre">UpdateMemoryWorker</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#memoryscope.core.worker.backend.UpdateMemoryWorker.from_query"><code class="docutils literal notranslate"><span class="pre">UpdateMemoryWorker.from_query</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#memoryscope.core.worker.backend.UpdateMemoryWorker.from_memory_key"><code class="docutils literal notranslate"><span class="pre">UpdateMemoryWorker.from_memory_key</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#memoryscope.core.worker.backend.UpdateMemoryWorker.delete_all"><code class="docutils literal notranslate"><span class="pre">UpdateMemoryWorker.delete_all</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#memoryscope.core.worker.backend.UpdateMemoryWorker.delete_memory"><code class="docutils literal notranslate"><span class="pre">UpdateMemoryWorker.delete_memory</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="#module-memoryscope.core.operation">Operation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#memoryscope.core.operation.BackendOperation"><code class="docutils literal notranslate"><span class="pre">BackendOperation</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#memoryscope.core.operation.BackendOperation.__init__"><code class="docutils literal notranslate"><span class="pre">BackendOperation.__init__</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#memoryscope.core.operation.BackendOperation.init_workflow"><code class="docutils literal notranslate"><span class="pre">BackendOperation.init_workflow</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#memoryscope.core.operation.BackendOperation.start_operation_backend"><code class="docutils literal notranslate"><span class="pre">BackendOperation.start_operation_backend</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#memoryscope.core.operation.BackendOperation.stop_operation_backend"><code class="docutils literal notranslate"><span class="pre">BackendOperation.stop_operation_backend</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#memoryscope.core.operation.BaseOperation"><code class="docutils literal notranslate"><span class="pre">BaseOperation</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#memoryscope.core.operation.BaseOperation.operation_type"><code class="docutils literal notranslate"><span class="pre">BaseOperation.operation_type</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#memoryscope.core.operation.BaseOperation.name"><code class="docutils literal notranslate"><span class="pre">BaseOperation.name</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#memoryscope.core.operation.BaseOperation.description"><code class="docutils literal notranslate"><span class="pre">BaseOperation.description</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#memoryscope.core.operation.BaseOperation.__init__"><code class="docutils literal notranslate"><span class="pre">BaseOperation.__init__</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#memoryscope.core.operation.BaseOperation.init_workflow"><code class="docutils literal notranslate"><span class="pre">BaseOperation.init_workflow</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#memoryscope.core.operation.BaseOperation.run_operation"><code class="docutils literal notranslate"><span class="pre">BaseOperation.run_operation</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#memoryscope.core.operation.BaseOperation.start_operation_backend"><code class="docutils literal notranslate"><span class="pre">BaseOperation.start_operation_backend</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#memoryscope.core.operation.BaseOperation.stop_operation_backend"><code class="docutils literal notranslate"><span class="pre">BaseOperation.stop_operation_backend</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#memoryscope.core.operation.ConsolidateMemoryOp"><code class="docutils literal notranslate"><span class="pre">ConsolidateMemoryOp</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#memoryscope.core.operation.ConsolidateMemoryOp.__init__"><code class="docutils literal notranslate"><span class="pre">ConsolidateMemoryOp.__init__</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#memoryscope.core.operation.ConsolidateMemoryOp.run_operation"><code class="docutils literal notranslate"><span class="pre">ConsolidateMemoryOp.run_operation</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#memoryscope.core.operation.FrontendOperation"><code class="docutils literal notranslate"><span class="pre">FrontendOperation</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#memoryscope.core.operation.FrontendOperation.__init__"><code class="docutils literal notranslate"><span class="pre">FrontendOperation.__init__</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#memoryscope.core.operation.FrontendOperation.init_workflow"><code class="docutils literal notranslate"><span class="pre">FrontendOperation.init_workflow</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#memoryscope.core.operation.FrontendOperation.run_operation"><code class="docutils literal notranslate"><span class="pre">FrontendOperation.run_operation</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="#module-memoryscope.core.service">Service</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#memoryscope.core.service.BaseMemoryService"><code class="docutils literal notranslate"><span class="pre">BaseMemoryService</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#memoryscope.core.service.BaseMemoryService.__init__"><code class="docutils literal notranslate"><span class="pre">BaseMemoryService.__init__</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#memoryscope.core.service.BaseMemoryService.op_description_dict"><code class="docutils literal notranslate"><span class="pre">BaseMemoryService.op_description_dict</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#memoryscope.core.service.MemoryScopeService"><code class="docutils literal notranslate"><span class="pre">MemoryScopeService</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#memoryscope.core.service.MemoryScopeService.__init__"><code class="docutils literal notranslate"><span class="pre">MemoryScopeService.__init__</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#memoryscope.core.service.MemoryScopeService.add_messages_pair"><code class="docutils literal notranslate"><span class="pre">MemoryScopeService.add_messages_pair</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#memoryscope.core.service.MemoryScopeService.run_operation"><code class="docutils literal notranslate"><span class="pre">MemoryScopeService.run_operation</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#memoryscope.core.service.MemoryScopeService.start_backend_service"><code class="docutils literal notranslate"><span class="pre">MemoryScopeService.start_backend_service</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#memoryscope.core.service.MemoryScopeService.stop_backend_service"><code class="docutils literal notranslate"><span class="pre">MemoryScopeService.stop_backend_service</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="#module-memoryscope.core.chat">Chat</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#memoryscope.core.chat.ApiMemoryChat"><code class="docutils literal notranslate"><span class="pre">ApiMemoryChat</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#memoryscope.core.chat.ApiMemoryChat.__init__"><code class="docutils literal notranslate"><span class="pre">ApiMemoryChat.__init__</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#memoryscope.core.chat.ApiMemoryChat.prompt_handler"><code class="docutils literal notranslate"><span class="pre">ApiMemoryChat.prompt_handler</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#memoryscope.core.chat.ApiMemoryChat.memory_service"><code class="docutils literal notranslate"><span class="pre">ApiMemoryChat.memory_service</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#memoryscope.core.chat.ApiMemoryChat.generation_model"><code class="docutils literal notranslate"><span class="pre">ApiMemoryChat.generation_model</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#memoryscope.core.chat.ApiMemoryChat.chat_with_memory"><code class="docutils literal notranslate"><span class="pre">ApiMemoryChat.chat_with_memory</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#memoryscope.core.chat.BaseMemoryChat"><code class="docutils literal notranslate"><span class="pre">BaseMemoryChat</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#memoryscope.core.chat.BaseMemoryChat.__init__"><code class="docutils literal notranslate"><span class="pre">BaseMemoryChat.__init__</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#memoryscope.core.chat.BaseMemoryChat.memory_service"><code class="docutils literal notranslate"><span class="pre">BaseMemoryChat.memory_service</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#memoryscope.core.chat.BaseMemoryChat.chat_with_memory"><code class="docutils literal notranslate"><span class="pre">BaseMemoryChat.chat_with_memory</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#memoryscope.core.chat.BaseMemoryChat.run"><code class="docutils literal notranslate"><span class="pre">BaseMemoryChat.run</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#memoryscope.core.chat.CliMemoryChat"><code class="docutils literal notranslate"><span class="pre">CliMemoryChat</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#memoryscope.core.chat.CliMemoryChat.__init__"><code class="docutils literal notranslate"><span class="pre">CliMemoryChat.__init__</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#memoryscope.core.chat.CliMemoryChat.print_logo"><code class="docutils literal notranslate"><span class="pre">CliMemoryChat.print_logo</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#memoryscope.core.chat.CliMemoryChat.chat_with_memory"><code class="docutils literal notranslate"><span class="pre">CliMemoryChat.chat_with_memory</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#memoryscope.core.chat.CliMemoryChat.parse_query_command"><code class="docutils literal notranslate"><span class="pre">CliMemoryChat.parse_query_command</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#memoryscope.core.chat.CliMemoryChat.process_commands"><code class="docutils literal notranslate"><span class="pre">CliMemoryChat.process_commands</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#memoryscope.core.chat.CliMemoryChat.run"><code class="docutils literal notranslate"><span class="pre">CliMemoryChat.run</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="移动版导航菜单" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">MemoryScope</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="页面导航">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Enumeration</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/docs/api.rst.txt" rel="nofollow"> 查看页面源码</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <p id="api">MemoryScope API 接口文档</p>
<section id="module-memoryscope.enumeration">
<span id="enumeration"></span><h1>Enumeration<a class="headerlink" href="#module-memoryscope.enumeration" title="Link to this heading"></a></h1>
<dl class="py class">
<dt class="sig sig-object py" id="memoryscope.enumeration.ActionStatusEnum">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">memoryscope.enumeration.</span></span><span class="sig-name descname"><span class="pre">ActionStatusEnum</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/memoryscope/enumeration/action_status_enum.html#ActionStatusEnum"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.enumeration.ActionStatusEnum" title="Link to this definition"></a></dt>
<dd><p>Enumeration representing various statuses of a memory node.</p>
<p>Each status reflects a different state of the node in terms of its lifecycle or content:
- NEW: Indicates a newly created node.
- MODIFIED: Signifies that the node has been altered.
- CONTENT_MODIFIED: Specifies changes in the actual content of the node.
- NONE: do nothing.
- DELETE: delete memories.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="memoryscope.enumeration.LanguageEnum">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">memoryscope.enumeration.</span></span><span class="sig-name descname"><span class="pre">LanguageEnum</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/memoryscope/enumeration/language_enum.html#LanguageEnum"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.enumeration.LanguageEnum" title="Link to this definition"></a></dt>
<dd><p>An enumeration representing supported languages.</p>
<dl class="simple">
<dt>Members:</dt><dd><ul class="simple">
<li><p>CN: Represents the Chinese language.</p></li>
<li><p>EN: Represents the English language.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="memoryscope.enumeration.MemoryTypeEnum">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">memoryscope.enumeration.</span></span><span class="sig-name descname"><span class="pre">MemoryTypeEnum</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/memoryscope/enumeration/memory_type_enum.html#MemoryTypeEnum"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.enumeration.MemoryTypeEnum" title="Link to this definition"></a></dt>
<dd><p>Defines an enumeration for different types of memory categories.</p>
<p>Each member represents a distinct type of memory content:
- CONVERSATION: Represents conversation-based memories.
- OBSERVATION: Denotes observational memories.
- INSIGHT: Indicates insightful memories derived from analysis.
- OBS_CUSTOMIZED: Customized observational memories.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="memoryscope.enumeration.MessageRoleEnum">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">memoryscope.enumeration.</span></span><span class="sig-name descname"><span class="pre">MessageRoleEnum</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/memoryscope/enumeration/message_role_enum.html#MessageRoleEnum"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.enumeration.MessageRoleEnum" title="Link to this definition"></a></dt>
<dd><p>Enumeration for different message roles within a conversation context.</p>
<p>This enumeration includes predefined roles such as User, Assistant, and System,
which can be used to categorize messages in chat interfaces, AI interactions, or
any system that involves distinct participant roles.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="memoryscope.enumeration.ModelEnum">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">memoryscope.enumeration.</span></span><span class="sig-name descname"><span class="pre">ModelEnum</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/memoryscope/enumeration/model_enum.html#ModelEnum"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.enumeration.ModelEnum" title="Link to this definition"></a></dt>
<dd><p>An enumeration representing different types of models used within the system.</p>
<dl>
<dt>Members:</dt><dd><p>GENERATION_MODEL: Represents a model responsible for generating content.
EMBEDDING_MODEL: Represents a model tasked with creating embeddings, typically used for transforming data into a</p>
<blockquote>
<div><p>numerical form suitable for machine learning tasks.</p>
</div></blockquote>
<p>RANK_MODEL: Denotes a model that specializes in ranking, often used to order items based on relevance.</p>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="memoryscope.enumeration.StoreStatusEnum">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">memoryscope.enumeration.</span></span><span class="sig-name descname"><span class="pre">StoreStatusEnum</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/memoryscope/enumeration/store_status_enum.html#StoreStatusEnum"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.enumeration.StoreStatusEnum" title="Link to this definition"></a></dt>
<dd><p>An enumeration.</p>
</dd></dl>

</section>
<section id="module-memoryscope.scheme">
<span id="scheme"></span><h1>Scheme<a class="headerlink" href="#module-memoryscope.scheme" title="Link to this heading"></a></h1>
<dl class="py class pydantic_model">
<dt class="sig sig-object py" id="memoryscope.scheme.MemoryNode">
<em class="property"><span class="pre">pydantic</span> <span class="pre">model</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">memoryscope.scheme.</span></span><span class="sig-name descname"><span class="pre">MemoryNode</span></span><a class="reference internal" href="../_modules/memoryscope/scheme/memory_node.html#MemoryNode"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.scheme.MemoryNode" title="Link to this definition"></a></dt>
<dd><p>Represents a memory node with comprehensive attributes to store memory information including unique ID,
user details, content, metadata, scoring metrics.
Automatically handles timestamp conversion to date format during initialization.</p>
<p><details  class="autodoc_pydantic_collapsable_json">
<summary>Show JSON schema</summary><div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">   </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;MemoryNode&quot;</span><span class="p">,</span>
<span class="w">   </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Represents a memory node with comprehensive attributes to store memory information including unique ID,\nuser details, content, metadata, scoring metrics.\nAutomatically handles timestamp conversion to date format during initialization.&quot;</span><span class="p">,</span>
<span class="w">   </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;object&quot;</span><span class="p">,</span>
<span class="w">   </span><span class="nt">&quot;properties&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;memory_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">         </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;unique id for memory&quot;</span><span class="p">,</span>
<span class="w">         </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Memory Id&quot;</span><span class="p">,</span>
<span class="w">         </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;user_name&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">         </span><span class="nt">&quot;default&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span>
<span class="w">         </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;the user who owns the memory&quot;</span><span class="p">,</span>
<span class="w">         </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;User Name&quot;</span><span class="p">,</span>
<span class="w">         </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;target_name&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">         </span><span class="nt">&quot;default&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span>
<span class="w">         </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;target name described by the memory&quot;</span><span class="p">,</span>
<span class="w">         </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Target Name&quot;</span><span class="p">,</span>
<span class="w">         </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;meta_data&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">         </span><span class="nt">&quot;additionalProperties&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span>
<span class="w">         </span><span class="p">},</span>
<span class="w">         </span><span class="nt">&quot;default&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span>
<span class="w">         </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;meta data infos&quot;</span><span class="p">,</span>
<span class="w">         </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Meta Data&quot;</span><span class="p">,</span>
<span class="w">         </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;object&quot;</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;content&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">         </span><span class="nt">&quot;default&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span>
<span class="w">         </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;memory content&quot;</span><span class="p">,</span>
<span class="w">         </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Content&quot;</span><span class="p">,</span>
<span class="w">         </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;key&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">         </span><span class="nt">&quot;default&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span>
<span class="w">         </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;memory key&quot;</span><span class="p">,</span>
<span class="w">         </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Key&quot;</span><span class="p">,</span>
<span class="w">         </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;key_vector&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">         </span><span class="nt">&quot;default&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span>
<span class="w">         </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;memory key embedding result&quot;</span><span class="p">,</span>
<span class="w">         </span><span class="nt">&quot;items&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;number&quot;</span>
<span class="w">         </span><span class="p">},</span>
<span class="w">         </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Key Vector&quot;</span><span class="p">,</span>
<span class="w">         </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;array&quot;</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">         </span><span class="nt">&quot;default&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span>
<span class="w">         </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;memory value&quot;</span><span class="p">,</span>
<span class="w">         </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Value&quot;</span><span class="p">,</span>
<span class="w">         </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;score_recall&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">         </span><span class="nt">&quot;default&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
<span class="w">         </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;embedding similarity score used in recall stage&quot;</span><span class="p">,</span>
<span class="w">         </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Score Recall&quot;</span><span class="p">,</span>
<span class="w">         </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;number&quot;</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;score_rank&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">         </span><span class="nt">&quot;default&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
<span class="w">         </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;rank model score used in rank stage&quot;</span><span class="p">,</span>
<span class="w">         </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Score Rank&quot;</span><span class="p">,</span>
<span class="w">         </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;number&quot;</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;score_rerank&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">         </span><span class="nt">&quot;default&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
<span class="w">         </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;rerank score used in rerank stage&quot;</span><span class="p">,</span>
<span class="w">         </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Score Rerank&quot;</span><span class="p">,</span>
<span class="w">         </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;number&quot;</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;memory_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">         </span><span class="nt">&quot;default&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span>
<span class="w">         </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;conversation / observation / insight...&quot;</span><span class="p">,</span>
<span class="w">         </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Memory Type&quot;</span><span class="p">,</span>
<span class="w">         </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;action_status&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">         </span><span class="nt">&quot;default&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;none&quot;</span><span class="p">,</span>
<span class="w">         </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;new / content_modified / modified / deleted / none&quot;</span><span class="p">,</span>
<span class="w">         </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Action Status&quot;</span><span class="p">,</span>
<span class="w">         </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;store_status&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">         </span><span class="nt">&quot;default&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;valid&quot;</span><span class="p">,</span>
<span class="w">         </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;store_status: valid / expired&quot;</span><span class="p">,</span>
<span class="w">         </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Store Status&quot;</span><span class="p">,</span>
<span class="w">         </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;vector&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">         </span><span class="nt">&quot;default&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span>
<span class="w">         </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;content embedding result&quot;</span><span class="p">,</span>
<span class="w">         </span><span class="nt">&quot;items&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;number&quot;</span>
<span class="w">         </span><span class="p">},</span>
<span class="w">         </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Vector&quot;</span><span class="p">,</span>
<span class="w">         </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;array&quot;</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;timestamp&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">         </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;timestamp of the memory node&quot;</span><span class="p">,</span>
<span class="w">         </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Timestamp&quot;</span><span class="p">,</span>
<span class="w">         </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;integer&quot;</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;dt&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">         </span><span class="nt">&quot;default&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span>
<span class="w">         </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;dt of the memory node&quot;</span><span class="p">,</span>
<span class="w">         </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Dt&quot;</span><span class="p">,</span>
<span class="w">         </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;obs_reflected&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">         </span><span class="nt">&quot;default&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
<span class="w">         </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;if the observation is reflected: 0/1&quot;</span><span class="p">,</span>
<span class="w">         </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Obs Reflected&quot;</span><span class="p">,</span>
<span class="w">         </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;integer&quot;</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;obs_updated&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">         </span><span class="nt">&quot;default&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
<span class="w">         </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;if the observation has updated user profile or insight: 0/1&quot;</span><span class="p">,</span>
<span class="w">         </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Obs Updated&quot;</span><span class="p">,</span>
<span class="w">         </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;integer&quot;</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">   </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</details></p><dl class="field-list simple">
<dt class="field-odd">Fields<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><a class="reference internal" href="../memoryscope.scheme.memory_node.html#memoryscope.scheme.memory_node.MemoryNode.action_status" title="memoryscope.scheme.memory_node.MemoryNode.action_status"><code class="xref py py-obj docutils literal notranslate"><span class="pre">action_status</span> <span class="pre">(str)</span></code></a></p></li>
<li><p><a class="reference internal" href="../memoryscope.scheme.memory_node.html#memoryscope.scheme.memory_node.MemoryNode.content" title="memoryscope.scheme.memory_node.MemoryNode.content"><code class="xref py py-obj docutils literal notranslate"><span class="pre">content</span> <span class="pre">(str)</span></code></a></p></li>
<li><p><a class="reference internal" href="../memoryscope.scheme.memory_node.html#memoryscope.scheme.memory_node.MemoryNode.dt" title="memoryscope.scheme.memory_node.MemoryNode.dt"><code class="xref py py-obj docutils literal notranslate"><span class="pre">dt</span> <span class="pre">(str)</span></code></a></p></li>
<li><p><a class="reference internal" href="../memoryscope.scheme.memory_node.html#memoryscope.scheme.memory_node.MemoryNode.key" title="memoryscope.scheme.memory_node.MemoryNode.key"><code class="xref py py-obj docutils literal notranslate"><span class="pre">key</span> <span class="pre">(str)</span></code></a></p></li>
<li><p><a class="reference internal" href="../memoryscope.scheme.memory_node.html#memoryscope.scheme.memory_node.MemoryNode.key_vector" title="memoryscope.scheme.memory_node.MemoryNode.key_vector"><code class="xref py py-obj docutils literal notranslate"><span class="pre">key_vector</span> <span class="pre">(List[float])</span></code></a></p></li>
<li><p><a class="reference internal" href="../memoryscope.scheme.memory_node.html#memoryscope.scheme.memory_node.MemoryNode.memory_id" title="memoryscope.scheme.memory_node.MemoryNode.memory_id"><code class="xref py py-obj docutils literal notranslate"><span class="pre">memory_id</span> <span class="pre">(str)</span></code></a></p></li>
<li><p><a class="reference internal" href="../memoryscope.scheme.memory_node.html#memoryscope.scheme.memory_node.MemoryNode.memory_type" title="memoryscope.scheme.memory_node.MemoryNode.memory_type"><code class="xref py py-obj docutils literal notranslate"><span class="pre">memory_type</span> <span class="pre">(str)</span></code></a></p></li>
<li><p><a class="reference internal" href="../memoryscope.scheme.memory_node.html#memoryscope.scheme.memory_node.MemoryNode.meta_data" title="memoryscope.scheme.memory_node.MemoryNode.meta_data"><code class="xref py py-obj docutils literal notranslate"><span class="pre">meta_data</span> <span class="pre">(Dict[str,</span> <span class="pre">str])</span></code></a></p></li>
<li><p><a class="reference internal" href="../memoryscope.scheme.memory_node.html#memoryscope.scheme.memory_node.MemoryNode.obs_reflected" title="memoryscope.scheme.memory_node.MemoryNode.obs_reflected"><code class="xref py py-obj docutils literal notranslate"><span class="pre">obs_reflected</span> <span class="pre">(int)</span></code></a></p></li>
<li><p><a class="reference internal" href="../memoryscope.scheme.memory_node.html#memoryscope.scheme.memory_node.MemoryNode.obs_updated" title="memoryscope.scheme.memory_node.MemoryNode.obs_updated"><code class="xref py py-obj docutils literal notranslate"><span class="pre">obs_updated</span> <span class="pre">(int)</span></code></a></p></li>
<li><p><a class="reference internal" href="../memoryscope.scheme.memory_node.html#memoryscope.scheme.memory_node.MemoryNode.score_rank" title="memoryscope.scheme.memory_node.MemoryNode.score_rank"><code class="xref py py-obj docutils literal notranslate"><span class="pre">score_rank</span> <span class="pre">(float)</span></code></a></p></li>
<li><p><a class="reference internal" href="../memoryscope.scheme.memory_node.html#memoryscope.scheme.memory_node.MemoryNode.score_recall" title="memoryscope.scheme.memory_node.MemoryNode.score_recall"><code class="xref py py-obj docutils literal notranslate"><span class="pre">score_recall</span> <span class="pre">(float)</span></code></a></p></li>
<li><p><a class="reference internal" href="../memoryscope.scheme.memory_node.html#memoryscope.scheme.memory_node.MemoryNode.score_rerank" title="memoryscope.scheme.memory_node.MemoryNode.score_rerank"><code class="xref py py-obj docutils literal notranslate"><span class="pre">score_rerank</span> <span class="pre">(float)</span></code></a></p></li>
<li><p><a class="reference internal" href="../memoryscope.scheme.memory_node.html#memoryscope.scheme.memory_node.MemoryNode.store_status" title="memoryscope.scheme.memory_node.MemoryNode.store_status"><code class="xref py py-obj docutils literal notranslate"><span class="pre">store_status</span> <span class="pre">(str)</span></code></a></p></li>
<li><p><a class="reference internal" href="../memoryscope.scheme.memory_node.html#memoryscope.scheme.memory_node.MemoryNode.target_name" title="memoryscope.scheme.memory_node.MemoryNode.target_name"><code class="xref py py-obj docutils literal notranslate"><span class="pre">target_name</span> <span class="pre">(str)</span></code></a></p></li>
<li><p><a class="reference internal" href="../memoryscope.scheme.memory_node.html#memoryscope.scheme.memory_node.MemoryNode.timestamp" title="memoryscope.scheme.memory_node.MemoryNode.timestamp"><code class="xref py py-obj docutils literal notranslate"><span class="pre">timestamp</span> <span class="pre">(int)</span></code></a></p></li>
<li><p><a class="reference internal" href="../memoryscope.scheme.memory_node.html#memoryscope.scheme.memory_node.MemoryNode.user_name" title="memoryscope.scheme.memory_node.MemoryNode.user_name"><code class="xref py py-obj docutils literal notranslate"><span class="pre">user_name</span> <span class="pre">(str)</span></code></a></p></li>
<li><p><a class="reference internal" href="../memoryscope.scheme.memory_node.html#memoryscope.scheme.memory_node.MemoryNode.value" title="memoryscope.scheme.memory_node.MemoryNode.value"><code class="xref py py-obj docutils literal notranslate"><span class="pre">value</span> <span class="pre">(str)</span></code></a></p></li>
<li><p><a class="reference internal" href="../memoryscope.scheme.memory_node.html#memoryscope.scheme.memory_node.MemoryNode.vector" title="memoryscope.scheme.memory_node.MemoryNode.vector"><code class="xref py py-obj docutils literal notranslate"><span class="pre">vector</span> <span class="pre">(List[float])</span></code></a></p></li>
</ul>
</dd>
</dl>
<dl class="py attribute pydantic_field">
<dt class="sig sig-object py" id="memoryscope.scheme.MemoryNode.memory_id">
<em class="property"><span class="pre">field</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">memory_id</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><em class="property"> <span class="pre">[Optional]</span></em><a class="headerlink" href="#memoryscope.scheme.MemoryNode.memory_id" title="Link to this definition"></a></dt>
<dd><p>unique id for memory</p>
</dd></dl>

<dl class="py attribute pydantic_field">
<dt class="sig sig-object py" id="memoryscope.scheme.MemoryNode.user_name">
<em class="property"><span class="pre">field</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">user_name</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">''</span></em><a class="headerlink" href="#memoryscope.scheme.MemoryNode.user_name" title="Link to this definition"></a></dt>
<dd><p>the user who owns the memory</p>
</dd></dl>

<dl class="py attribute pydantic_field">
<dt class="sig sig-object py" id="memoryscope.scheme.MemoryNode.target_name">
<em class="property"><span class="pre">field</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">target_name</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">''</span></em><a class="headerlink" href="#memoryscope.scheme.MemoryNode.target_name" title="Link to this definition"></a></dt>
<dd><p>target name described by the memory</p>
</dd></dl>

<dl class="py attribute pydantic_field">
<dt class="sig sig-object py" id="memoryscope.scheme.MemoryNode.meta_data">
<em class="property"><span class="pre">field</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">meta_data</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">{}</span></em><a class="headerlink" href="#memoryscope.scheme.MemoryNode.meta_data" title="Link to this definition"></a></dt>
<dd><p>meta data infos</p>
</dd></dl>

<dl class="py attribute pydantic_field">
<dt class="sig sig-object py" id="memoryscope.scheme.MemoryNode.content">
<em class="property"><span class="pre">field</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">content</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">''</span></em><a class="headerlink" href="#memoryscope.scheme.MemoryNode.content" title="Link to this definition"></a></dt>
<dd><p>memory content</p>
</dd></dl>

<dl class="py attribute pydantic_field">
<dt class="sig sig-object py" id="memoryscope.scheme.MemoryNode.key">
<em class="property"><span class="pre">field</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">key</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">''</span></em><a class="headerlink" href="#memoryscope.scheme.MemoryNode.key" title="Link to this definition"></a></dt>
<dd><p>memory key</p>
</dd></dl>

<dl class="py attribute pydantic_field">
<dt class="sig sig-object py" id="memoryscope.scheme.MemoryNode.key_vector">
<em class="property"><span class="pre">field</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">key_vector</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">[]</span></em><a class="headerlink" href="#memoryscope.scheme.MemoryNode.key_vector" title="Link to this definition"></a></dt>
<dd><p>memory key embedding result</p>
</dd></dl>

<dl class="py attribute pydantic_field">
<dt class="sig sig-object py" id="memoryscope.scheme.MemoryNode.value">
<em class="property"><span class="pre">field</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">value</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">''</span></em><a class="headerlink" href="#memoryscope.scheme.MemoryNode.value" title="Link to this definition"></a></dt>
<dd><p>memory value</p>
</dd></dl>

<dl class="py attribute pydantic_field">
<dt class="sig sig-object py" id="memoryscope.scheme.MemoryNode.score_recall">
<em class="property"><span class="pre">field</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">score_recall</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">float</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">0</span></em><a class="headerlink" href="#memoryscope.scheme.MemoryNode.score_recall" title="Link to this definition"></a></dt>
<dd><p>embedding similarity score used in recall stage</p>
</dd></dl>

<dl class="py attribute pydantic_field">
<dt class="sig sig-object py" id="memoryscope.scheme.MemoryNode.score_rank">
<em class="property"><span class="pre">field</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">score_rank</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">float</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">0</span></em><a class="headerlink" href="#memoryscope.scheme.MemoryNode.score_rank" title="Link to this definition"></a></dt>
<dd><p>rank model score used in rank stage</p>
</dd></dl>

<dl class="py attribute pydantic_field">
<dt class="sig sig-object py" id="memoryscope.scheme.MemoryNode.score_rerank">
<em class="property"><span class="pre">field</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">score_rerank</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">float</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">0</span></em><a class="headerlink" href="#memoryscope.scheme.MemoryNode.score_rerank" title="Link to this definition"></a></dt>
<dd><p>rerank score used in rerank stage</p>
</dd></dl>

<dl class="py attribute pydantic_field">
<dt class="sig sig-object py" id="memoryscope.scheme.MemoryNode.memory_type">
<em class="property"><span class="pre">field</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">memory_type</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">''</span></em><a class="headerlink" href="#memoryscope.scheme.MemoryNode.memory_type" title="Link to this definition"></a></dt>
<dd><p>conversation / observation / insight...</p>
</dd></dl>

<dl class="py attribute pydantic_field">
<dt class="sig sig-object py" id="memoryscope.scheme.MemoryNode.action_status">
<em class="property"><span class="pre">field</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">action_status</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'none'</span></em><a class="headerlink" href="#memoryscope.scheme.MemoryNode.action_status" title="Link to this definition"></a></dt>
<dd><p>new / content_modified / modified / deleted / none</p>
</dd></dl>

<dl class="py attribute pydantic_field">
<dt class="sig sig-object py" id="memoryscope.scheme.MemoryNode.store_status">
<em class="property"><span class="pre">field</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">store_status</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'valid'</span></em><a class="headerlink" href="#memoryscope.scheme.MemoryNode.store_status" title="Link to this definition"></a></dt>
<dd><p>store_status: valid / expired</p>
</dd></dl>

<dl class="py attribute pydantic_field">
<dt class="sig sig-object py" id="memoryscope.scheme.MemoryNode.vector">
<em class="property"><span class="pre">field</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">vector</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">[]</span></em><a class="headerlink" href="#memoryscope.scheme.MemoryNode.vector" title="Link to this definition"></a></dt>
<dd><p>content embedding result</p>
</dd></dl>

<dl class="py attribute pydantic_field">
<dt class="sig sig-object py" id="memoryscope.scheme.MemoryNode.timestamp">
<em class="property"><span class="pre">field</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">timestamp</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">int</span></em><em class="property"> <span class="pre">[Optional]</span></em><a class="headerlink" href="#memoryscope.scheme.MemoryNode.timestamp" title="Link to this definition"></a></dt>
<dd><p>timestamp of the memory node</p>
</dd></dl>

<dl class="py attribute pydantic_field">
<dt class="sig sig-object py" id="memoryscope.scheme.MemoryNode.obs_reflected">
<em class="property"><span class="pre">field</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">obs_reflected</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">int</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">0</span></em><a class="headerlink" href="#memoryscope.scheme.MemoryNode.obs_reflected" title="Link to this definition"></a></dt>
<dd><p>if the observation is reflected: 0/1</p>
</dd></dl>

<dl class="py attribute pydantic_field">
<dt class="sig sig-object py" id="memoryscope.scheme.MemoryNode.obs_updated">
<em class="property"><span class="pre">field</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">obs_updated</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">int</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">0</span></em><a class="headerlink" href="#memoryscope.scheme.MemoryNode.obs_updated" title="Link to this definition"></a></dt>
<dd><p>if the observation has updated user profile or insight: 0/1</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="memoryscope.scheme.MemoryNode.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/memoryscope/scheme/memory_node.html#MemoryNode.__init__"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.scheme.MemoryNode.__init__" title="Link to this definition"></a></dt>
<dd><p>Create a new model by parsing and validating input data from keyword arguments.</p>
<p>Raises [<cite>ValidationError</cite>][pydantic_core.ValidationError] if the input data cannot be
validated to form a valid model.</p>
<p><cite>self</cite> is explicitly positional-only to allow <cite>self</cite> as a field name.</p>
</dd></dl>

<dl class="py attribute pydantic_field">
<dt class="sig sig-object py" id="memoryscope.scheme.MemoryNode.dt">
<em class="property"><span class="pre">field</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">dt</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">''</span></em><a class="headerlink" href="#memoryscope.scheme.MemoryNode.dt" title="Link to this definition"></a></dt>
<dd><p>dt of the memory node</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="memoryscope.scheme.MemoryNode.node_keys">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">node_keys</span></span><a class="headerlink" href="#memoryscope.scheme.MemoryNode.node_keys" title="Link to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class pydantic_model">
<dt class="sig sig-object py" id="memoryscope.scheme.Message">
<em class="property"><span class="pre">pydantic</span> <span class="pre">model</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">memoryscope.scheme.</span></span><span class="sig-name descname"><span class="pre">Message</span></span><a class="reference internal" href="../_modules/memoryscope/scheme/message.html#Message"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.scheme.Message" title="Link to this definition"></a></dt>
<dd><p>Represents a structured message object with details about the sender, content, and metadata.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="memoryscope.scheme.Message.role">
<span class="sig-name descname"><span class="pre">role</span></span><a class="headerlink" href="#memoryscope.scheme.Message.role" title="Link to this definition"></a></dt>
<dd><p>The role of the message sender (e.g., 'user', 'assistant', 'system').</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="memoryscope.scheme.Message.role_name">
<span class="sig-name descname"><span class="pre">role_name</span></span><a class="headerlink" href="#memoryscope.scheme.Message.role_name" title="Link to this definition"></a></dt>
<dd><p>Optional name associated with the role of the message sender.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="memoryscope.scheme.Message.content">
<span class="sig-name descname"><span class="pre">content</span></span><a class="headerlink" href="#memoryscope.scheme.Message.content" title="Link to this definition"></a></dt>
<dd><p>The actual content or text of the message.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="memoryscope.scheme.Message.time_created">
<span class="sig-name descname"><span class="pre">time_created</span></span><a class="headerlink" href="#memoryscope.scheme.Message.time_created" title="Link to this definition"></a></dt>
<dd><p>Timestamp indicating when the message was created.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="memoryscope.scheme.Message.memorized">
<span class="sig-name descname"><span class="pre">memorized</span></span><a class="headerlink" href="#memoryscope.scheme.Message.memorized" title="Link to this definition"></a></dt>
<dd><p>Flag to indicate if the message has been saved or remembered.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="memoryscope.scheme.Message.meta_data">
<span class="sig-name descname"><span class="pre">meta_data</span></span><a class="headerlink" href="#memoryscope.scheme.Message.meta_data" title="Link to this definition"></a></dt>
<dd><p>Additional data or context attached to the message.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Dict[str, str]</p>
</dd>
</dl>
</dd></dl>

<p><details  class="autodoc_pydantic_collapsable_json">
<summary>Show JSON schema</summary><div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">   </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Message&quot;</span><span class="p">,</span>
<span class="w">   </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Represents a structured message object with details about the sender, content, and metadata.\n\nAttributes:\n    role (str): The role of the message sender (e.g., &#39;user&#39;, &#39;assistant&#39;, &#39;system&#39;).\n    role_name (str): Optional name associated with the role of the message sender.\n    content (str): The actual content or text of the message.\n    time_created (int): Timestamp indicating when the message was created.\n    memorized (bool): Flag to indicate if the message has been saved or remembered.\n    meta_data (Dict[str, str]): Additional data or context attached to the message.&quot;</span><span class="p">,</span>
<span class="w">   </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;object&quot;</span><span class="p">,</span>
<span class="w">   </span><span class="nt">&quot;properties&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;role&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">         </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;The role of the message sender (user, assistant, system)&quot;</span><span class="p">,</span>
<span class="w">         </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Role&quot;</span><span class="p">,</span>
<span class="w">         </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;role_name&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">         </span><span class="nt">&quot;default&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span>
<span class="w">         </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Name describing the role of the message sender&quot;</span><span class="p">,</span>
<span class="w">         </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Role Name&quot;</span><span class="p">,</span>
<span class="w">         </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;content&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">         </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;The primary content of the message&quot;</span><span class="p">,</span>
<span class="w">         </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Content&quot;</span><span class="p">,</span>
<span class="w">         </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;time_created&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">         </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Timestamp marking the message creation time&quot;</span><span class="p">,</span>
<span class="w">         </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Time Created&quot;</span><span class="p">,</span>
<span class="w">         </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;integer&quot;</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;memorized&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">         </span><span class="nt">&quot;default&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span>
<span class="w">         </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Indicates if the message is flagged for memory retention&quot;</span><span class="p">,</span>
<span class="w">         </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Memorized&quot;</span><span class="p">,</span>
<span class="w">         </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;boolean&quot;</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;meta_data&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">         </span><span class="nt">&quot;additionalProperties&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span>
<span class="w">         </span><span class="p">},</span>
<span class="w">         </span><span class="nt">&quot;default&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span>
<span class="w">         </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Supplementary data attached to the message&quot;</span><span class="p">,</span>
<span class="w">         </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Meta Data&quot;</span><span class="p">,</span>
<span class="w">         </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;object&quot;</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">   </span><span class="p">},</span>
<span class="w">   </span><span class="nt">&quot;required&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">      </span><span class="s2">&quot;role&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="s2">&quot;content&quot;</span>
<span class="w">   </span><span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</details></p><dl class="field-list simple">
<dt class="field-odd">Fields<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><a class="reference internal" href="../memoryscope.scheme.message.html#id2" title="memoryscope.scheme.message.Message.content"><code class="xref py py-obj docutils literal notranslate"><span class="pre">content</span> <span class="pre">(str)</span></code></a></p></li>
<li><p><a class="reference internal" href="../memoryscope.scheme.message.html#id4" title="memoryscope.scheme.message.Message.memorized"><code class="xref py py-obj docutils literal notranslate"><span class="pre">memorized</span> <span class="pre">(bool)</span></code></a></p></li>
<li><p><a class="reference internal" href="../memoryscope.scheme.message.html#id5" title="memoryscope.scheme.message.Message.meta_data"><code class="xref py py-obj docutils literal notranslate"><span class="pre">meta_data</span> <span class="pre">(Dict[str,</span> <span class="pre">str])</span></code></a></p></li>
<li><p><a class="reference internal" href="../memoryscope.scheme.message.html#id0" title="memoryscope.scheme.message.Message.role"><code class="xref py py-obj docutils literal notranslate"><span class="pre">role</span> <span class="pre">(str)</span></code></a></p></li>
<li><p><a class="reference internal" href="../memoryscope.scheme.message.html#id1" title="memoryscope.scheme.message.Message.role_name"><code class="xref py py-obj docutils literal notranslate"><span class="pre">role_name</span> <span class="pre">(str)</span></code></a></p></li>
<li><p><a class="reference internal" href="../memoryscope.scheme.message.html#id3" title="memoryscope.scheme.message.Message.time_created"><code class="xref py py-obj docutils literal notranslate"><span class="pre">time_created</span> <span class="pre">(int)</span></code></a></p></li>
</ul>
</dd>
</dl>
<dl class="py attribute pydantic_field">
<dt class="sig sig-object py" id="id0">
<em class="property"><span class="pre">field</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">role</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><em class="property"> <span class="pre">[Required]</span></em><a class="headerlink" href="#id0" title="Link to this definition"></a></dt>
<dd><p>The role of the message sender (user, assistant, system)</p>
</dd></dl>

<dl class="py attribute pydantic_field">
<dt class="sig sig-object py" id="id1">
<em class="property"><span class="pre">field</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">role_name</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">''</span></em><a class="headerlink" href="#id1" title="Link to this definition"></a></dt>
<dd><p>Name describing the role of the message sender</p>
</dd></dl>

<dl class="py attribute pydantic_field">
<dt class="sig sig-object py" id="id2">
<em class="property"><span class="pre">field</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">content</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><em class="property"> <span class="pre">[Required]</span></em><a class="headerlink" href="#id2" title="Link to this definition"></a></dt>
<dd><p>The primary content of the message</p>
</dd></dl>

<dl class="py attribute pydantic_field">
<dt class="sig sig-object py" id="id3">
<em class="property"><span class="pre">field</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">time_created</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">int</span></em><em class="property"> <span class="pre">[Optional]</span></em><a class="headerlink" href="#id3" title="Link to this definition"></a></dt>
<dd><p>Timestamp marking the message creation time</p>
</dd></dl>

<dl class="py attribute pydantic_field">
<dt class="sig sig-object py" id="id4">
<em class="property"><span class="pre">field</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">memorized</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">bool</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">False</span></em><a class="headerlink" href="#id4" title="Link to this definition"></a></dt>
<dd><p>Indicates if the message is flagged for memory retention</p>
</dd></dl>

<dl class="py attribute pydantic_field">
<dt class="sig sig-object py" id="id5">
<em class="property"><span class="pre">field</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">meta_data</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">{}</span></em><a class="headerlink" href="#id5" title="Link to this definition"></a></dt>
<dd><p>Supplementary data attached to the message</p>
</dd></dl>

</dd></dl>

<dl class="py class pydantic_model">
<dt class="sig sig-object py" id="memoryscope.scheme.ModelResponse">
<em class="property"><span class="pre">pydantic</span> <span class="pre">model</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">memoryscope.scheme.</span></span><span class="sig-name descname"><span class="pre">ModelResponse</span></span><a class="reference internal" href="../_modules/memoryscope/scheme/model_response.html#ModelResponse"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.scheme.ModelResponse" title="Link to this definition"></a></dt>
<dd><p><details  class="autodoc_pydantic_collapsable_json">
<summary>Show JSON schema</summary><div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">   </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ModelResponse&quot;</span><span class="p">,</span>
<span class="w">   </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;object&quot;</span><span class="p">,</span>
<span class="w">   </span><span class="nt">&quot;properties&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;message&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">         </span><span class="nt">&quot;anyOf&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">            </span><span class="p">{</span>
<span class="w">               </span><span class="nt">&quot;$ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;#/$defs/Message&quot;</span>
<span class="w">            </span><span class="p">},</span>
<span class="w">            </span><span class="p">{</span>
<span class="w">               </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;null&quot;</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">         </span><span class="p">],</span>
<span class="w">         </span><span class="nt">&quot;default&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">         </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;generation model result&quot;</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;delta&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">         </span><span class="nt">&quot;default&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span>
<span class="w">         </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;New text that just streamed in (only used when streaming)&quot;</span><span class="p">,</span>
<span class="w">         </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Delta&quot;</span><span class="p">,</span>
<span class="w">         </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;embedding_results&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">         </span><span class="nt">&quot;anyOf&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">            </span><span class="p">{</span>
<span class="w">               </span><span class="nt">&quot;items&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                  </span><span class="nt">&quot;items&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                     </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;number&quot;</span>
<span class="w">                  </span><span class="p">},</span>
<span class="w">                  </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;array&quot;</span>
<span class="w">               </span><span class="p">},</span>
<span class="w">               </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;array&quot;</span>
<span class="w">            </span><span class="p">},</span>
<span class="w">            </span><span class="p">{</span>
<span class="w">               </span><span class="nt">&quot;items&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                  </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;number&quot;</span>
<span class="w">               </span><span class="p">},</span>
<span class="w">               </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;array&quot;</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">         </span><span class="p">],</span>
<span class="w">         </span><span class="nt">&quot;default&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span>
<span class="w">         </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;embedding vector&quot;</span><span class="p">,</span>
<span class="w">         </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Embedding Results&quot;</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;rank_scores&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">         </span><span class="nt">&quot;additionalProperties&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;number&quot;</span>
<span class="w">         </span><span class="p">},</span>
<span class="w">         </span><span class="nt">&quot;default&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span>
<span class="w">         </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;The rank scores of each documents. key: index, value: rank score&quot;</span><span class="p">,</span>
<span class="w">         </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Rank Scores&quot;</span><span class="p">,</span>
<span class="w">         </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;object&quot;</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;m_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">         </span><span class="nt">&quot;$ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;#/$defs/ModelEnum&quot;</span><span class="p">,</span>
<span class="w">         </span><span class="nt">&quot;default&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;generation_model&quot;</span><span class="p">,</span>
<span class="w">         </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;One of LLM, EMB, RANK.&quot;</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">         </span><span class="nt">&quot;default&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">         </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Indicates whether the model call was successful.&quot;</span><span class="p">,</span>
<span class="w">         </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Status&quot;</span><span class="p">,</span>
<span class="w">         </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;boolean&quot;</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;details&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">         </span><span class="nt">&quot;default&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span>
<span class="w">         </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;The details information for model call, usually for storage of raw response or failure messages.&quot;</span><span class="p">,</span>
<span class="w">         </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Details&quot;</span><span class="p">,</span>
<span class="w">         </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;raw&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">         </span><span class="nt">&quot;default&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span>
<span class="w">         </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Raw response from model call&quot;</span><span class="p">,</span>
<span class="w">         </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Raw&quot;</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;meta_data&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">         </span><span class="nt">&quot;default&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span>
<span class="w">         </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;meta data for model response&quot;</span><span class="p">,</span>
<span class="w">         </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Meta Data&quot;</span><span class="p">,</span>
<span class="w">         </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;object&quot;</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">   </span><span class="p">},</span>
<span class="w">   </span><span class="nt">&quot;$defs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;Message&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">         </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Represents a structured message object with details about the sender, content, and metadata.\n\nAttributes:\n    role (str): The role of the message sender (e.g., &#39;user&#39;, &#39;assistant&#39;, &#39;system&#39;).\n    role_name (str): Optional name associated with the role of the message sender.\n    content (str): The actual content or text of the message.\n    time_created (int): Timestamp indicating when the message was created.\n    memorized (bool): Flag to indicate if the message has been saved or remembered.\n    meta_data (Dict[str, str]): Additional data or context attached to the message.&quot;</span><span class="p">,</span>
<span class="w">         </span><span class="nt">&quot;properties&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;role&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">               </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;The role of the message sender (user, assistant, system)&quot;</span><span class="p">,</span>
<span class="w">               </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Role&quot;</span><span class="p">,</span>
<span class="w">               </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span>
<span class="w">            </span><span class="p">},</span>
<span class="w">            </span><span class="nt">&quot;role_name&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">               </span><span class="nt">&quot;default&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span>
<span class="w">               </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Name describing the role of the message sender&quot;</span><span class="p">,</span>
<span class="w">               </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Role Name&quot;</span><span class="p">,</span>
<span class="w">               </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span>
<span class="w">            </span><span class="p">},</span>
<span class="w">            </span><span class="nt">&quot;content&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">               </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;The primary content of the message&quot;</span><span class="p">,</span>
<span class="w">               </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Content&quot;</span><span class="p">,</span>
<span class="w">               </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span>
<span class="w">            </span><span class="p">},</span>
<span class="w">            </span><span class="nt">&quot;time_created&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">               </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Timestamp marking the message creation time&quot;</span><span class="p">,</span>
<span class="w">               </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Time Created&quot;</span><span class="p">,</span>
<span class="w">               </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;integer&quot;</span>
<span class="w">            </span><span class="p">},</span>
<span class="w">            </span><span class="nt">&quot;memorized&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">               </span><span class="nt">&quot;default&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span>
<span class="w">               </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Indicates if the message is flagged for memory retention&quot;</span><span class="p">,</span>
<span class="w">               </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Memorized&quot;</span><span class="p">,</span>
<span class="w">               </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;boolean&quot;</span>
<span class="w">            </span><span class="p">},</span>
<span class="w">            </span><span class="nt">&quot;meta_data&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">               </span><span class="nt">&quot;additionalProperties&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                  </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span>
<span class="w">               </span><span class="p">},</span>
<span class="w">               </span><span class="nt">&quot;default&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span>
<span class="w">               </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Supplementary data attached to the message&quot;</span><span class="p">,</span>
<span class="w">               </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Meta Data&quot;</span><span class="p">,</span>
<span class="w">               </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;object&quot;</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">         </span><span class="p">},</span>
<span class="w">         </span><span class="nt">&quot;required&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">            </span><span class="s2">&quot;role&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="s2">&quot;content&quot;</span>
<span class="w">         </span><span class="p">],</span>
<span class="w">         </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Message&quot;</span><span class="p">,</span>
<span class="w">         </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;object&quot;</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;ModelEnum&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">         </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;An enumeration representing different types of models used within the system.\n\nMembers:\n    GENERATION_MODEL: Represents a model responsible for generating content.\n    EMBEDDING_MODEL: Represents a model tasked with creating embeddings, typically used for transforming data into a\n        numerical form suitable for machine learning tasks.\n    RANK_MODEL: Denotes a model that specializes in ranking, often used to order items based on relevance.&quot;</span><span class="p">,</span>
<span class="w">         </span><span class="nt">&quot;enum&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">            </span><span class="s2">&quot;generation_model&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="s2">&quot;embedding_model&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="s2">&quot;rank_model&quot;</span>
<span class="w">         </span><span class="p">],</span>
<span class="w">         </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ModelEnum&quot;</span><span class="p">,</span>
<span class="w">         </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">   </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</details></p><dl class="field-list simple">
<dt class="field-odd">Fields<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><a class="reference internal" href="../memoryscope.scheme.model_response.html#memoryscope.scheme.model_response.ModelResponse.delta" title="memoryscope.scheme.model_response.ModelResponse.delta"><code class="xref py py-obj docutils literal notranslate"><span class="pre">delta</span> <span class="pre">(str)</span></code></a></p></li>
<li><p><a class="reference internal" href="../memoryscope.scheme.model_response.html#memoryscope.scheme.model_response.ModelResponse.details" title="memoryscope.scheme.model_response.ModelResponse.details"><code class="xref py py-obj docutils literal notranslate"><span class="pre">details</span> <span class="pre">(str)</span></code></a></p></li>
<li><p><a class="reference internal" href="../memoryscope.scheme.model_response.html#memoryscope.scheme.model_response.ModelResponse.embedding_results" title="memoryscope.scheme.model_response.ModelResponse.embedding_results"><code class="xref py py-obj docutils literal notranslate"><span class="pre">embedding_results</span> <span class="pre">(List[List[float]]</span> <span class="pre">|</span> <span class="pre">List[float])</span></code></a></p></li>
<li><p><a class="reference internal" href="../memoryscope.scheme.model_response.html#memoryscope.scheme.model_response.ModelResponse.m_type" title="memoryscope.scheme.model_response.ModelResponse.m_type"><code class="xref py py-obj docutils literal notranslate"><span class="pre">m_type</span> <span class="pre">(memoryscope.enumeration.model_enum.ModelEnum)</span></code></a></p></li>
<li><p><a class="reference internal" href="../memoryscope.scheme.model_response.html#memoryscope.scheme.model_response.ModelResponse.message" title="memoryscope.scheme.model_response.ModelResponse.message"><code class="xref py py-obj docutils literal notranslate"><span class="pre">message</span> <span class="pre">(memoryscope.scheme.message.Message</span> <span class="pre">|</span> <span class="pre">None)</span></code></a></p></li>
<li><p><a class="reference internal" href="../memoryscope.scheme.model_response.html#memoryscope.scheme.model_response.ModelResponse.meta_data" title="memoryscope.scheme.model_response.ModelResponse.meta_data"><code class="xref py py-obj docutils literal notranslate"><span class="pre">meta_data</span> <span class="pre">(Dict[str,</span> <span class="pre">Any])</span></code></a></p></li>
<li><p><a class="reference internal" href="../memoryscope.scheme.model_response.html#memoryscope.scheme.model_response.ModelResponse.rank_scores" title="memoryscope.scheme.model_response.ModelResponse.rank_scores"><code class="xref py py-obj docutils literal notranslate"><span class="pre">rank_scores</span> <span class="pre">(Dict[int,</span> <span class="pre">float])</span></code></a></p></li>
<li><p><a class="reference internal" href="../memoryscope.scheme.model_response.html#memoryscope.scheme.model_response.ModelResponse.raw" title="memoryscope.scheme.model_response.ModelResponse.raw"><code class="xref py py-obj docutils literal notranslate"><span class="pre">raw</span> <span class="pre">(Any)</span></code></a></p></li>
<li><p><a class="reference internal" href="../memoryscope.scheme.model_response.html#memoryscope.scheme.model_response.ModelResponse.status" title="memoryscope.scheme.model_response.ModelResponse.status"><code class="xref py py-obj docutils literal notranslate"><span class="pre">status</span> <span class="pre">(bool)</span></code></a></p></li>
</ul>
</dd>
</dl>
<dl class="py attribute pydantic_field">
<dt class="sig sig-object py" id="memoryscope.scheme.ModelResponse.message">
<em class="property"><span class="pre">field</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">message</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="../memoryscope.scheme.message.html#memoryscope.scheme.message.Message" title="memoryscope.scheme.message.Message"><span class="pre">Message</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#memoryscope.scheme.ModelResponse.message" title="Link to this definition"></a></dt>
<dd><p>generation model result</p>
</dd></dl>

<dl class="py attribute pydantic_field">
<dt class="sig sig-object py" id="memoryscope.scheme.ModelResponse.delta">
<em class="property"><span class="pre">field</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">delta</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">''</span></em><a class="headerlink" href="#memoryscope.scheme.ModelResponse.delta" title="Link to this definition"></a></dt>
<dd><p>New text that just streamed in (only used when streaming)</p>
</dd></dl>

<dl class="py attribute pydantic_field">
<dt class="sig sig-object py" id="memoryscope.scheme.ModelResponse.embedding_results">
<em class="property"><span class="pre">field</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">embedding_results</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">[]</span></em><a class="headerlink" href="#memoryscope.scheme.ModelResponse.embedding_results" title="Link to this definition"></a></dt>
<dd><p>embedding vector</p>
</dd></dl>

<dl class="py attribute pydantic_field">
<dt class="sig sig-object py" id="memoryscope.scheme.ModelResponse.rank_scores">
<em class="property"><span class="pre">field</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">rank_scores</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">{}</span></em><a class="headerlink" href="#memoryscope.scheme.ModelResponse.rank_scores" title="Link to this definition"></a></dt>
<dd><p>The rank scores of each documents. key: index, value: rank score</p>
</dd></dl>

<dl class="py attribute pydantic_field">
<dt class="sig sig-object py" id="memoryscope.scheme.ModelResponse.m_type">
<em class="property"><span class="pre">field</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">m_type</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="../memoryscope.enumeration.model_enum.html#memoryscope.enumeration.model_enum.ModelEnum" title="memoryscope.enumeration.model_enum.ModelEnum"><span class="pre">ModelEnum</span></a></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">ModelEnum.GENERATION_MODEL</span></em><a class="headerlink" href="#memoryscope.scheme.ModelResponse.m_type" title="Link to this definition"></a></dt>
<dd><p>One of LLM, EMB, RANK.</p>
</dd></dl>

<dl class="py attribute pydantic_field">
<dt class="sig sig-object py" id="memoryscope.scheme.ModelResponse.status">
<em class="property"><span class="pre">field</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">status</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">bool</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">True</span></em><a class="headerlink" href="#memoryscope.scheme.ModelResponse.status" title="Link to this definition"></a></dt>
<dd><p>Indicates whether the model call was successful.</p>
</dd></dl>

<dl class="py attribute pydantic_field">
<dt class="sig sig-object py" id="memoryscope.scheme.ModelResponse.details">
<em class="property"><span class="pre">field</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">details</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">''</span></em><a class="headerlink" href="#memoryscope.scheme.ModelResponse.details" title="Link to this definition"></a></dt>
<dd><p>The details information for model call, usually for storage of raw response or failure messages.</p>
</dd></dl>

<dl class="py attribute pydantic_field">
<dt class="sig sig-object py" id="memoryscope.scheme.ModelResponse.raw">
<em class="property"><span class="pre">field</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">raw</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Any</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">''</span></em><a class="headerlink" href="#memoryscope.scheme.ModelResponse.raw" title="Link to this definition"></a></dt>
<dd><p>Raw response from model call</p>
</dd></dl>

<dl class="py attribute pydantic_field">
<dt class="sig sig-object py" id="memoryscope.scheme.ModelResponse.meta_data">
<em class="property"><span class="pre">field</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">meta_data</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">{}</span></em><a class="headerlink" href="#memoryscope.scheme.ModelResponse.meta_data" title="Link to this definition"></a></dt>
<dd><p>meta data for model response</p>
</dd></dl>

</dd></dl>

</section>
<section id="module-memoryscope.core.config">
<span id="config"></span><h1>Config<a class="headerlink" href="#module-memoryscope.core.config" title="Link to this heading"></a></h1>
<dl class="py class">
<dt class="sig sig-object py" id="memoryscope.core.config.Arguments">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">memoryscope.core.config.</span></span><span class="sig-name descname"><span class="pre">Arguments</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">language:</span> <span class="pre">Literal['cn'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">'en']</span> <span class="pre">=</span> <span class="pre">'cn'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">thread_pool_max_workers:</span> <span class="pre">int</span> <span class="pre">=</span> <span class="pre">5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">memory_chat_class:</span> <span class="pre">str</span> <span class="pre">=</span> <span class="pre">'cli_memory_chat'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">chat_stream:</span> <span class="pre">bool</span> <span class="pre">|</span> <span class="pre">None</span> <span class="pre">=</span> <span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">human_name:</span> <span class="pre">str</span> <span class="pre">=</span> <span class="pre">'user'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">assistant_name:</span> <span class="pre">str</span> <span class="pre">=</span> <span class="pre">'AI'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">consolidate_memory_interval_time:</span> <span class="pre">int</span> <span class="pre">|</span> <span class="pre">None</span> <span class="pre">=</span> <span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reflect_and_reconsolidate_interval_time:</span> <span class="pre">int</span> <span class="pre">|</span> <span class="pre">None</span> <span class="pre">=</span> <span class="pre">15</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">worker_params:</span> <span class="pre">Dict[str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dict]</span> <span class="pre">=</span> <span class="pre">&lt;factory&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">generation_backend:</span> <span class="pre">str</span> <span class="pre">=</span> <span class="pre">'dashscope_generation'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">generation_model:</span> <span class="pre">str</span> <span class="pre">=</span> <span class="pre">'qwen-max'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">generation_params:</span> <span class="pre">dict</span> <span class="pre">=</span> <span class="pre">&lt;factory&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">embedding_backend:</span> <span class="pre">str</span> <span class="pre">=</span> <span class="pre">'dashscope_generation'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">embedding_model:</span> <span class="pre">str</span> <span class="pre">=</span> <span class="pre">'text-embedding-v2'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">embedding_params:</span> <span class="pre">dict</span> <span class="pre">=</span> <span class="pre">&lt;factory&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rank_backend:</span> <span class="pre">str</span> <span class="pre">=</span> <span class="pre">'dashscope_rank'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rank_model:</span> <span class="pre">str</span> <span class="pre">=</span> <span class="pre">'gte-rerank'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rank_params:</span> <span class="pre">dict</span> <span class="pre">=</span> <span class="pre">&lt;factory&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">es_index_name:</span> <span class="pre">str</span> <span class="pre">=</span> <span class="pre">'memory_index'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">es_url:</span> <span class="pre">str</span> <span class="pre">=</span> <span class="pre">'http://localhost:9200'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">retrieve_mode:</span> <span class="pre">str</span> <span class="pre">=</span> <span class="pre">'dense'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">enable_ranker:</span> <span class="pre">bool</span> <span class="pre">=</span> <span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">enable_today_contra_repeat:</span> <span class="pre">bool</span> <span class="pre">=</span> <span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">enable_long_contra_repeat:</span> <span class="pre">bool</span> <span class="pre">=</span> <span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_memory_max_count:</span> <span class="pre">int</span> <span class="pre">=</span> <span class="pre">20</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/memoryscope/core/config/arguments.html#Arguments"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.core.config.Arguments" title="Link to this definition"></a></dt>
<dd><dl class="py method">
<dt class="sig sig-object py" id="memoryscope.core.config.Arguments.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">language:</span> <span class="pre">~typing.Literal['cn'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">'en']</span> <span class="pre">=</span> <span class="pre">'cn'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">thread_pool_max_workers:</span> <span class="pre">int</span> <span class="pre">=</span> <span class="pre">5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">memory_chat_class:</span> <span class="pre">str</span> <span class="pre">=</span> <span class="pre">'cli_memory_chat'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">chat_stream:</span> <span class="pre">bool</span> <span class="pre">|</span> <span class="pre">None</span> <span class="pre">=</span> <span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">human_name:</span> <span class="pre">str</span> <span class="pre">=</span> <span class="pre">'user'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">assistant_name:</span> <span class="pre">str</span> <span class="pre">=</span> <span class="pre">'AI'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">consolidate_memory_interval_time:</span> <span class="pre">int</span> <span class="pre">|</span> <span class="pre">None</span> <span class="pre">=</span> <span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reflect_and_reconsolidate_interval_time:</span> <span class="pre">int</span> <span class="pre">|</span> <span class="pre">None</span> <span class="pre">=</span> <span class="pre">15</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">worker_params:</span> <span class="pre">~typing.Dict[str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dict]</span> <span class="pre">=</span> <span class="pre">&lt;factory&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">generation_backend:</span> <span class="pre">str</span> <span class="pre">=</span> <span class="pre">'dashscope_generation'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">generation_model:</span> <span class="pre">str</span> <span class="pre">=</span> <span class="pre">'qwen-max'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">generation_params:</span> <span class="pre">dict</span> <span class="pre">=</span> <span class="pre">&lt;factory&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">embedding_backend:</span> <span class="pre">str</span> <span class="pre">=</span> <span class="pre">'dashscope_generation'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">embedding_model:</span> <span class="pre">str</span> <span class="pre">=</span> <span class="pre">'text-embedding-v2'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">embedding_params:</span> <span class="pre">dict</span> <span class="pre">=</span> <span class="pre">&lt;factory&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rank_backend:</span> <span class="pre">str</span> <span class="pre">=</span> <span class="pre">'dashscope_rank'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rank_model:</span> <span class="pre">str</span> <span class="pre">=</span> <span class="pre">'gte-rerank'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rank_params:</span> <span class="pre">dict</span> <span class="pre">=</span> <span class="pre">&lt;factory&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">es_index_name:</span> <span class="pre">str</span> <span class="pre">=</span> <span class="pre">'memory_index'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">es_url:</span> <span class="pre">str</span> <span class="pre">=</span> <span class="pre">'http://localhost:9200'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">retrieve_mode:</span> <span class="pre">str</span> <span class="pre">=</span> <span class="pre">'dense'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">enable_ranker:</span> <span class="pre">bool</span> <span class="pre">=</span> <span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">enable_today_contra_repeat:</span> <span class="pre">bool</span> <span class="pre">=</span> <span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">enable_long_contra_repeat:</span> <span class="pre">bool</span> <span class="pre">=</span> <span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_memory_max_count:</span> <span class="pre">int</span> <span class="pre">=</span> <span class="pre">20</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#memoryscope.core.config.Arguments.__init__" title="Link to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

</section>
<section id="module-memoryscope.core.models">
<span id="models"></span><h1>Models<a class="headerlink" href="#module-memoryscope.core.models" title="Link to this heading"></a></h1>
<dl class="py class">
<dt class="sig sig-object py" id="memoryscope.core.models.DummyGenerationModel">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">memoryscope.core.models.</span></span><span class="sig-name descname"><span class="pre">DummyGenerationModel</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">module_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_retries</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">3</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">retry_interval</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">kwargs_filter</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">raise_exception</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/memoryscope/core/models/dummy_generation_model.html#DummyGenerationModel"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.core.models.DummyGenerationModel" title="Link to this definition"></a></dt>
<dd><p>The <cite>DummyGenerationModel</cite> class serves as a placeholder model for generating responses.
It processes input prompts or sequences of messages, adapting them into a structure compatible
with chat interfaces. It also facilitates the generation of mock (dummy) responses for testing,
supporting both immediate and streamed output.</p>
<dl class="py method">
<dt class="sig sig-object py" id="memoryscope.core.models.DummyGenerationModel.before_call">
<span class="sig-name descname"><span class="pre">before_call</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model_response</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="../memoryscope.scheme.model_response.html#memoryscope.scheme.model_response.ModelResponse" title="memoryscope.scheme.model_response.ModelResponse"><span class="pre">ModelResponse</span></a></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/memoryscope/core/models/dummy_generation_model.html#DummyGenerationModel.before_call"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.core.models.DummyGenerationModel.before_call" title="Link to this definition"></a></dt>
<dd><p>Prepares the input data before making a call to the language model.
It accepts either a 'prompt' directly or a list of 'messages'.
If 'prompt' is provided, it sets the data accordingly.
If 'messages' are provided, it constructs a list of ChatMessage objects from the list.
Raises an error if neither 'prompt' nor 'messages' are supplied.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>model_response</strong> -- model_response</p></li>
<li><p><strong>**kwargs</strong> -- Arbitrary keyword arguments including 'prompt' and 'messages'.</p></li>
</ul>
</dd>
<dt class="field-even">抛出<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>RuntimeError</strong> -- When both 'prompt' and 'messages' inputs are not provided.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="memoryscope.core.models.DummyGenerationModel.after_call">
<span class="sig-name descname"><span class="pre">after_call</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model_response</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="../memoryscope.scheme.model_response.html#memoryscope.scheme.model_response.ModelResponse" title="memoryscope.scheme.model_response.ModelResponse"><span class="pre">ModelResponse</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">stream</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="../memoryscope.scheme.model_response.html#memoryscope.scheme.model_response.ModelResponse" title="memoryscope.scheme.model_response.ModelResponse"><span class="pre">ModelResponse</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Generator</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="../memoryscope.scheme.model_response.html#memoryscope.scheme.model_response.ModelResponse" title="memoryscope.scheme.model_response.ModelResponse"><span class="pre">ModelResponse</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">None</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">None</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/memoryscope/core/models/dummy_generation_model.html#DummyGenerationModel.after_call"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.core.models.DummyGenerationModel.after_call" title="Link to this definition"></a></dt>
<dd><p>Processes the model's response post-call, optionally streaming the output or returning it as a whole.</p>
<p>This method modifies the input <cite>model_response</cite> by resetting its message content and, based on the <cite>stream</cite>
parameter, either yields the response in a generated stream or returns the complete response directly.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>model_response</strong> (<a class="reference internal" href="../memoryscope.scheme.html#memoryscope.scheme.ModelResponse" title="memoryscope.scheme.ModelResponse"><em>ModelResponse</em></a>) -- The initial response object to be processed.</p></li>
<li><p><strong>stream</strong> (<em>bool</em><em>, </em><em>optional</em>) -- Flag indicating whether to stream the response. Defaults to False.</p></li>
<li><p><strong>**kwargs</strong> -- Additional keyword arguments (not used in this implementation).</p></li>
</ul>
</dd>
<dt class="field-even">返回<span class="colon">:</span></dt>
<dd class="field-even"><p><dl class="simple">
<dt>If <cite>stream</cite> is True, a generator yielding updated <cite>ModelResponse</cite> objects;</dt><dd><p>otherwise, a modified <cite>ModelResponse</cite> object with the complete content.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">返回类型<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="../memoryscope.scheme.html#memoryscope.scheme.ModelResponse" title="memoryscope.scheme.ModelResponse">ModelResponse</a> | ModelResponseGen</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="memoryscope.core.models.LlamaIndexEmbeddingModel">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">memoryscope.core.models.</span></span><span class="sig-name descname"><span class="pre">LlamaIndexEmbeddingModel</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/memoryscope/core/models/llama_index_embedding_model.html#LlamaIndexEmbeddingModel"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.core.models.LlamaIndexEmbeddingModel" title="Link to this definition"></a></dt>
<dd><p>Manages text embeddings utilizing the DashScopeEmbedding within the LlamaIndex framework,
facilitating embedding operations for both sync and async modes, inheriting from BaseModel.</p>
<dl class="py method">
<dt class="sig sig-object py" id="memoryscope.core.models.LlamaIndexEmbeddingModel.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/memoryscope/core/models/llama_index_embedding_model.html#LlamaIndexEmbeddingModel.__init__"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.core.models.LlamaIndexEmbeddingModel.__init__" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="memoryscope.core.models.LlamaIndexEmbeddingModel.register_model">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">register_model</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_class</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">type</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/memoryscope/core/models/llama_index_embedding_model.html#LlamaIndexEmbeddingModel.register_model"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.core.models.LlamaIndexEmbeddingModel.register_model" title="Link to this definition"></a></dt>
<dd><p>Registers a new embedding model class with the model registry.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>model_name</strong> (<em>str</em>) -- The name to register the model under.</p></li>
<li><p><strong>model_class</strong> (<em>type</em>) -- The class of the model to register.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="memoryscope.core.models.LlamaIndexGenerationModel">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">memoryscope.core.models.</span></span><span class="sig-name descname"><span class="pre">LlamaIndexGenerationModel</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/memoryscope/core/models/llama_index_generation_model.html#LlamaIndexGenerationModel"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.core.models.LlamaIndexGenerationModel" title="Link to this definition"></a></dt>
<dd><p>This class represents a generation model within the LlamaIndex framework,
capable of processing input prompts or message histories, selecting an appropriate
language model service from a registry, and generating text responses, with support
for both streaming and non-streaming modes. It encapsulates logic for formatting
these interactions within the context of a memory scope management system.</p>
<dl class="py method">
<dt class="sig sig-object py" id="memoryscope.core.models.LlamaIndexGenerationModel.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/memoryscope/core/models/llama_index_generation_model.html#LlamaIndexGenerationModel.__init__"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.core.models.LlamaIndexGenerationModel.__init__" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="memoryscope.core.models.LlamaIndexGenerationModel.before_call">
<span class="sig-name descname"><span class="pre">before_call</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model_response</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="../memoryscope.scheme.model_response.html#memoryscope.scheme.model_response.ModelResponse" title="memoryscope.scheme.model_response.ModelResponse"><span class="pre">ModelResponse</span></a></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/memoryscope/core/models/llama_index_generation_model.html#LlamaIndexGenerationModel.before_call"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.core.models.LlamaIndexGenerationModel.before_call" title="Link to this definition"></a></dt>
<dd><p>Prepares the input data before making a call to the language model.
It accepts either a 'prompt' directly or a list of 'messages'.
If 'prompt' is provided, it sets the data accordingly.
If 'messages' are provided, it constructs a list of ChatMessage objects from the list.
Raises an error if neither 'prompt' nor 'messages' are supplied.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>model_response</strong> -- model_response</p></li>
<li><p><strong>**kwargs</strong> -- Arbitrary keyword arguments including 'prompt' and 'messages'.</p></li>
</ul>
</dd>
<dt class="field-even">抛出<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>RuntimeError</strong> -- When both 'prompt' and 'messages' inputs are not provided.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="memoryscope.core.models.LlamaIndexRankModel">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">memoryscope.core.models.</span></span><span class="sig-name descname"><span class="pre">LlamaIndexRankModel</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/memoryscope/core/models/llama_index_rank_model.html#LlamaIndexRankModel"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.core.models.LlamaIndexRankModel" title="Link to this definition"></a></dt>
<dd><p>The LlamaIndexRankModel class is designed to rerank documents according to their relevance
to a provided query, utilizing the DashScope Rerank model. It transforms document lists
and queries into a compatible format for ranking, manages the ranking process, and allocates
rank scores to individual documents.</p>
<dl class="py method">
<dt class="sig sig-object py" id="memoryscope.core.models.LlamaIndexRankModel.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/memoryscope/core/models/llama_index_rank_model.html#LlamaIndexRankModel.__init__"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.core.models.LlamaIndexRankModel.__init__" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="memoryscope.core.models.LlamaIndexRankModel.before_call">
<span class="sig-name descname"><span class="pre">before_call</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model_response</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="../memoryscope.scheme.model_response.html#memoryscope.scheme.model_response.ModelResponse" title="memoryscope.scheme.model_response.ModelResponse"><span class="pre">ModelResponse</span></a></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/memoryscope/core/models/llama_index_rank_model.html#LlamaIndexRankModel.before_call"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.core.models.LlamaIndexRankModel.before_call" title="Link to this definition"></a></dt>
<dd><p>Prepares necessary data before the ranking call by extracting the query and documents,
ensuring they are valid, and initializing nodes with dummy scores.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>model_response</strong> -- model response</p></li>
<li><p><strong>**kwargs</strong> -- Keyword arguments containing 'query' and 'documents'.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="memoryscope.core.models.LlamaIndexRankModel.after_call">
<span class="sig-name descname"><span class="pre">after_call</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model_response</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="../memoryscope.scheme.model_response.html#memoryscope.scheme.model_response.ModelResponse" title="memoryscope.scheme.model_response.ModelResponse"><span class="pre">ModelResponse</span></a></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="../memoryscope.scheme.model_response.html#memoryscope.scheme.model_response.ModelResponse" title="memoryscope.scheme.model_response.ModelResponse"><span class="pre">ModelResponse</span></a></span></span><a class="reference internal" href="../_modules/memoryscope/core/models/llama_index_rank_model.html#LlamaIndexRankModel.after_call"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.core.models.LlamaIndexRankModel.after_call" title="Link to this definition"></a></dt>
<dd><p>Processes the model response post-ranking, assigning calculated rank scores to each document
based on their index in the original document list.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>model_response</strong> (<a class="reference internal" href="../memoryscope.scheme.html#memoryscope.scheme.ModelResponse" title="memoryscope.scheme.ModelResponse"><em>ModelResponse</em></a>) -- The initial response from the ranking model.</p></li>
<li><p><strong>**kwargs</strong> -- Additional keyword arguments (unused).</p></li>
</ul>
</dd>
<dt class="field-even">返回<span class="colon">:</span></dt>
<dd class="field-even"><p>Updated response with rank scores assigned to documents.</p>
</dd>
<dt class="field-odd">返回类型<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="../memoryscope.scheme.html#memoryscope.scheme.ModelResponse" title="memoryscope.scheme.ModelResponse">ModelResponse</a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="module-memoryscope.core.storage">
<span id="storage"></span><h1>Storage<a class="headerlink" href="#module-memoryscope.core.storage" title="Link to this heading"></a></h1>
<dl class="py class">
<dt class="sig sig-object py" id="memoryscope.core.storage.BaseMemoryStore">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">memoryscope.core.storage.</span></span><span class="sig-name descname"><span class="pre">BaseMemoryStore</span></span><a class="reference internal" href="../_modules/memoryscope/core/storage/base_memory_store.html#BaseMemoryStore"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.core.storage.BaseMemoryStore" title="Link to this definition"></a></dt>
<dd><p>An abstract base class defining the interface for a memory store which handles memory nodes.
It outlines essential operations like retrieval, updating, flushing, and closing of memory scopes.</p>
<dl class="py method">
<dt class="sig sig-object py" id="memoryscope.core.storage.BaseMemoryStore.retrieve_memories">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">retrieve_memories</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">query</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">top_k</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">3</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filter_dict</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="../memoryscope.scheme.memory_node.html#memoryscope.scheme.memory_node.MemoryNode" title="memoryscope.scheme.memory_node.MemoryNode"><span class="pre">MemoryNode</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/memoryscope/core/storage/base_memory_store.html#BaseMemoryStore.retrieve_memories"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.core.storage.BaseMemoryStore.retrieve_memories" title="Link to this definition"></a></dt>
<dd><p>Retrieves a list of MemoryNode objects that are most relevant to the query,
considering a filter dictionary for additional constraints. The number of nodes returned
is limited by top_k.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>query</strong> (<em>str</em>) -- The query string used to find relevant memories.</p></li>
<li><p><strong>top_k</strong> (<em>int</em>) -- The maximum number of MemoryNode objects to return.</p></li>
<li><p><strong>filter_dict</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>List</em><em>[</em><em>str</em><em>]</em><em>]</em>) -- A dictionary with keys representing filter fields
and values as lists of strings for filtering criteria.</p></li>
</ul>
</dd>
<dt class="field-even">返回<span class="colon">:</span></dt>
<dd class="field-even"><p><dl class="simple">
<dt>A list of MemoryNode objects sorted by relevance to the query,</dt><dd><p>limited to top_k items.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">返回类型<span class="colon">:</span></dt>
<dd class="field-odd"><p>List[<a class="reference internal" href="../memoryscope.scheme.html#memoryscope.scheme.MemoryNode" title="memoryscope.scheme.MemoryNode">MemoryNode</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="memoryscope.core.storage.BaseMemoryStore.a_retrieve_memories">
<em class="property"><span class="pre">abstract</span><span class="w"> </span><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">a_retrieve_memories</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">query</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">top_k</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">3</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filter_dict</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="../memoryscope.scheme.memory_node.html#memoryscope.scheme.memory_node.MemoryNode" title="memoryscope.scheme.memory_node.MemoryNode"><span class="pre">MemoryNode</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/memoryscope/core/storage/base_memory_store.html#BaseMemoryStore.a_retrieve_memories"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.core.storage.BaseMemoryStore.a_retrieve_memories" title="Link to this definition"></a></dt>
<dd><p>Asynchronously retrieves a list of MemoryNode objects that best match the query,
respecting a filter dictionary, with the result size capped at top_k.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>query</strong> (<em>str</em>) -- The text to search for in memory nodes.</p></li>
<li><p><strong>top_k</strong> (<em>int</em>) -- Maximum number of nodes to return.</p></li>
<li><p><strong>filter_dict</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>List</em><em>[</em><em>str</em><em>]</em><em>]</em>) -- Filters to apply on memory nodes.</p></li>
</ul>
</dd>
<dt class="field-even">返回<span class="colon">:</span></dt>
<dd class="field-even"><p>A list of up to top_k MemoryNode objects matching the criteria.</p>
</dd>
<dt class="field-odd">返回类型<span class="colon">:</span></dt>
<dd class="field-odd"><p>List[<a class="reference internal" href="../memoryscope.scheme.html#memoryscope.scheme.MemoryNode" title="memoryscope.scheme.MemoryNode">MemoryNode</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="memoryscope.core.storage.BaseMemoryStore.flush">
<span class="sig-name descname"><span class="pre">flush</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/memoryscope/core/storage/base_memory_store.html#BaseMemoryStore.flush"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.core.storage.BaseMemoryStore.flush" title="Link to this definition"></a></dt>
<dd><p>Flushes any pending memory updates or operations to ensure data consistency.
This method should be overridden by subclasses to provide the specific flushing mechanism.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="memoryscope.core.storage.BaseMemoryStore.close">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">close</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/memoryscope/core/storage/base_memory_store.html#BaseMemoryStore.close"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.core.storage.BaseMemoryStore.close" title="Link to this definition"></a></dt>
<dd><p>Closes the memory store, releasing any resources associated with it.
Subclasses must implement this method to define how the memory store is properly closed.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="memoryscope.core.storage.BaseMonitor">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">memoryscope.core.storage.</span></span><span class="sig-name descname"><span class="pre">BaseMonitor</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/memoryscope/core/storage/base_monitor.html#BaseMonitor"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.core.storage.BaseMonitor" title="Link to this definition"></a></dt>
<dd><p>An abstract base class defining the interface for monitor classes.
Subclasses should implement the methods defined here to provide concrete monitoring behavior.</p>
<dl class="py method">
<dt class="sig sig-object py" id="memoryscope.core.storage.BaseMonitor.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/memoryscope/core/storage/base_monitor.html#BaseMonitor.__init__"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.core.storage.BaseMonitor.__init__" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="memoryscope.core.storage.BaseMonitor.add">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">add</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/memoryscope/core/storage/base_monitor.html#BaseMonitor.add"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.core.storage.BaseMonitor.add" title="Link to this definition"></a></dt>
<dd><p>Abstract method to add data or events to the monitor.
This method should be implemented by subclasses to define how data is added into the monitoring system.</p>
<dl class="field-list simple">
<dt class="field-odd">返回<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="memoryscope.core.storage.BaseMonitor.add_token">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">add_token</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/memoryscope/core/storage/base_monitor.html#BaseMonitor.add_token"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.core.storage.BaseMonitor.add_token" title="Link to this definition"></a></dt>
<dd><p>Abstract method to add a token or a specific type of identifier to the monitor.
Subclasses should implement this to specify how tokens are managed within the monitoring context.</p>
<dl class="field-list simple">
<dt class="field-odd">返回<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="memoryscope.core.storage.BaseMonitor.flush">
<span class="sig-name descname"><span class="pre">flush</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/memoryscope/core/storage/base_monitor.html#BaseMonitor.flush"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.core.storage.BaseMonitor.flush" title="Link to this definition"></a></dt>
<dd><p>Method to flush any buffered data in the monitor.
Intended to ensure that all pending recorded data is processed or written out.</p>
<dl class="field-list simple">
<dt class="field-odd">返回<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="memoryscope.core.storage.BaseMonitor.close">
<span class="sig-name descname"><span class="pre">close</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/memoryscope/core/storage/base_monitor.html#BaseMonitor.close"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.core.storage.BaseMonitor.close" title="Link to this definition"></a></dt>
<dd><p>Method to close the monitor, performing necessary cleanup operations.
This could include releasing resources, closing files, or any other termination tasks.</p>
<dl class="field-list simple">
<dt class="field-odd">返回<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="memoryscope.core.storage.DummyMemoryStore">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">memoryscope.core.storage.</span></span><span class="sig-name descname"><span class="pre">DummyMemoryStore</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">embedding_model</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="../memoryscope.core.models.base_model.html#memoryscope.core.models.base_model.BaseModel" title="memoryscope.core.models.base_model.BaseModel"><span class="pre">BaseModel</span></a></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/memoryscope/core/storage/dummy_memory_store.html#DummyMemoryStore"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.core.storage.DummyMemoryStore" title="Link to this definition"></a></dt>
<dd><p>Placeholder implementation of a memory storage system interface. Defines methods for querying, updating,
and closing memory nodes with asynchronous capabilities, leveraging an embedding model for potential
semantic retrieval. Actual storage operations are not implemented.</p>
<dl class="py method">
<dt class="sig sig-object py" id="memoryscope.core.storage.DummyMemoryStore.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">embedding_model</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="../memoryscope.core.models.base_model.html#memoryscope.core.models.base_model.BaseModel" title="memoryscope.core.models.base_model.BaseModel"><span class="pre">BaseModel</span></a></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/memoryscope/core/storage/dummy_memory_store.html#DummyMemoryStore.__init__"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.core.storage.DummyMemoryStore.__init__" title="Link to this definition"></a></dt>
<dd><p>Initializes the DummyMemoryStore with an embedding model and additional keyword arguments.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>embedding_model</strong> (<a class="reference internal" href="../memoryscope.core.models.html#memoryscope.core.models.BaseModel" title="memoryscope.core.models.BaseModel"><em>BaseModel</em></a>) -- The model used to embed data for potential similarity-based retrieval.</p></li>
<li><p><strong>**kwargs</strong> -- Additional keyword arguments for configuration or future expansion.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="memoryscope.core.storage.DummyMemoryStore.retrieve_memories">
<span class="sig-name descname"><span class="pre">retrieve_memories</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">query</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">top_k</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">3</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filter_dict</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="../memoryscope.scheme.memory_node.html#memoryscope.scheme.memory_node.MemoryNode" title="memoryscope.scheme.memory_node.MemoryNode"><span class="pre">MemoryNode</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/memoryscope/core/storage/dummy_memory_store.html#DummyMemoryStore.retrieve_memories"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.core.storage.DummyMemoryStore.retrieve_memories" title="Link to this definition"></a></dt>
<dd><p>Retrieves a list of MemoryNode objects that are most relevant to the query,
considering a filter dictionary for additional constraints. The number of nodes returned
is limited by top_k.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>query</strong> (<em>str</em>) -- The query string used to find relevant memories.</p></li>
<li><p><strong>top_k</strong> (<em>int</em>) -- The maximum number of MemoryNode objects to return.</p></li>
<li><p><strong>filter_dict</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>List</em><em>[</em><em>str</em><em>]</em><em>]</em>) -- A dictionary with keys representing filter fields
and values as lists of strings for filtering criteria.</p></li>
</ul>
</dd>
<dt class="field-even">返回<span class="colon">:</span></dt>
<dd class="field-even"><p><dl class="simple">
<dt>A list of MemoryNode objects sorted by relevance to the query,</dt><dd><p>limited to top_k items.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">返回类型<span class="colon">:</span></dt>
<dd class="field-odd"><p>List[<a class="reference internal" href="../memoryscope.scheme.html#memoryscope.scheme.MemoryNode" title="memoryscope.scheme.MemoryNode">MemoryNode</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="memoryscope.core.storage.DummyMemoryStore.a_retrieve_memories">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">a_retrieve_memories</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">query</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">top_k</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">3</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filter_dict</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="../memoryscope.scheme.memory_node.html#memoryscope.scheme.memory_node.MemoryNode" title="memoryscope.scheme.memory_node.MemoryNode"><span class="pre">MemoryNode</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/memoryscope/core/storage/dummy_memory_store.html#DummyMemoryStore.a_retrieve_memories"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.core.storage.DummyMemoryStore.a_retrieve_memories" title="Link to this definition"></a></dt>
<dd><p>Asynchronously retrieves a list of MemoryNode objects that best match the query,
respecting a filter dictionary, with the result size capped at top_k.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>query</strong> (<em>str</em>) -- The text to search for in memory nodes.</p></li>
<li><p><strong>top_k</strong> (<em>int</em>) -- Maximum number of nodes to return.</p></li>
<li><p><strong>filter_dict</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>List</em><em>[</em><em>str</em><em>]</em><em>]</em>) -- Filters to apply on memory nodes.</p></li>
</ul>
</dd>
<dt class="field-even">返回<span class="colon">:</span></dt>
<dd class="field-even"><p>A list of up to top_k MemoryNode objects matching the criteria.</p>
</dd>
<dt class="field-odd">返回类型<span class="colon">:</span></dt>
<dd class="field-odd"><p>List[<a class="reference internal" href="../memoryscope.scheme.html#memoryscope.scheme.MemoryNode" title="memoryscope.scheme.MemoryNode">MemoryNode</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="memoryscope.core.storage.DummyMemoryStore.close">
<span class="sig-name descname"><span class="pre">close</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/memoryscope/core/storage/dummy_memory_store.html#DummyMemoryStore.close"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.core.storage.DummyMemoryStore.close" title="Link to this definition"></a></dt>
<dd><p>Closes the memory store, releasing any resources associated with it.
Subclasses must implement this method to define how the memory store is properly closed.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="memoryscope.core.storage.DummyMonitor">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">memoryscope.core.storage.</span></span><span class="sig-name descname"><span class="pre">DummyMonitor</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/memoryscope/core/storage/dummy_monitor.html#DummyMonitor"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.core.storage.DummyMonitor" title="Link to this definition"></a></dt>
<dd><p>DummyMonitor serves as a placeholder or mock class extending BaseMonitor,
providing empty method bodies for 'add', 'add_token', and 'close' operations.
This can be used for testing or in situations where a full monitor implementation is not required.</p>
<dl class="py method">
<dt class="sig sig-object py" id="memoryscope.core.storage.DummyMonitor.add">
<span class="sig-name descname"><span class="pre">add</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/memoryscope/core/storage/dummy_monitor.html#DummyMonitor.add"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.core.storage.DummyMonitor.add" title="Link to this definition"></a></dt>
<dd><p>Placeholder for adding data to the monitor.
This method currently does nothing.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="memoryscope.core.storage.DummyMonitor.add_token">
<span class="sig-name descname"><span class="pre">add_token</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/memoryscope/core/storage/dummy_monitor.html#DummyMonitor.add_token"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.core.storage.DummyMonitor.add_token" title="Link to this definition"></a></dt>
<dd><p>Placeholder for adding a token to the monitored data.
This method currently does nothing.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="memoryscope.core.storage.DummyMonitor.close">
<span class="sig-name descname"><span class="pre">close</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/memoryscope/core/storage/dummy_monitor.html#DummyMonitor.close"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.core.storage.DummyMonitor.close" title="Link to this definition"></a></dt>
<dd><p>Placeholder for closing the monitor and performing any necessary cleanup.
This method currently does nothing.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="memoryscope.core.storage.LlamaIndexEsMemoryStore">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">memoryscope.core.storage.</span></span><span class="sig-name descname"><span class="pre">LlamaIndexEsMemoryStore</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">embedding_model</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="../memoryscope.core.models.base_model.html#memoryscope.core.models.base_model.BaseModel" title="memoryscope.core.models.base_model.BaseModel"><span class="pre">BaseModel</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">index_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">es_url</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">retrieve_mode</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'dense'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hybrid_alpha</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/memoryscope/core/storage/llama_index_es_memory_store.html#LlamaIndexEsMemoryStore"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.core.storage.LlamaIndexEsMemoryStore" title="Link to this definition"></a></dt>
<dd><dl class="py method">
<dt class="sig sig-object py" id="memoryscope.core.storage.LlamaIndexEsMemoryStore.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">embedding_model</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="../memoryscope.core.models.base_model.html#memoryscope.core.models.base_model.BaseModel" title="memoryscope.core.models.base_model.BaseModel"><span class="pre">BaseModel</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">index_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">es_url</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">retrieve_mode</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'dense'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hybrid_alpha</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/memoryscope/core/storage/llama_index_es_memory_store.html#LlamaIndexEsMemoryStore.__init__"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.core.storage.LlamaIndexEsMemoryStore.__init__" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="memoryscope.core.storage.LlamaIndexEsMemoryStore.retrieve_memories">
<span class="sig-name descname"><span class="pre">retrieve_memories</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">query</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">top_k</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">3</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filter_dict</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="../memoryscope.scheme.memory_node.html#memoryscope.scheme.memory_node.MemoryNode" title="memoryscope.scheme.memory_node.MemoryNode"><span class="pre">MemoryNode</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/memoryscope/core/storage/llama_index_es_memory_store.html#LlamaIndexEsMemoryStore.retrieve_memories"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.core.storage.LlamaIndexEsMemoryStore.retrieve_memories" title="Link to this definition"></a></dt>
<dd><p>Retrieves a list of MemoryNode objects that are most relevant to the query,
considering a filter dictionary for additional constraints. The number of nodes returned
is limited by top_k.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>query</strong> (<em>str</em>) -- The query string used to find relevant memories.</p></li>
<li><p><strong>top_k</strong> (<em>int</em>) -- The maximum number of MemoryNode objects to return.</p></li>
<li><p><strong>filter_dict</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>List</em><em>[</em><em>str</em><em>]</em><em>]</em>) -- A dictionary with keys representing filter fields
and values as lists of strings for filtering criteria.</p></li>
</ul>
</dd>
<dt class="field-even">返回<span class="colon">:</span></dt>
<dd class="field-even"><p><dl class="simple">
<dt>A list of MemoryNode objects sorted by relevance to the query,</dt><dd><p>limited to top_k items.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">返回类型<span class="colon">:</span></dt>
<dd class="field-odd"><p>List[<a class="reference internal" href="../memoryscope.scheme.html#memoryscope.scheme.MemoryNode" title="memoryscope.scheme.MemoryNode">MemoryNode</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="memoryscope.core.storage.LlamaIndexEsMemoryStore.a_retrieve_memories">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">a_retrieve_memories</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">query</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">top_k</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">3</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filter_dict</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="../memoryscope.scheme.memory_node.html#memoryscope.scheme.memory_node.MemoryNode" title="memoryscope.scheme.memory_node.MemoryNode"><span class="pre">MemoryNode</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/memoryscope/core/storage/llama_index_es_memory_store.html#LlamaIndexEsMemoryStore.a_retrieve_memories"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.core.storage.LlamaIndexEsMemoryStore.a_retrieve_memories" title="Link to this definition"></a></dt>
<dd><p>Asynchronously retrieves a list of MemoryNode objects that best match the query,
respecting a filter dictionary, with the result size capped at top_k.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>query</strong> (<em>str</em>) -- The text to search for in memory nodes.</p></li>
<li><p><strong>top_k</strong> (<em>int</em>) -- Maximum number of nodes to return.</p></li>
<li><p><strong>filter_dict</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>List</em><em>[</em><em>str</em><em>]</em><em>]</em>) -- Filters to apply on memory nodes.</p></li>
</ul>
</dd>
<dt class="field-even">返回<span class="colon">:</span></dt>
<dd class="field-even"><p>A list of up to top_k MemoryNode objects matching the criteria.</p>
</dd>
<dt class="field-odd">返回类型<span class="colon">:</span></dt>
<dd class="field-odd"><p>List[<a class="reference internal" href="../memoryscope.scheme.html#memoryscope.scheme.MemoryNode" title="memoryscope.scheme.MemoryNode">MemoryNode</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="memoryscope.core.storage.LlamaIndexEsMemoryStore.close">
<span class="sig-name descname"><span class="pre">close</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/memoryscope/core/storage/llama_index_es_memory_store.html#LlamaIndexEsMemoryStore.close"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.core.storage.LlamaIndexEsMemoryStore.close" title="Link to this definition"></a></dt>
<dd><p>Closes the Elasticsearch store, releasing any resources associated with it.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="memoryscope.core.storage.ESCombinedRetrieveStrategy">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">memoryscope.core.storage.</span></span><span class="sig-name descname"><span class="pre">ESCombinedRetrieveStrategy</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">distance</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">DistanceMetric</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">DistanceMetric.COSINE</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">retrieve_mode</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'dense'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rrf</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">text_field</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'text_field'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hybrid_alpha</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/memoryscope/core/storage/llama_index_sync_elasticsearch.html#ESCombinedRetrieveStrategy"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.core.storage.ESCombinedRetrieveStrategy" title="Link to this definition"></a></dt>
<dd><dl class="py method">
<dt class="sig sig-object py" id="memoryscope.core.storage.ESCombinedRetrieveStrategy.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">distance</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">DistanceMetric</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">DistanceMetric.COSINE</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">retrieve_mode</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'dense'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rrf</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">text_field</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'text_field'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hybrid_alpha</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/memoryscope/core/storage/llama_index_sync_elasticsearch.html#ESCombinedRetrieveStrategy.__init__"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.core.storage.ESCombinedRetrieveStrategy.__init__" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="memoryscope.core.storage.ESCombinedRetrieveStrategy.es_query">
<span class="sig-name descname"><span class="pre">es_query</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">query</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">query_vector</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">text_field</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vector_field</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">k</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_candidates</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filter</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/memoryscope/core/storage/llama_index_sync_elasticsearch.html#ESCombinedRetrieveStrategy.es_query"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.core.storage.ESCombinedRetrieveStrategy.es_query" title="Link to this definition"></a></dt>
<dd><p>Returns the Elasticsearch query body for the given parameters.
The store will execute the query.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>query</strong> -- The text query. Can be None if query_vector is given.</p></li>
<li><p><strong>k</strong> -- The total number of results to retrieve.</p></li>
<li><p><strong>num_candidates</strong> -- The number of results to fetch initially in knn search.</p></li>
<li><p><strong>filter</strong> -- List of filter clauses to apply to the query.</p></li>
<li><p><strong>query_vector</strong> -- The query vector. Can be None if a query string is given.</p></li>
</ul>
</dd>
<dt class="field-even">返回<span class="colon">:</span></dt>
<dd class="field-even"><p>The Elasticsearch query body.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="memoryscope.core.storage.ESCombinedRetrieveStrategy.before_index_creation">
<span class="sig-name descname"><span class="pre">before_index_creation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">client</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">AsyncElasticsearch</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">text_field</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vector_field</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="../_modules/memoryscope/core/storage/llama_index_sync_elasticsearch.html#ESCombinedRetrieveStrategy.before_index_creation"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.core.storage.ESCombinedRetrieveStrategy.before_index_creation" title="Link to this definition"></a></dt>
<dd><p>Executes before the index is created. Used for setting up
any required Elasticsearch resources like a pipeline.
Defaults to a no-op.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>client</strong> -- The Elasticsearch client.</p></li>
<li><p><strong>text_field</strong> -- The field containing the text data in the index.</p></li>
<li><p><strong>vector_field</strong> -- The field containing the vector representations in the index.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="memoryscope.core.storage.SyncElasticsearchStore">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">memoryscope.core.storage.</span></span><span class="sig-name descname"><span class="pre">SyncElasticsearchStore</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">index_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">es_client</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">es_url</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">es_cloud_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">es_api_key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">es_user</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">es_password</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">text_field</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'content'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vector_field</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'embedding'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">batch_size</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">200</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">distance_strategy</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Literal</span><span class="p"><span class="pre">[</span></span><span class="s"><span class="pre">'COSINE'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'DOT_PRODUCT'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'EUCLIDEAN_DISTANCE'</span></span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'COSINE'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">retrieval_strategy</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">AsyncRetrievalStrategy</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/memoryscope/core/storage/llama_index_sync_elasticsearch.html#SyncElasticsearchStore"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.core.storage.SyncElasticsearchStore" title="Link to this definition"></a></dt>
<dd><p>Elasticsearch vector store.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>index_name</strong> -- Name of the Elasticsearch index.</p></li>
<li><p><strong>es_client</strong> -- Optional. Pre-existing AsyncElasticsearch client.</p></li>
<li><p><strong>es_url</strong> -- Optional. Elasticsearch URL.</p></li>
<li><p><strong>es_cloud_id</strong> -- Optional. Elasticsearch cloud ID.</p></li>
<li><p><strong>es_api_key</strong> -- Optional. Elasticsearch API key.</p></li>
<li><p><strong>es_user</strong> -- Optional. Elasticsearch username.</p></li>
<li><p><strong>es_password</strong> -- Optional. Elasticsearch password.</p></li>
<li><p><strong>text_field</strong> -- Optional. Name of the Elasticsearch field that stores the text.</p></li>
<li><p><strong>vector_field</strong> -- Optional. Name of the Elasticsearch field that stores the
embedding.</p></li>
<li><p><strong>batch_size</strong> -- Optional. Batch size for bulk indexing. Defaults to 200.</p></li>
<li><p><strong>distance_strategy</strong> -- Optional. Distance strategy to use for similarity search.
Defaults to &quot;COSINE&quot;.</p></li>
<li><p><strong>retrieval_strategy</strong> -- Retrieval strategy to use. AsyncBM25Strategy /
AsyncSparseVectorStrategy / AsyncDenseVectorStrategy / AsyncRetrievalStrategy.
Defaults to AsyncDenseVectorStrategy.</p></li>
</ul>
</dd>
<dt class="field-even">抛出<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>ConnectionError</strong> -- If AsyncElasticsearch client cannot connect to Elasticsearch.</p></li>
<li><p><strong>ValueError</strong> -- If neither es_client nor es_url nor es_cloud_id is provided.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">示例</p>
<p><cite>pip install llama-index-vector-stores-elasticsearch</cite></p>
<p><a href="#id6"><span class="problematic" id="id7">``</span></a><a href="#id8"><span class="problematic" id="id9">`</span></a>python
from llama_index.vector_stores import ElasticsearchStore</p>
<p># Additional setup for ElasticsearchStore class
index_name = &quot;my_index&quot;
es_url = &quot;<a class="reference external" href="http://localhost:9200">http://localhost:9200</a>&quot;
es_cloud_id = &quot;&lt;cloud-id&gt;&quot;  # Found within the deployment page
es_user = &quot;elastic&quot;
es_password = &quot;&lt;password&gt;&quot;  # Provided when creating deployment or can be reset
es_api_key = &quot;&lt;api-key&gt;&quot;  # Create an API key within Kibana (Security -&gt; API Keys)</p>
<p># Connecting to ElasticsearchStore locally
es_local = ElasticsearchStore(</p>
<blockquote>
<div><p>index_name=index_name,
es_url=es_url)</p>
</div></blockquote>
<p># Connecting to Elastic Cloud with username and password
es_cloud_user_pass = ElasticsearchStore(</p>
<blockquote>
<div><p>index_name=index_name,
es_cloud_id=es_cloud_id,
es_user=es_user,
es_password=es_password)</p>
</div></blockquote>
<p># Connecting to Elastic Cloud with API Key
es_cloud_api_key = ElasticsearchStore(</p>
<blockquote>
<div><p>index_name=index_name,
es_cloud_id=es_cloud_id,
es_api_key=es_api_key,</p>
</div></blockquote>
<section id="id10">
<h2>)<a class="headerlink" href="#id10" title="Link to this heading"></a></h2>
<dl class="py method">
<dt class="sig sig-object py" id="memoryscope.core.storage.SyncElasticsearchStore.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">index_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">es_client</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">es_url</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">es_cloud_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">es_api_key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">es_user</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">es_password</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">text_field</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'content'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vector_field</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'embedding'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">batch_size</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">200</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">distance_strategy</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Literal</span><span class="p"><span class="pre">[</span></span><span class="s"><span class="pre">'COSINE'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'DOT_PRODUCT'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'EUCLIDEAN_DISTANCE'</span></span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'COSINE'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">retrieval_strategy</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">AsyncRetrievalStrategy</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="../_modules/memoryscope/core/storage/llama_index_sync_elasticsearch.html#SyncElasticsearchStore.__init__"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.core.storage.SyncElasticsearchStore.__init__" title="Link to this definition"></a></dt>
<dd><p>Create a new model by parsing and validating input data from keyword arguments.</p>
<p>Raises ValidationError if the input data cannot be parsed to form a valid model.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="memoryscope.core.storage.SyncElasticsearchStore.client">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">client</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Any</span></em><a class="headerlink" href="#memoryscope.core.storage.SyncElasticsearchStore.client" title="Link to this definition"></a></dt>
<dd><p>Get the asynchronous Elasticsearch client.</p>
<dl class="field-list simple">
<dt class="field-odd">返回<span class="colon">:</span></dt>
<dd class="field-odd"><p>The asynchronous Elasticsearch client instance configured for this store.</p>
</dd>
<dt class="field-even">返回类型<span class="colon">:</span></dt>
<dd class="field-even"><p>Any</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="memoryscope.core.storage.SyncElasticsearchStore.add">
<span class="sig-name descname"><span class="pre">add</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">nodes</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">BaseNode</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">create_index_if_not_exists</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">add_kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/memoryscope/core/storage/llama_index_sync_elasticsearch.html#SyncElasticsearchStore.add"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.core.storage.SyncElasticsearchStore.add" title="Link to this definition"></a></dt>
<dd><p>Adds a list of nodes, each containing embeddings, to an Elasticsearch index.
Optionally creates the index if it does not already exist.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>nodes</strong> (<em>List</em><em>[</em><em>BaseNode</em><em>]</em>) -- A list of node objects, each encapsulating an embedding.</p></li>
<li><p><strong>create_index_if_not_exists</strong> (<em>bool</em><em>, </em><em>optional</em>) -- A flag indicating whether to create the Elasticsearch index if it's not present.
Defaults to True.</p></li>
</ul>
</dd>
<dt class="field-even">返回<span class="colon">:</span></dt>
<dd class="field-even"><p>A list of node IDs that have been successfully added to the index.</p>
</dd>
<dt class="field-odd">返回类型<span class="colon">:</span></dt>
<dd class="field-odd"><p>List[str]</p>
</dd>
<dt class="field-even">抛出<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>ImportError</strong> -- If the 'elasticsearch[async]' Python package is not installed.</p></li>
<li><p><strong>BulkIndexError</strong> -- If there is a failure during the asynchronous bulk indexing with AsyncElasticsearch.</p></li>
</ul>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">备注</p>
<p>This method delegates the actual operation to the <cite>sync_add</cite> method.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="memoryscope.core.storage.SyncElasticsearchStore.sync_add">
<span class="sig-name descname"><span class="pre">sync_add</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">nodes</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">BaseNode</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">create_index_if_not_exists</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">add_kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/memoryscope/core/storage/llama_index_sync_elasticsearch.html#SyncElasticsearchStore.sync_add"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.core.storage.SyncElasticsearchStore.sync_add" title="Link to this definition"></a></dt>
<dd><p>Asynchronously adds a list of nodes, each containing an embedding, to the Elasticsearch index.</p>
<p>This method processes each node to extract its ID, embedding, text content, and metadata,
preparing them for batch insertion into the index. It ensures the index is created if not present
and respects the dimensionality of the embeddings for consistency.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>nodes</strong> (<em>List</em><em>[</em><em>BaseNode</em><em>]</em>) -- A list of node objects, each encapsulating an embedding.</p></li>
<li><p><strong>create_index_if_not_exists</strong> (<em>bool</em><em>, </em><em>optional</em>) -- A flag indicating whether to create the Elasticsearch
index if it does not already exist. Defaults to True.</p></li>
<li><p><strong>**add_kwargs</strong> (<em>Any</em>) -- Additional keyword arguments passed to the underlying add_texts method
for customization during the indexing process.</p></li>
</ul>
</dd>
<dt class="field-even">返回<span class="colon">:</span></dt>
<dd class="field-even"><p>A list of node IDs that were successfully added to the index.</p>
</dd>
<dt class="field-odd">返回类型<span class="colon">:</span></dt>
<dd class="field-odd"><p>List[str]</p>
</dd>
<dt class="field-even">抛出<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>ImportError</strong> -- If the Elasticsearch Python client is not installed.</p></li>
<li><p><strong>BulkIndexError</strong> -- If there's a failure during the asynchronous bulk indexing operation.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="memoryscope.core.storage.SyncElasticsearchStore.delete">
<span class="sig-name descname"><span class="pre">delete</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ref_doc_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">delete_kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="../_modules/memoryscope/core/storage/llama_index_sync_elasticsearch.html#SyncElasticsearchStore.delete"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.core.storage.SyncElasticsearchStore.delete" title="Link to this definition"></a></dt>
<dd><p>Deletes a node from the Elasticsearch index using the provided reference document ID.</p>
<p>Optionally, extra keyword arguments can be supplied to customize the deletion behavior,
which are passed directly to Elasticsearch's <cite>delete_by_query</cite> operation.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ref_doc_id</strong> (<em>str</em>) -- The unique identifier of the node/document to be deleted.</p></li>
<li><p><strong>delete_kwargs</strong> (<em>Any</em>) -- Additional keyword arguments for Elasticsearch's
<cite>delete_by_query</cite>. These might include query filters,
timeouts, or other operational configurations.</p></li>
</ul>
</dd>
<dt class="field-even">抛出<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>Exception</strong> -- If the deletion operation via Elasticsearch's <cite>delete_by_query</cite> fails.</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">备注</p>
<p>This method internally calls a synchronous delete method (<cite>sync_delete</cite>)
to execute the deletion operation against Elasticsearch.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="memoryscope.core.storage.SyncElasticsearchStore.sync_delete">
<span class="sig-name descname"><span class="pre">sync_delete</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ref_doc_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">delete_kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="../_modules/memoryscope/core/storage/llama_index_sync_elasticsearch.html#SyncElasticsearchStore.sync_delete"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.core.storage.SyncElasticsearchStore.sync_delete" title="Link to this definition"></a></dt>
<dd><p>Synchronously deletes a node from the Elasticsearch index based on the reference document ID.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ref_doc_id</strong> (<em>str</em>) -- The unique identifier of the node/document to be deleted.</p></li>
<li><p><strong>delete_kwargs</strong> (<em>Any</em>) -- Optional keyword arguments to be passed
to the delete_by_query operation of AsyncElasticsearch,
allowing for additional customization of the deletion process.</p></li>
</ul>
</dd>
<dt class="field-even">抛出<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>Exception</strong> -- If the deletion operation via AsyncElasticsearch's delete_by_query fails.</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">备注</p>
<p>The function directly uses '_id' field to match the document for deletion instead of 'metadata.ref_doc_id',
ensuring targeted removal based on the document's unique identifier within Elasticsearch.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="memoryscope.core.storage.SyncElasticsearchStore.query">
<span class="sig-name descname"><span class="pre">query</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">query</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">VectorStoreQuery</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">custom_query</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Callable</span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><span class="pre">Dict</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">VectorStoreQuery</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Dict</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">es_filter</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">Dict</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">VectorStoreQueryResult</span></span></span><a class="reference internal" href="../_modules/memoryscope/core/storage/llama_index_sync_elasticsearch.html#SyncElasticsearchStore.query"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.core.storage.SyncElasticsearchStore.query" title="Link to this definition"></a></dt>
<dd><p>Executes a query against the Elasticsearch index to retrieve the top k most similar nodes
based on the input query embedding. Supports customization of the query process and
application of Elasticsearch filters.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>query</strong> (<em>VectorStoreQuery</em>) -- The query containing the embedding and other parameters.</p></li>
<li><p><strong>custom_query</strong> (<em>Callable</em><em>[</em><em>[</em><em>Dict</em><em>, </em><em>Union</em><em>[</em><em>VectorStoreQuery</em><em>, </em><em>None</em><em>]</em><em>]</em><em>, </em><em>Dict</em><em>]</em><em>, </em><em>optional</em>) -- An optional custom function to modify the Elasticsearch query body, allowing for
additional query parameters or logic. Defaults to None.</p></li>
<li><p><strong>es_filter</strong> (<em>Optional</em><em>[</em><em>List</em><em>[</em><em>Dict</em><em>]</em><em>]</em><em>, </em><em>optional</em>) -- An optional Elasticsearch filter list to
apply to the query. If a filter is directly included in the <cite>query</cite>, this argument
will not be used. Defaults to None.</p></li>
<li><p><strong>**kwargs</strong> (<em>Any</em>) -- Additional keyword arguments that might be used in the query process.</p></li>
</ul>
</dd>
<dt class="field-even">返回<span class="colon">:</span></dt>
<dd class="field-even"><p>The result of the query operation, including the most similar nodes.</p>
</dd>
<dt class="field-odd">返回类型<span class="colon">:</span></dt>
<dd class="field-odd"><p>VectorStoreQueryResult</p>
</dd>
<dt class="field-even">抛出<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>Exception</strong> -- If an error occurs during the Elasticsearch query execution.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="memoryscope.core.storage.SyncElasticsearchStore.sync_query">
<span class="sig-name descname"><span class="pre">sync_query</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">query</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">VectorStoreQuery</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">custom_query</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Callable</span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><span class="pre">Dict</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">VectorStoreQuery</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Dict</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">es_filter</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">Dict</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fields</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">[]</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">VectorStoreQueryResult</span></span></span><a class="reference internal" href="../_modules/memoryscope/core/storage/llama_index_sync_elasticsearch.html#SyncElasticsearchStore.sync_query"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.core.storage.SyncElasticsearchStore.sync_query" title="Link to this definition"></a></dt>
<dd><p>Asynchronously queries the Elasticsearch index for the top k most similar nodes
based on the provided query embedding. Supports custom query modifications
and application of Elasticsearch filters.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>query</strong> (<em>VectorStoreQuery</em>) -- The query containing the embedding and other details.</p></li>
<li><p><strong>custom_query</strong> (<em>Callable</em><em>[</em><em>[</em><em>Dict</em><em>, </em><em>Union</em><em>[</em><em>VectorStoreQuery</em><em>, </em><em>None</em><em>]</em><em>]</em><em>, </em><em>Dict</em><em>]</em><em>, </em><em>optional</em>) -- A custom function to modify the Elasticsearch query body. Defaults to None.</p></li>
<li><p><strong>es_filter</strong> (<em>List</em><em>[</em><em>Dict</em><em>]</em><em>, </em><em>optional</em>) -- Additional filters to apply during the query.
If filters are present in the query, these filters will not be used. Defaults to None.</p></li>
<li><p><strong>fields</strong> (<em>List</em><em>[</em><em>str</em><em>]</em><em>, </em><em>optional</em>) -- <p>.</p>
</p></li>
</ul>
</dd>
<dt class="field-even">返回<span class="colon">:</span></dt>
<dd class="field-even"><p><dl class="simple">
<dt>The result of the query, including nodes, their IDs,</dt><dd><p>and similarity scores.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">返回类型<span class="colon">:</span></dt>
<dd class="field-odd"><p>VectorStoreQueryResult</p>
</dd>
<dt class="field-even">抛出<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>Exception</strong> -- If the Elasticsearch query encounters an error.</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">备注</p>
<p>The mode of the query must align with the retrieval strategy set for this store.
In case of legacy metadata, a warning is logged and nodes are constructed accordingly.</p>
</div>
</dd></dl>

</section>
</dd></dl>

</section>
<section id="worker">
<h1>Worker<a class="headerlink" href="#worker" title="Link to this heading"></a></h1>
<section id="module-memoryscope.core.worker">
<span id="base"></span><h2>Base<a class="headerlink" href="#module-memoryscope.core.worker" title="Link to this heading"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="memoryscope.core.worker.BaseWorker">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">memoryscope.core.worker.</span></span><span class="sig-name descname"><span class="pre">BaseWorker</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">name:</span> <span class="pre">str,</span> <span class="pre">context:</span> <span class="pre">~typing.Dict[str,</span> <span class="pre">~typing.Any],</span> <span class="pre">memoryscope_context:</span> <span class="pre">~memoryscope.core.utils.singleton.singleton.&lt;locals&gt;._singleton,</span> <span class="pre">context_lock=None,</span> <span class="pre">raise_exception:</span> <span class="pre">bool</span> <span class="pre">=</span> <span class="pre">True,</span> <span class="pre">is_multi_thread:</span> <span class="pre">bool</span> <span class="pre">=</span> <span class="pre">False,</span> <span class="pre">thread_pool:</span> <span class="pre">~concurrent.futures.thread.ThreadPoolExecutor</span> <span class="pre">|</span> <span class="pre">None</span> <span class="pre">=</span> <span class="pre">None,</span> <span class="pre">**kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/memoryscope/core/worker/base_worker.html#BaseWorker"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.core.worker.BaseWorker" title="Link to this definition"></a></dt>
<dd><p>BaseWorker is an abstract class that defines a worker with common functionalities
for managing tasks and context in both asynchronous and multi-thread environments.</p>
<dl class="py method">
<dt class="sig sig-object py" id="memoryscope.core.worker.BaseWorker.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">name:</span> <span class="pre">str,</span> <span class="pre">context:</span> <span class="pre">~typing.Dict[str,</span> <span class="pre">~typing.Any],</span> <span class="pre">memoryscope_context:</span> <span class="pre">~memoryscope.core.utils.singleton.singleton.&lt;locals&gt;._singleton,</span> <span class="pre">context_lock=None,</span> <span class="pre">raise_exception:</span> <span class="pre">bool</span> <span class="pre">=</span> <span class="pre">True,</span> <span class="pre">is_multi_thread:</span> <span class="pre">bool</span> <span class="pre">=</span> <span class="pre">False,</span> <span class="pre">thread_pool:</span> <span class="pre">~concurrent.futures.thread.ThreadPoolExecutor</span> <span class="pre">|</span> <span class="pre">None</span> <span class="pre">=</span> <span class="pre">None,</span> <span class="pre">**kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/memoryscope/core/worker/base_worker.html#BaseWorker.__init__"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.core.worker.BaseWorker.__init__" title="Link to this definition"></a></dt>
<dd><p>Initializes the BaseWorker with the provided parameters.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<em>str</em>) -- The name of the worker.</p></li>
<li><p><strong>context</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>]</em>) -- Shared context dictionary.</p></li>
<li><p><strong>context_lock</strong> (<em>optional</em>) -- Lock for synchronizing access to the context in multithread mode.</p></li>
<li><p><strong>raise_exception</strong> (<em>bool</em><em>, </em><em>optional</em>) -- Flag to control whether exceptions should be raised.</p></li>
<li><p><strong>is_multi_thread</strong> (<em>bool</em><em>, </em><em>optional</em>) -- Flag indicating if the worker operates in multithread mode.</p></li>
<li><p><strong>thread_pool</strong> (<em>ThreadPoolExecutor</em><em>, </em><em>optional</em>) -- Thread pool executor for managing multithread tasks.</p></li>
<li><p><strong>kwargs</strong> -- Additional keyword arguments.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="memoryscope.core.worker.BaseWorker.submit_async_task">
<span class="sig-name descname"><span class="pre">submit_async_task</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fn</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/memoryscope/core/worker/base_worker.html#BaseWorker.submit_async_task"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.core.worker.BaseWorker.submit_async_task" title="Link to this definition"></a></dt>
<dd><p>Submits an asynchronous task to the worker.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fn</strong> (<em>callable</em>) -- The function to be executed.</p></li>
<li><p><strong>args</strong> -- Positional arguments for the function.</p></li>
<li><p><strong>kwargs</strong> -- Keyword arguments for the function.</p></li>
</ul>
</dd>
<dt class="field-even">抛出<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>RuntimeError</strong> -- If called in multithread mode.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="memoryscope.core.worker.BaseWorker.gather_async_result">
<span class="sig-name descname"><span class="pre">gather_async_result</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/memoryscope/core/worker/base_worker.html#BaseWorker.gather_async_result"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.core.worker.BaseWorker.gather_async_result" title="Link to this definition"></a></dt>
<dd><p>Executes all asynchronous tasks and gathers their results.</p>
<dl class="field-list simple">
<dt class="field-odd">返回<span class="colon">:</span></dt>
<dd class="field-odd"><p>A list of results from the asynchronous tasks.</p>
</dd>
<dt class="field-even">抛出<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>RuntimeError</strong> -- If called in multithread mode.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="memoryscope.core.worker.BaseWorker.submit_thread_task">
<span class="sig-name descname"><span class="pre">submit_thread_task</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fn</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/memoryscope/core/worker/base_worker.html#BaseWorker.submit_thread_task"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.core.worker.BaseWorker.submit_thread_task" title="Link to this definition"></a></dt>
<dd><p>Submits a task to be executed in a separate thread.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fn</strong> (<em>callable</em>) -- The function to be executed.</p></li>
<li><p><strong>args</strong> -- Positional arguments for the function.</p></li>
<li><p><strong>kwargs</strong> -- Keyword arguments for the function.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="memoryscope.core.worker.BaseWorker.gather_thread_result">
<span class="sig-name descname"><span class="pre">gather_thread_result</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/memoryscope/core/worker/base_worker.html#BaseWorker.gather_thread_result"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.core.worker.BaseWorker.gather_thread_result" title="Link to this definition"></a></dt>
<dd><p>Gathers results of all submitted multithread tasks.</p>
<dl class="field-list simple">
<dt class="field-odd">生成器<span class="colon">:</span></dt>
<dd class="field-odd"><p>The result of each completed task.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="memoryscope.core.worker.BaseWorker.run">
<span class="sig-name descname"><span class="pre">run</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/memoryscope/core/worker/base_worker.html#BaseWorker.run"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.core.worker.BaseWorker.run" title="Link to this definition"></a></dt>
<dd><p>Executes the worker's main logic and manages execution flow and exception handling.</p>
<p>Uses a Timer to log the execution time of the worker.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="memoryscope.core.worker.BaseWorker.get_workflow_context">
<span class="sig-name descname"><span class="pre">get_workflow_context</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/memoryscope/core/worker/base_worker.html#BaseWorker.get_workflow_context"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.core.worker.BaseWorker.get_workflow_context" title="Link to this definition"></a></dt>
<dd><p>Retrieves a value from the shared context.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>key</strong> (<em>str</em>) -- The key for the context value.</p></li>
<li><p><strong>default</strong> (<em>optional</em>) -- Default value if the key is not found.</p></li>
</ul>
</dd>
<dt class="field-even">返回<span class="colon">:</span></dt>
<dd class="field-even"><p>The value from the context or the default value.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="memoryscope.core.worker.BaseWorker.set_workflow_context">
<span class="sig-name descname"><span class="pre">set_workflow_context</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/memoryscope/core/worker/base_worker.html#BaseWorker.set_workflow_context"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.core.worker.BaseWorker.set_workflow_context" title="Link to this definition"></a></dt>
<dd><p>Sets a value in the shared context.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>key</strong> (<em>str</em>) -- The key for the context value.</p></li>
<li><p><strong>value</strong> (<em>Any</em>) -- The value to be set.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="memoryscope.core.worker.BaseWorker.has_content">
<span class="sig-name descname"><span class="pre">has_content</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/memoryscope/core/worker/base_worker.html#BaseWorker.has_content"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.core.worker.BaseWorker.has_content" title="Link to this definition"></a></dt>
<dd><p>Checks if the context contains a specific key.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>key</strong> (<em>str</em>) -- The key to check in the context.</p>
</dd>
<dt class="field-even">返回<span class="colon">:</span></dt>
<dd class="field-even"><p>True if the key is in the context, otherwise False.</p>
</dd>
<dt class="field-odd">返回类型<span class="colon">:</span></dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="memoryscope.core.worker.DummyWorker">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">memoryscope.core.worker.</span></span><span class="sig-name descname"><span class="pre">DummyWorker</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">embedding_model</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">generation_model</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rank_model</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/memoryscope/core/worker/dummy_worker.html#DummyWorker"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.core.worker.DummyWorker" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="memoryscope.core.worker.MemoryBaseWorker">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">memoryscope.core.worker.</span></span><span class="sig-name descname"><span class="pre">MemoryBaseWorker</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">embedding_model</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">generation_model</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rank_model</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/memoryscope/core/worker/memory_base_worker.html#MemoryBaseWorker"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.core.worker.MemoryBaseWorker" title="Link to this definition"></a></dt>
<dd><dl class="py method">
<dt class="sig sig-object py" id="memoryscope.core.worker.MemoryBaseWorker.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">embedding_model</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">generation_model</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rank_model</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/memoryscope/core/worker/memory_base_worker.html#MemoryBaseWorker.__init__"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.core.worker.MemoryBaseWorker.__init__" title="Link to this definition"></a></dt>
<dd><p>Initializes the MemoryBaseWorker with specified models and configurations.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>embedding_model</strong> (<em>str</em>) -- Identifier or instance of the embedding model used for transforming text.</p></li>
<li><p><strong>generation_model</strong> (<em>str</em>) -- Identifier or instance of the text generation model.</p></li>
<li><p><strong>rank_model</strong> (<em>str</em>) -- Identifier or instance of the ranking model for sorting the retrieved memories
wrt. the semantic similarities.</p></li>
<li><p><strong>**kwargs</strong> -- Additional keyword arguments passed to the parent class initializer.</p></li>
</ul>
</dd>
</dl>
<p>The constructor also initializes key attributes related to memory store, monitoring,
user and target identification, and a prompt handler, setting them up for later use.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="memoryscope.core.worker.MemoryBaseWorker.chat_messages">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">chat_messages</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="../memoryscope.scheme.message.html#memoryscope.scheme.message.Message" title="memoryscope.scheme.message.Message"><span class="pre">Message</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#memoryscope.core.worker.MemoryBaseWorker.chat_messages" title="Link to this definition"></a></dt>
<dd><p>Property to get the chat messages.</p>
<dl class="field-list simple">
<dt class="field-odd">返回<span class="colon">:</span></dt>
<dd class="field-odd"><p>List of chat messages.</p>
</dd>
<dt class="field-even">返回类型<span class="colon">:</span></dt>
<dd class="field-even"><p>List[<a class="reference internal" href="../memoryscope.scheme.html#memoryscope.scheme.Message" title="memoryscope.scheme.Message">Message</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="memoryscope.core.worker.MemoryBaseWorker.chat_messages_scatter">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">chat_messages_scatter</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="../memoryscope.scheme.message.html#memoryscope.scheme.message.Message" title="memoryscope.scheme.message.Message"><span class="pre">Message</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#memoryscope.core.worker.MemoryBaseWorker.chat_messages_scatter" title="Link to this definition"></a></dt>
<dd><p>Property to get the chat messages.</p>
<dl class="field-list simple">
<dt class="field-odd">返回<span class="colon">:</span></dt>
<dd class="field-odd"><p>List of chat messages.</p>
</dd>
<dt class="field-even">返回类型<span class="colon">:</span></dt>
<dd class="field-even"><p>List[<a class="reference internal" href="../memoryscope.scheme.html#memoryscope.scheme.Message" title="memoryscope.scheme.Message">Message</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="memoryscope.core.worker.MemoryBaseWorker.chat_kwargs">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">chat_kwargs</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#memoryscope.core.worker.MemoryBaseWorker.chat_kwargs" title="Link to this definition"></a></dt>
<dd><p>Retrieves the chat keyword arguments from the context.</p>
<p>This property getter fetches the chat-related parameters stored in the context,
which are used to configure how chat interactions are handled.</p>
<dl class="field-list simple">
<dt class="field-odd">返回<span class="colon">:</span></dt>
<dd class="field-odd"><p>A dictionary containing the chat keyword arguments.</p>
</dd>
<dt class="field-even">返回类型<span class="colon">:</span></dt>
<dd class="field-even"><p>Dict[str, str]</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="memoryscope.core.worker.MemoryBaseWorker.embedding_model">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">embedding_model</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="../memoryscope.core.models.base_model.html#memoryscope.core.models.base_model.BaseModel" title="memoryscope.core.models.base_model.BaseModel"><span class="pre">BaseModel</span></a></em><a class="headerlink" href="#memoryscope.core.worker.MemoryBaseWorker.embedding_model" title="Link to this definition"></a></dt>
<dd><p>Property to get the embedding model. If the model is currently stored as a string,
it will be replaced with the actual model instance from the global context's model dictionary.</p>
<dl class="field-list simple">
<dt class="field-odd">返回<span class="colon">:</span></dt>
<dd class="field-odd"><p>The embedding model used for converting text into vector representations.</p>
</dd>
<dt class="field-even">返回类型<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="../memoryscope.core.models.html#memoryscope.core.models.BaseModel" title="memoryscope.core.models.BaseModel">BaseModel</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="memoryscope.core.worker.MemoryBaseWorker.generation_model">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">generation_model</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="../memoryscope.core.models.base_model.html#memoryscope.core.models.base_model.BaseModel" title="memoryscope.core.models.base_model.BaseModel"><span class="pre">BaseModel</span></a></em><a class="headerlink" href="#memoryscope.core.worker.MemoryBaseWorker.generation_model" title="Link to this definition"></a></dt>
<dd><p>Property to access the generation model. If the model is stored as a string,
it retrieves the actual model instance from the global context's model dictionary.</p>
<dl class="field-list simple">
<dt class="field-odd">返回<span class="colon">:</span></dt>
<dd class="field-odd"><p>The model used for text generation.</p>
</dd>
<dt class="field-even">返回类型<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="../memoryscope.core.models.html#memoryscope.core.models.BaseModel" title="memoryscope.core.models.BaseModel">BaseModel</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="memoryscope.core.worker.MemoryBaseWorker.rank_model">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">rank_model</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="../memoryscope.core.models.base_model.html#memoryscope.core.models.base_model.BaseModel" title="memoryscope.core.models.base_model.BaseModel"><span class="pre">BaseModel</span></a></em><a class="headerlink" href="#memoryscope.core.worker.MemoryBaseWorker.rank_model" title="Link to this definition"></a></dt>
<dd><p>Property to access the rank model. If the stored rank model is a string, it fetches the actual model instance
from the global context's model dictionary before returning it.</p>
<dl class="field-list simple">
<dt class="field-odd">返回<span class="colon">:</span></dt>
<dd class="field-odd"><p>The rank model instance used for ranking tasks.</p>
</dd>
<dt class="field-even">返回类型<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="../memoryscope.core.models.html#memoryscope.core.models.BaseModel" title="memoryscope.core.models.BaseModel">BaseModel</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="memoryscope.core.worker.MemoryBaseWorker.memory_store">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">memory_store</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="../memoryscope.core.storage.base_memory_store.html#memoryscope.core.storage.base_memory_store.BaseMemoryStore" title="memoryscope.core.storage.base_memory_store.BaseMemoryStore"><span class="pre">BaseMemoryStore</span></a></em><a class="headerlink" href="#memoryscope.core.worker.MemoryBaseWorker.memory_store" title="Link to this definition"></a></dt>
<dd><p>Property to access the memory vector store. If not initialized, it fetches
the global memory store.</p>
<dl class="field-list simple">
<dt class="field-odd">返回<span class="colon">:</span></dt>
<dd class="field-odd"><p>The memory store instance used for inserting, updating, retrieving and deleting operations.</p>
</dd>
<dt class="field-even">返回类型<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="../memoryscope.core.storage.html#memoryscope.core.storage.BaseMemoryStore" title="memoryscope.core.storage.BaseMemoryStore">BaseMemoryStore</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="memoryscope.core.worker.MemoryBaseWorker.monitor">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">monitor</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="../memoryscope.core.storage.base_monitor.html#memoryscope.core.storage.base_monitor.BaseMonitor" title="memoryscope.core.storage.base_monitor.BaseMonitor"><span class="pre">BaseMonitor</span></a></em><a class="headerlink" href="#memoryscope.core.worker.MemoryBaseWorker.monitor" title="Link to this definition"></a></dt>
<dd><p>Property to access the monitoring component. If not initialized, it fetches
the global monitor.</p>
<dl class="field-list simple">
<dt class="field-odd">返回<span class="colon">:</span></dt>
<dd class="field-odd"><p>The monitoring component instance.</p>
</dd>
<dt class="field-even">返回类型<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="../memoryscope.core.storage.html#memoryscope.core.storage.BaseMonitor" title="memoryscope.core.storage.BaseMonitor">BaseMonitor</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="memoryscope.core.worker.MemoryBaseWorker.prompt_handler">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">prompt_handler</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="../memoryscope.core.utils.prompt_handler.html#memoryscope.core.utils.prompt_handler.PromptHandler" title="memoryscope.core.utils.prompt_handler.PromptHandler"><span class="pre">PromptHandler</span></a></em><a class="headerlink" href="#memoryscope.core.worker.MemoryBaseWorker.prompt_handler" title="Link to this definition"></a></dt>
<dd><p>Lazily initializes and returns the PromptHandler instance.</p>
<dl class="field-list simple">
<dt class="field-odd">返回<span class="colon">:</span></dt>
<dd class="field-odd"><p>An instance of PromptHandler initialized with specific file path and keyword arguments.</p>
</dd>
<dt class="field-even">返回类型<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="../memoryscope.core.utils.html#memoryscope.core.utils.PromptHandler" title="memoryscope.core.utils.PromptHandler">PromptHandler</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="memoryscope.core.worker.MemoryBaseWorker.memory_manager">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">memory_manager</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="../memoryscope.core.worker.memory_manager.html#memoryscope.core.worker.memory_manager.MemoryManager" title="memoryscope.core.worker.memory_manager.MemoryManager"><span class="pre">MemoryManager</span></a></em><a class="headerlink" href="#memoryscope.core.worker.MemoryBaseWorker.memory_manager" title="Link to this definition"></a></dt>
<dd><p>Lazily initializes and returns the MemoryHandler instance.</p>
<dl class="field-list simple">
<dt class="field-odd">返回<span class="colon">:</span></dt>
<dd class="field-odd"><p>An instance of MemoryHandler.</p>
</dd>
<dt class="field-even">返回类型<span class="colon">:</span></dt>
<dd class="field-even"><p>MemoryHandler</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="memoryscope.core.worker.MemoryBaseWorker.get_language_value">
<span class="sig-name descname"><span class="pre">get_language_value</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">languages</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">dict</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Any</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/memoryscope/core/worker/memory_base_worker.html#MemoryBaseWorker.get_language_value"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.core.worker.MemoryBaseWorker.get_language_value" title="Link to this definition"></a></dt>
<dd><p>Retrieves the value(s) corresponding to the current language context.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>languages</strong> (<em>dict</em><em> | </em><em>list</em><em>[</em><em>dict</em><em>]</em>) -- A dictionary or list of dictionaries containing language-keyed values.</p>
</dd>
<dt class="field-even">返回<span class="colon">:</span></dt>
<dd class="field-even"><p>The value or list of values matching the current language setting.</p>
</dd>
<dt class="field-odd">返回类型<span class="colon">:</span></dt>
<dd class="field-odd"><p>Any | list[Any]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="memoryscope.core.worker.MemoryBaseWorker.prompt_to_msg">
<span class="sig-name descname"><span class="pre">prompt_to_msg</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">system_prompt</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">few_shot</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">user_query</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">concat_system_prompt</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="../memoryscope.scheme.message.html#memoryscope.scheme.message.Message" title="memoryscope.scheme.message.Message"><span class="pre">Message</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/memoryscope/core/worker/memory_base_worker.html#MemoryBaseWorker.prompt_to_msg"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.core.worker.MemoryBaseWorker.prompt_to_msg" title="Link to this definition"></a></dt>
<dd><p>Converts input strings into a structured list of message objects suitable for AI interactions.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>system_prompt</strong> (<em>str</em>) -- The system-level instruction or context.</p></li>
<li><p><strong>few_shot</strong> (<em>str</em>) -- An example or demonstration input, often used for illustrating expected behavior.</p></li>
<li><p><strong>user_query</strong> (<em>str</em>) -- The actual user query or prompt to be processed.</p></li>
<li><p><strong>concat_system_prompt</strong> (<em>bool</em>) -- Concat system prompt again or not in the user message.
A simple method to improve the effectiveness for some LLMs. Defaults to True.</p></li>
</ul>
</dd>
<dt class="field-even">返回<span class="colon">:</span></dt>
<dd class="field-even"><p>A list of Message objects, each representing a part of the conversation setup.</p>
</dd>
<dt class="field-odd">返回类型<span class="colon">:</span></dt>
<dd class="field-odd"><p>List[<a class="reference internal" href="../memoryscope.scheme.html#memoryscope.scheme.Message" title="memoryscope.scheme.Message">Message</a>]</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="memoryscope.core.worker.MemoryManager">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">memoryscope.core.worker.</span></span><span class="sig-name descname"><span class="pre">MemoryManager</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">memoryscope_context:</span> <span class="pre">~memoryscope.core.utils.singleton.singleton.&lt;locals&gt;._singleton</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">workerflow_name:</span> <span class="pre">str</span> <span class="pre">=</span> <span class="pre">'default_worker'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/memoryscope/core/worker/memory_manager.html#MemoryManager"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.core.worker.MemoryManager" title="Link to this definition"></a></dt>
<dd><p>The <cite>MemoryHandler</cite> class manages memory nodes with memory store.</p>
<dl class="py method">
<dt class="sig sig-object py" id="memoryscope.core.worker.MemoryManager.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">memoryscope_context:</span> <span class="pre">~memoryscope.core.utils.singleton.singleton.&lt;locals&gt;._singleton</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">workerflow_name:</span> <span class="pre">str</span> <span class="pre">=</span> <span class="pre">'default_worker'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/memoryscope/core/worker/memory_manager.html#MemoryManager.__init__"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.core.worker.MemoryManager.__init__" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="memoryscope.core.worker.MemoryManager.memory_store">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">memory_store</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="../memoryscope.core.storage.base_memory_store.html#memoryscope.core.storage.base_memory_store.BaseMemoryStore" title="memoryscope.core.storage.base_memory_store.BaseMemoryStore"><span class="pre">BaseMemoryStore</span></a></em><a class="headerlink" href="#memoryscope.core.worker.MemoryManager.memory_store" title="Link to this definition"></a></dt>
<dd><p>Property to access the memory store. If not initialized, it fetches the memory store from the global context.</p>
<dl class="field-list simple">
<dt class="field-odd">返回<span class="colon">:</span></dt>
<dd class="field-odd"><p>The memory store instance associated with this worker.</p>
</dd>
<dt class="field-even">返回类型<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="../memoryscope.core.storage.html#memoryscope.core.storage.BaseMemoryStore" title="memoryscope.core.storage.BaseMemoryStore">BaseMemoryStore</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="memoryscope.core.worker.MemoryManager.clear">
<span class="sig-name descname"><span class="pre">clear</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/memoryscope/core/worker/memory_manager.html#MemoryManager.clear"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.core.worker.MemoryManager.clear" title="Link to this definition"></a></dt>
<dd><p>Clear all memory nodes cached, reset the class instance.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="memoryscope.core.worker.MemoryManager.add_memories">
<span class="sig-name descname"><span class="pre">add_memories</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nodes</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="../memoryscope.scheme.memory_node.html#memoryscope.scheme.memory_node.MemoryNode" title="memoryscope.scheme.memory_node.MemoryNode"><span class="pre">MemoryNode</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="../memoryscope.scheme.memory_node.html#memoryscope.scheme.memory_node.MemoryNode" title="memoryscope.scheme.memory_node.MemoryNode"><span class="pre">MemoryNode</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">log_repeat</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/memoryscope/core/worker/memory_manager.html#MemoryManager.add_memories"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.core.worker.MemoryManager.add_memories" title="Link to this definition"></a></dt>
<dd><p>Add the memories.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>key</strong> (<em>str</em>) -- The key mapping to memory nodes.</p></li>
<li><p><strong>nodes</strong> (<em>List</em><em>[</em><a class="reference internal" href="../memoryscope.scheme.html#memoryscope.scheme.MemoryNode" title="memoryscope.scheme.MemoryNode"><em>MemoryNode</em></a><em>]</em>) -- A single memory node or a list of memory nodes to be updated.</p></li>
<li><p><strong>log_repeat</strong> (<em>bool</em>) -- Log duplicated memory node or not.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="memoryscope.core.worker.MemoryManager.set_memories">
<span class="sig-name descname"><span class="pre">set_memories</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nodes</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="../memoryscope.scheme.memory_node.html#memoryscope.scheme.memory_node.MemoryNode" title="memoryscope.scheme.memory_node.MemoryNode"><span class="pre">MemoryNode</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="../memoryscope.scheme.memory_node.html#memoryscope.scheme.memory_node.MemoryNode" title="memoryscope.scheme.memory_node.MemoryNode"><span class="pre">MemoryNode</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">log_repeat</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/memoryscope/core/worker/memory_manager.html#MemoryManager.set_memories"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.core.worker.MemoryManager.set_memories" title="Link to this definition"></a></dt>
<dd><p>Add the memories into '_id_memory_dict' and '_key_id_dict'.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>key</strong> (<em>str</em>) -- The key mapping to memory nodes.</p></li>
<li><p><strong>nodes</strong> (<em>List</em><em>[</em><a class="reference internal" href="../memoryscope.scheme.html#memoryscope.scheme.MemoryNode" title="memoryscope.scheme.MemoryNode"><em>MemoryNode</em></a><em>]</em>) -- A single memory node or a list of memory nodes to be updated.</p></li>
<li><p><strong>log_repeat</strong> -- if log_repeat=True, print log info</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="memoryscope.core.worker.MemoryManager.get_memories">
<span class="sig-name descname"><span class="pre">get_memories</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">keys</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="../memoryscope.scheme.memory_node.html#memoryscope.scheme.memory_node.MemoryNode" title="memoryscope.scheme.memory_node.MemoryNode"><span class="pre">MemoryNode</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/memoryscope/core/worker/memory_manager.html#MemoryManager.get_memories"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.core.worker.MemoryManager.get_memories" title="Link to this definition"></a></dt>
<dd><p>Fetch the memories by keys.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>keys</strong> (<em>str</em><em> | </em><em>List</em><em>[</em><em>str</em><em>]</em>) -- The key mapping to memory nodes.</p>
</dd>
<dt class="field-even">返回<span class="colon">:</span></dt>
<dd class="field-even"><p>Memories mapped to the key.</p>
</dd>
<dt class="field-odd">返回类型<span class="colon">:</span></dt>
<dd class="field-odd"><p>List[<a class="reference internal" href="../memoryscope.scheme.html#memoryscope.scheme.MemoryNode" title="memoryscope.scheme.MemoryNode">MemoryNode</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="memoryscope.core.worker.MemoryManager.delete_memories">
<span class="sig-name descname"><span class="pre">delete_memories</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">nodes</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="../memoryscope.scheme.memory_node.html#memoryscope.scheme.memory_node.MemoryNode" title="memoryscope.scheme.memory_node.MemoryNode"><span class="pre">MemoryNode</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="../memoryscope.scheme.memory_node.html#memoryscope.scheme.memory_node.MemoryNode" title="memoryscope.scheme.memory_node.MemoryNode"><span class="pre">MemoryNode</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/memoryscope/core/worker/memory_manager.html#MemoryManager.delete_memories"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.core.worker.MemoryManager.delete_memories" title="Link to this definition"></a></dt>
<dd><p>Delete the memories.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>key</strong> (<em>str</em>) -- The key mapping to memory nodes.</p></li>
<li><p><strong>nodes</strong> (<em>List</em><em>[</em><a class="reference internal" href="../memoryscope.scheme.html#memoryscope.scheme.MemoryNode" title="memoryscope.scheme.MemoryNode"><em>MemoryNode</em></a><em>]</em>) -- A single memory node or a list of memory nodes to be deleted.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="memoryscope.core.worker.MemoryManager.update_memories">
<span class="sig-name descname"><span class="pre">update_memories</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">keys</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nodes</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="../memoryscope.scheme.memory_node.html#memoryscope.scheme.memory_node.MemoryNode" title="memoryscope.scheme.memory_node.MemoryNode"><span class="pre">MemoryNode</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="../memoryscope.scheme.memory_node.html#memoryscope.scheme.memory_node.MemoryNode" title="memoryscope.scheme.memory_node.MemoryNode"><span class="pre">MemoryNode</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">dict</span></span></span><a class="reference internal" href="../_modules/memoryscope/core/worker/memory_manager.html#MemoryManager.update_memories"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.core.worker.MemoryManager.update_memories" title="Link to this definition"></a></dt>
<dd><p>Update the memories.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>keys</strong> (<em>str</em>) -- The memories.</p></li>
<li><p><strong>nodes</strong> (<em>List</em><em>[</em><a class="reference internal" href="../memoryscope.scheme.html#memoryscope.scheme.MemoryNode" title="memoryscope.scheme.MemoryNode"><em>MemoryNode</em></a><em>]</em>) -- A single memory node or a list of memory nodes to be updated.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="module-memoryscope.core.worker.frontend">
<span id="frontend"></span><h2>Frontend<a class="headerlink" href="#module-memoryscope.core.worker.frontend" title="Link to this heading"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="memoryscope.core.worker.frontend.ExtractTimeWorker">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">memoryscope.core.worker.frontend.</span></span><span class="sig-name descname"><span class="pre">ExtractTimeWorker</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">embedding_model</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">generation_model</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rank_model</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/memoryscope/core/worker/frontend/extract_time_worker.html#ExtractTimeWorker"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.core.worker.frontend.ExtractTimeWorker" title="Link to this definition"></a></dt>
<dd><p>A specialized worker class designed to identify and extract time-related information
from text generated by an LLM, translating date-time keywords based on the set language,
and storing this extracted data within a shared context.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="memoryscope.core.worker.frontend.FuseRerankWorker">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">memoryscope.core.worker.frontend.</span></span><span class="sig-name descname"><span class="pre">FuseRerankWorker</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">embedding_model</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">generation_model</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rank_model</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/memoryscope/core/worker/frontend/fuse_rerank_worker.html#FuseRerankWorker"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.core.worker.frontend.FuseRerankWorker" title="Link to this definition"></a></dt>
<dd><p>Reranks the memory nodes by scores, types, and temporal relevance. Formats the top-K reranked nodes to print.</p>
<dl class="py method">
<dt class="sig sig-object py" id="memoryscope.core.worker.frontend.FuseRerankWorker.match_node_time">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">match_node_time</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">extract_time_dict</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">node</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="../memoryscope.scheme.memory_node.html#memoryscope.scheme.memory_node.MemoryNode" title="memoryscope.scheme.memory_node.MemoryNode"><span class="pre">MemoryNode</span></a></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/memoryscope/core/worker/frontend/fuse_rerank_worker.html#FuseRerankWorker.match_node_time"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.core.worker.frontend.FuseRerankWorker.match_node_time" title="Link to this definition"></a></dt>
<dd><p>Determines whether the node is relevant.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="memoryscope.core.worker.frontend.PrintMemoryWorker">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">memoryscope.core.worker.frontend.</span></span><span class="sig-name descname"><span class="pre">PrintMemoryWorker</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">embedding_model</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">generation_model</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rank_model</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/memoryscope/core/worker/frontend/print_memory_worker.html#PrintMemoryWorker"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.core.worker.frontend.PrintMemoryWorker" title="Link to this definition"></a></dt>
<dd><p>Formats the memories to print.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="memoryscope.core.worker.frontend.ReadMessageWorker">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">memoryscope.core.worker.frontend.</span></span><span class="sig-name descname"><span class="pre">ReadMessageWorker</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">embedding_model</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">generation_model</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rank_model</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/memoryscope/core/worker/frontend/read_message_worker.html#ReadMessageWorker"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.core.worker.frontend.ReadMessageWorker" title="Link to this definition"></a></dt>
<dd><p>Fetches unmemorized chat messages.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="memoryscope.core.worker.frontend.RetrieveMemoryWorker">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">memoryscope.core.worker.frontend.</span></span><span class="sig-name descname"><span class="pre">RetrieveMemoryWorker</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">embedding_model</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">generation_model</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rank_model</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/memoryscope/core/worker/frontend/retrieve_memory_worker.html#RetrieveMemoryWorker"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.core.worker.frontend.RetrieveMemoryWorker" title="Link to this definition"></a></dt>
<dd><p>Retrieves memories based on specified criteria such as status, type, and timestamp.
Processes these memories concurrently, sorts them by similarity, and logs the activity,
facilitating efficient memory retrieval operations within a given scope.</p>
<dl class="py method">
<dt class="sig sig-object py" id="memoryscope.core.worker.frontend.RetrieveMemoryWorker.retrieve_from_observation">
<span class="sig-name descname"><span class="pre">retrieve_from_observation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#memoryscope.core.worker.frontend.RetrieveMemoryWorker.retrieve_from_observation" title="Link to this definition"></a></dt>
<dd><p>The wrapper function that manages the timing of the original function.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>*args</strong> -- Variable length argument list for the decorated function.</p></li>
<li><p><strong>**kwargs</strong> -- Arbitrary keyword arguments for the decorated function.</p></li>
</ul>
</dd>
<dt class="field-even">返回<span class="colon">:</span></dt>
<dd class="field-even"><p>The result of the decorated function.</p>
</dd>
<dt class="field-odd">返回类型<span class="colon">:</span></dt>
<dd class="field-odd"><p>Any</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="memoryscope.core.worker.frontend.RetrieveMemoryWorker.retrieve_from_insight">
<span class="sig-name descname"><span class="pre">retrieve_from_insight</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#memoryscope.core.worker.frontend.RetrieveMemoryWorker.retrieve_from_insight" title="Link to this definition"></a></dt>
<dd><p>The wrapper function that manages the timing of the original function.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>*args</strong> -- Variable length argument list for the decorated function.</p></li>
<li><p><strong>**kwargs</strong> -- Arbitrary keyword arguments for the decorated function.</p></li>
</ul>
</dd>
<dt class="field-even">返回<span class="colon">:</span></dt>
<dd class="field-even"><p>The result of the decorated function.</p>
</dd>
<dt class="field-odd">返回类型<span class="colon">:</span></dt>
<dd class="field-odd"><p>Any</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="memoryscope.core.worker.frontend.RetrieveMemoryWorker.retrieve_expired_memory">
<span class="sig-name descname"><span class="pre">retrieve_expired_memory</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#memoryscope.core.worker.frontend.RetrieveMemoryWorker.retrieve_expired_memory" title="Link to this definition"></a></dt>
<dd><p>The wrapper function that manages the timing of the original function.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>*args</strong> -- Variable length argument list for the decorated function.</p></li>
<li><p><strong>**kwargs</strong> -- Arbitrary keyword arguments for the decorated function.</p></li>
</ul>
</dd>
<dt class="field-even">返回<span class="colon">:</span></dt>
<dd class="field-even"><p>The result of the decorated function.</p>
</dd>
<dt class="field-odd">返回类型<span class="colon">:</span></dt>
<dd class="field-odd"><p>Any</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="memoryscope.core.worker.frontend.SemanticRankWorker">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">memoryscope.core.worker.frontend.</span></span><span class="sig-name descname"><span class="pre">SemanticRankWorker</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">embedding_model</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">generation_model</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rank_model</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/memoryscope/core/worker/frontend/semantic_rank_worker.html#SemanticRankWorker"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.core.worker.frontend.SemanticRankWorker" title="Link to this definition"></a></dt>
<dd><p>The <cite>SemanticRankWorker</cite> class processes queries by retrieving memory nodes,
removing duplicates, ranking them based on semantic relevance using a model,
assigning scores, sorting the nodes, and storing the ranked nodes back,
while logging relevant information.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="memoryscope.core.worker.frontend.SetQueryWorker">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">memoryscope.core.worker.frontend.</span></span><span class="sig-name descname"><span class="pre">SetQueryWorker</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">embedding_model</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">generation_model</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rank_model</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/memoryscope/core/worker/frontend/set_query_worker.html#SetQueryWorker"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.core.worker.frontend.SetQueryWorker" title="Link to this definition"></a></dt>
<dd><p>The <cite>SetQueryWorker</cite> class is responsible for setting a query and its associated timestamp
into the context, utilizing either provided chat parameters or details from the most recent
chat message.</p>
</dd></dl>

</section>
<section id="module-memoryscope.core.worker.backend">
<span id="backend"></span><h2>Backend<a class="headerlink" href="#module-memoryscope.core.worker.backend" title="Link to this heading"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="memoryscope.core.worker.backend.ContraRepeatWorker">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">memoryscope.core.worker.backend.</span></span><span class="sig-name descname"><span class="pre">ContraRepeatWorker</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">embedding_model</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">generation_model</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rank_model</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/memoryscope/core/worker/backend/contra_repeat_worker.html#ContraRepeatWorker"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.core.worker.backend.ContraRepeatWorker" title="Link to this definition"></a></dt>
<dd><p>The <cite>ContraRepeatWorker</cite> class specializes in processing memory nodes to identify and handle
contradictory and repetitive information. It extends the base functionality of <cite>MemoryBaseWorker</cite>.</p>
<p>Responsibilities:
- Collects observation nodes from various memory categories.
- Constructs a prompt with these observations for language model analysis.
- Parses the model's response to detect contradictions or redundancies.
- Adjusts the status of memory nodes based on the analysis.
- Persists the updated node statuses back into memory.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="memoryscope.core.worker.backend.GetObservationWithTimeWorker">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">memoryscope.core.worker.backend.</span></span><span class="sig-name descname"><span class="pre">GetObservationWithTimeWorker</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">embedding_model</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">generation_model</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rank_model</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/memoryscope/core/worker/backend/get_observation_with_time_worker.html#GetObservationWithTimeWorker"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.core.worker.backend.GetObservationWithTimeWorker" title="Link to this definition"></a></dt>
<dd><p>A specialized worker class that extends GetObservationWorker functionality to handle
retrieval of observations which include associated timestamp information from chat messages.</p>
<dl class="py method">
<dt class="sig sig-object py" id="memoryscope.core.worker.backend.GetObservationWithTimeWorker.filter_messages">
<span class="sig-name descname"><span class="pre">filter_messages</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="../memoryscope.scheme.message.html#memoryscope.scheme.message.Message" title="memoryscope.scheme.message.Message"><span class="pre">Message</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/memoryscope/core/worker/backend/get_observation_with_time_worker.html#GetObservationWithTimeWorker.filter_messages"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.core.worker.backend.GetObservationWithTimeWorker.filter_messages" title="Link to this definition"></a></dt>
<dd><p>Filters the chat messages to only include those which contain time-related keywords.</p>
<dl class="field-list simple">
<dt class="field-odd">返回<span class="colon">:</span></dt>
<dd class="field-odd"><p>A list of filtered messages that mention time.</p>
</dd>
<dt class="field-even">返回类型<span class="colon">:</span></dt>
<dd class="field-even"><p>List[<a class="reference internal" href="../memoryscope.scheme.html#memoryscope.scheme.Message" title="memoryscope.scheme.Message">Message</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="memoryscope.core.worker.backend.GetObservationWithTimeWorker.build_message">
<span class="sig-name descname"><span class="pre">build_message</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filter_messages</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="../memoryscope.scheme.message.html#memoryscope.scheme.message.Message" title="memoryscope.scheme.message.Message"><span class="pre">Message</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="../memoryscope.scheme.message.html#memoryscope.scheme.message.Message" title="memoryscope.scheme.message.Message"><span class="pre">Message</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/memoryscope/core/worker/backend/get_observation_with_time_worker.html#GetObservationWithTimeWorker.build_message"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.core.worker.backend.GetObservationWithTimeWorker.build_message" title="Link to this definition"></a></dt>
<dd><dl class="simple">
<dt>Constructs a prompt message for obtaining observations with timestamp information</dt><dd><p>based on filtered chat messages.</p>
</dd>
</dl>
<p>This method processes each filtered message with the timestamp information.
It then organizes these timestamped messages into a structured prompt that includes a system prompt,
few-shot examples, and the concatenated user queries.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>filter_messages</strong> (<em>List</em><em>[</em><a class="reference internal" href="../memoryscope.scheme.html#memoryscope.scheme.Message" title="memoryscope.scheme.Message"><em>Message</em></a><em>]</em>) -- A list of Message objects that have been filtered for processing.</p>
</dd>
<dt class="field-even">返回<span class="colon">:</span></dt>
<dd class="field-even"><p>A list containing the newly constructed Message object for further interaction.</p>
</dd>
<dt class="field-odd">返回类型<span class="colon">:</span></dt>
<dd class="field-odd"><p>List[<a class="reference internal" href="../memoryscope.scheme.html#memoryscope.scheme.Message" title="memoryscope.scheme.Message">Message</a>]</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="memoryscope.core.worker.backend.GetObservationWorker">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">memoryscope.core.worker.backend.</span></span><span class="sig-name descname"><span class="pre">GetObservationWorker</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">embedding_model</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">generation_model</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rank_model</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/memoryscope/core/worker/backend/get_observation_worker.html#GetObservationWorker"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.core.worker.backend.GetObservationWorker" title="Link to this definition"></a></dt>
<dd><p>A specialized worker class to generate the observations from the original chat histories.</p>
<dl class="py method">
<dt class="sig sig-object py" id="memoryscope.core.worker.backend.GetObservationWorker.add_observation">
<span class="sig-name descname"><span class="pre">add_observation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">message</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="../memoryscope.scheme.message.html#memoryscope.scheme.message.Message" title="memoryscope.scheme.message.Message"><span class="pre">Message</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">time_infer</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">obs_content</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keywords</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/memoryscope/core/worker/backend/get_observation_worker.html#GetObservationWorker.add_observation"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.core.worker.backend.GetObservationWorker.add_observation" title="Link to this definition"></a></dt>
<dd><p>Builds a MemoryNode containing the observation details.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>message</strong> (<a class="reference internal" href="../memoryscope.scheme.html#memoryscope.scheme.Message" title="memoryscope.scheme.Message"><em>Message</em></a>) -- The source message from which the observation is derived.</p></li>
<li><p><strong>time_infer</strong> (<em>str</em>) -- The inferred time if available.</p></li>
<li><p><strong>obs_content</strong> (<em>str</em>) -- The content of the observation.</p></li>
<li><p><strong>keywords</strong> (<em>str</em>) -- Keywords associated with the observation.</p></li>
</ul>
</dd>
<dt class="field-even">返回<span class="colon">:</span></dt>
<dd class="field-even"><p>The constructed MemoryNode containing the observation.</p>
</dd>
<dt class="field-odd">返回类型<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="../memoryscope.scheme.html#memoryscope.scheme.MemoryNode" title="memoryscope.scheme.MemoryNode">MemoryNode</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="memoryscope.core.worker.backend.GetObservationWorker.filter_messages">
<span class="sig-name descname"><span class="pre">filter_messages</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="../memoryscope.scheme.message.html#memoryscope.scheme.message.Message" title="memoryscope.scheme.message.Message"><span class="pre">Message</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/memoryscope/core/worker/backend/get_observation_worker.html#GetObservationWorker.filter_messages"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.core.worker.backend.GetObservationWorker.filter_messages" title="Link to this definition"></a></dt>
<dd><p>Filters the chat messages to only include those which not contain time-related keywords.</p>
<dl class="field-list simple">
<dt class="field-odd">返回<span class="colon">:</span></dt>
<dd class="field-odd"><p>A list of filtered messages that mention time.</p>
</dd>
<dt class="field-even">返回类型<span class="colon">:</span></dt>
<dd class="field-even"><p>List[<a class="reference internal" href="../memoryscope.scheme.html#memoryscope.scheme.Message" title="memoryscope.scheme.Message">Message</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="memoryscope.core.worker.backend.GetObservationWorker.build_message">
<span class="sig-name descname"><span class="pre">build_message</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filter_messages</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="../memoryscope.scheme.message.html#memoryscope.scheme.message.Message" title="memoryscope.scheme.message.Message"><span class="pre">Message</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="../memoryscope.scheme.message.html#memoryscope.scheme.message.Message" title="memoryscope.scheme.message.Message"><span class="pre">Message</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/memoryscope/core/worker/backend/get_observation_worker.html#GetObservationWorker.build_message"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.core.worker.backend.GetObservationWorker.build_message" title="Link to this definition"></a></dt>
<dd><p>Constructs a formatted message for observation based on input messages, incorporating system prompts,
few-shot examples, and user queries.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>filter_messages</strong> (<em>List</em><em>[</em><a class="reference internal" href="../memoryscope.scheme.html#memoryscope.scheme.Message" title="memoryscope.scheme.Message"><em>Message</em></a><em>]</em>) -- A list of messages filtered for observation processing.</p>
</dd>
<dt class="field-even">返回<span class="colon">:</span></dt>
<dd class="field-even"><p>A list containing the constructed message ready for observation.</p>
</dd>
<dt class="field-odd">返回类型<span class="colon">:</span></dt>
<dd class="field-odd"><p>List[<a class="reference internal" href="../memoryscope.scheme.html#memoryscope.scheme.Message" title="memoryscope.scheme.Message">Message</a>]</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="memoryscope.core.worker.backend.GetReflectionSubjectWorker">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">memoryscope.core.worker.backend.</span></span><span class="sig-name descname"><span class="pre">GetReflectionSubjectWorker</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">embedding_model</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">generation_model</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rank_model</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/memoryscope/core/worker/backend/get_reflection_subject_worker.html#GetReflectionSubjectWorker"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.core.worker.backend.GetReflectionSubjectWorker" title="Link to this definition"></a></dt>
<dd><p>A specialized worker class responsible for retrieving unreflected memory nodes,
generating reflection prompts with current insights, invoking an LLM for fresh insights,
parsing the LLM responses, forming new insight nodes, and updating memory statuses accordingly.</p>
<dl class="py method">
<dt class="sig sig-object py" id="memoryscope.core.worker.backend.GetReflectionSubjectWorker.new_insight_node">
<span class="sig-name descname"><span class="pre">new_insight_node</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">insight_key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="../memoryscope.scheme.memory_node.html#memoryscope.scheme.memory_node.MemoryNode" title="memoryscope.scheme.memory_node.MemoryNode"><span class="pre">MemoryNode</span></a></span></span><a class="reference internal" href="../_modules/memoryscope/core/worker/backend/get_reflection_subject_worker.html#GetReflectionSubjectWorker.new_insight_node"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.core.worker.backend.GetReflectionSubjectWorker.new_insight_node" title="Link to this definition"></a></dt>
<dd><p>Creates a new MemoryNode for an insight with the given key, enriched with current datetime metadata.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>insight_key</strong> (<em>str</em>) -- The unique identifier for the insight.</p>
</dd>
<dt class="field-even">返回<span class="colon">:</span></dt>
<dd class="field-even"><p>A new MemoryNode instance representing the insight, marked as new and of type INSIGHT.</p>
</dd>
<dt class="field-odd">返回类型<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="../memoryscope.scheme.html#memoryscope.scheme.MemoryNode" title="memoryscope.scheme.MemoryNode">MemoryNode</a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="memoryscope.core.worker.backend.InfoFilterWorker">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">memoryscope.core.worker.backend.</span></span><span class="sig-name descname"><span class="pre">InfoFilterWorker</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">embedding_model</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">generation_model</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rank_model</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/memoryscope/core/worker/backend/info_filter_worker.html#InfoFilterWorker"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.core.worker.backend.InfoFilterWorker" title="Link to this definition"></a></dt>
<dd><p>This worker filters and modifies the chat message history (<cite>self.chat_messages</cite>) by retaining only the messages
that include significant information. It then constructs a prompt from these filtered messages, utilizes an AI
model to process this prompt, parses the AI's generated response to allocate scores, and ultimately retains
messages in <cite>self.chat_messages</cite> based on these assigned scores.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="memoryscope.core.worker.backend.LoadMemoryWorker">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">memoryscope.core.worker.backend.</span></span><span class="sig-name descname"><span class="pre">LoadMemoryWorker</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">embedding_model</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">generation_model</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rank_model</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/memoryscope/core/worker/backend/load_memory_worker.html#LoadMemoryWorker"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.core.worker.backend.LoadMemoryWorker" title="Link to this definition"></a></dt>
<dd><dl class="py method">
<dt class="sig sig-object py" id="memoryscope.core.worker.backend.LoadMemoryWorker.retrieve_not_reflected_memory">
<span class="sig-name descname"><span class="pre">retrieve_not_reflected_memory</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#memoryscope.core.worker.backend.LoadMemoryWorker.retrieve_not_reflected_memory" title="Link to this definition"></a></dt>
<dd><p>The wrapper function that manages the timing of the original function.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>*args</strong> -- Variable length argument list for the decorated function.</p></li>
<li><p><strong>**kwargs</strong> -- Arbitrary keyword arguments for the decorated function.</p></li>
</ul>
</dd>
<dt class="field-even">返回<span class="colon">:</span></dt>
<dd class="field-even"><p>The result of the decorated function.</p>
</dd>
<dt class="field-odd">返回类型<span class="colon">:</span></dt>
<dd class="field-odd"><p>Any</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="memoryscope.core.worker.backend.LoadMemoryWorker.retrieve_not_updated_memory">
<span class="sig-name descname"><span class="pre">retrieve_not_updated_memory</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#memoryscope.core.worker.backend.LoadMemoryWorker.retrieve_not_updated_memory" title="Link to this definition"></a></dt>
<dd><p>The wrapper function that manages the timing of the original function.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>*args</strong> -- Variable length argument list for the decorated function.</p></li>
<li><p><strong>**kwargs</strong> -- Arbitrary keyword arguments for the decorated function.</p></li>
</ul>
</dd>
<dt class="field-even">返回<span class="colon">:</span></dt>
<dd class="field-even"><p>The result of the decorated function.</p>
</dd>
<dt class="field-odd">返回类型<span class="colon">:</span></dt>
<dd class="field-odd"><p>Any</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="memoryscope.core.worker.backend.LoadMemoryWorker.retrieve_insight_memory">
<span class="sig-name descname"><span class="pre">retrieve_insight_memory</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#memoryscope.core.worker.backend.LoadMemoryWorker.retrieve_insight_memory" title="Link to this definition"></a></dt>
<dd><p>The wrapper function that manages the timing of the original function.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>*args</strong> -- Variable length argument list for the decorated function.</p></li>
<li><p><strong>**kwargs</strong> -- Arbitrary keyword arguments for the decorated function.</p></li>
</ul>
</dd>
<dt class="field-even">返回<span class="colon">:</span></dt>
<dd class="field-even"><p>The result of the decorated function.</p>
</dd>
<dt class="field-odd">返回类型<span class="colon">:</span></dt>
<dd class="field-odd"><p>Any</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="memoryscope.core.worker.backend.LoadMemoryWorker.retrieve_today_memory">
<span class="sig-name descname"><span class="pre">retrieve_today_memory</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#memoryscope.core.worker.backend.LoadMemoryWorker.retrieve_today_memory" title="Link to this definition"></a></dt>
<dd><p>The wrapper function that manages the timing of the original function.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>*args</strong> -- Variable length argument list for the decorated function.</p></li>
<li><p><strong>**kwargs</strong> -- Arbitrary keyword arguments for the decorated function.</p></li>
</ul>
</dd>
<dt class="field-even">返回<span class="colon">:</span></dt>
<dd class="field-even"><p>The result of the decorated function.</p>
</dd>
<dt class="field-odd">返回类型<span class="colon">:</span></dt>
<dd class="field-odd"><p>Any</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="memoryscope.core.worker.backend.LongContraRepeatWorker">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">memoryscope.core.worker.backend.</span></span><span class="sig-name descname"><span class="pre">LongContraRepeatWorker</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">embedding_model</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">generation_model</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rank_model</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/memoryscope/core/worker/backend/long_contra_repeat_worker.html#LongContraRepeatWorker"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.core.worker.backend.LongContraRepeatWorker" title="Link to this definition"></a></dt>
<dd><p>Manages and updates memory entries within a conversation scope by identifying
and handling contradictions or redundancies. It extends the base MemoryBaseWorker
to provide specialized functionality for long conversations with potential
contradictory or repetitive statements.</p>
<dl class="py method">
<dt class="sig sig-object py" id="memoryscope.core.worker.backend.LongContraRepeatWorker.retrieve_similar_content">
<span class="sig-name descname"><span class="pre">retrieve_similar_content</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">node:</span> <span class="pre">~memoryscope.scheme.memory_node.MemoryNode)</span> <span class="pre">-&gt;</span> <span class="pre">(&lt;class</span> <span class="pre">'memoryscope.scheme.memory_node.MemoryNode'&gt;,</span> <span class="pre">typing.List[memoryscope.scheme.memory_node.MemoryNode]</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/memoryscope/core/worker/backend/long_contra_repeat_worker.html#LongContraRepeatWorker.retrieve_similar_content"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.core.worker.backend.LongContraRepeatWorker.retrieve_similar_content" title="Link to this definition"></a></dt>
<dd><p>Retrieves memory nodes with content similar to the given node, filtering by user/target/status/memory_type.
Only returns nodes whose similarity score meets or exceeds the predefined threshold.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>node</strong> (<a class="reference internal" href="../memoryscope.scheme.html#memoryscope.scheme.MemoryNode" title="memoryscope.scheme.MemoryNode"><em>MemoryNode</em></a>) -- The reference node used to find similar content in memory.</p>
</dd>
<dt class="field-even">返回<span class="colon">:</span></dt>
<dd class="field-even"><p>A tuple containing the original node and a list of similar nodes
that passed the similarity threshold.</p>
</dd>
<dt class="field-odd">返回类型<span class="colon">:</span></dt>
<dd class="field-odd"><p>Tuple[<a class="reference internal" href="../memoryscope.scheme.html#memoryscope.scheme.MemoryNode" title="memoryscope.scheme.MemoryNode">MemoryNode</a>, List[<a class="reference internal" href="../memoryscope.scheme.html#memoryscope.scheme.MemoryNode" title="memoryscope.scheme.MemoryNode">MemoryNode</a>]]</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="memoryscope.core.worker.backend.UpdateInsightWorker">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">memoryscope.core.worker.backend.</span></span><span class="sig-name descname"><span class="pre">UpdateInsightWorker</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">embedding_model</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">generation_model</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rank_model</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/memoryscope/core/worker/backend/update_insight_worker.html#UpdateInsightWorker"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.core.worker.backend.UpdateInsightWorker" title="Link to this definition"></a></dt>
<dd><p>This class is responsible for updating insight value in a memory system. It filters insight nodes
based on their association with observed nodes, utilizes a ranking model to prioritize them,
generates refreshed insights via an LLM, and manages node statuses and content updates,
incorporating features for concurrent execution and logging.</p>
<dl class="py method">
<dt class="sig sig-object py" id="memoryscope.core.worker.backend.UpdateInsightWorker.filter_obs_nodes">
<span class="sig-name descname"><span class="pre">filter_obs_nodes</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">insight_node:</span> <span class="pre">~memoryscope.scheme.memory_node.MemoryNode,</span> <span class="pre">obs_nodes:</span> <span class="pre">~typing.List[~memoryscope.scheme.memory_node.MemoryNode])</span> <span class="pre">-&gt;</span> <span class="pre">(&lt;class</span> <span class="pre">'memoryscope.scheme.memory_node.MemoryNode'&gt;,</span> <span class="pre">typing.List[memoryscope.scheme.memory_node.MemoryNode],</span> <span class="pre">&lt;class</span> <span class="pre">'float'&gt;</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/memoryscope/core/worker/backend/update_insight_worker.html#UpdateInsightWorker.filter_obs_nodes"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.core.worker.backend.UpdateInsightWorker.filter_obs_nodes" title="Link to this definition"></a></dt>
<dd><p>Filters observed nodes based on their relevance to a given insight node using a ranking model.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>insight_node</strong> (<a class="reference internal" href="../memoryscope.scheme.html#memoryscope.scheme.MemoryNode" title="memoryscope.scheme.MemoryNode"><em>MemoryNode</em></a>) -- The insight node used as the basis for filtering.</p></li>
<li><p><strong>obs_nodes</strong> (<em>List</em><em>[</em><a class="reference internal" href="../memoryscope.scheme.html#memoryscope.scheme.MemoryNode" title="memoryscope.scheme.MemoryNode"><em>MemoryNode</em></a><em>]</em>) -- A list of observed nodes to be filtered.</p></li>
</ul>
</dd>
<dt class="field-even">返回<span class="colon">:</span></dt>
<dd class="field-even"><p><dl class="simple">
<dt>A tuple containing:</dt><dd><ul class="simple">
<li><p>The original insight node.</p></li>
<li><p>A list of filtered observed nodes that are relevant to the insight node.</p></li>
<li><p>The maximum relevance score among the filtered nodes.</p></li>
</ul>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">返回类型<span class="colon">:</span></dt>
<dd class="field-odd"><p>tuple</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="memoryscope.core.worker.backend.UpdateInsightWorker.update_insight_node">
<span class="sig-name descname"><span class="pre">update_insight_node</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">insight_node</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="../memoryscope.scheme.memory_node.html#memoryscope.scheme.memory_node.MemoryNode" title="memoryscope.scheme.memory_node.MemoryNode"><span class="pre">MemoryNode</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">insight_value</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/memoryscope/core/worker/backend/update_insight_worker.html#UpdateInsightWorker.update_insight_node"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.core.worker.backend.UpdateInsightWorker.update_insight_node" title="Link to this definition"></a></dt>
<dd><p>Updates the MemoryNode with the new insight value.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>insight_node</strong> (<a class="reference internal" href="../memoryscope.scheme.html#memoryscope.scheme.MemoryNode" title="memoryscope.scheme.MemoryNode"><em>MemoryNode</em></a>) -- The MemoryNode whose insight value needs to be updated.</p></li>
<li><p><strong>insight_value</strong> (<em>str</em>) -- The new insight value.</p></li>
</ul>
</dd>
<dt class="field-even">返回<span class="colon">:</span></dt>
<dd class="field-even"><p>The updated MemoryNode with potentially revised insight value.</p>
</dd>
<dt class="field-odd">返回类型<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="../memoryscope.scheme.html#memoryscope.scheme.MemoryNode" title="memoryscope.scheme.MemoryNode">MemoryNode</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="memoryscope.core.worker.backend.UpdateInsightWorker.update_insight">
<span class="sig-name descname"><span class="pre">update_insight</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">insight_node</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="../memoryscope.scheme.memory_node.html#memoryscope.scheme.memory_node.MemoryNode" title="memoryscope.scheme.memory_node.MemoryNode"><span class="pre">MemoryNode</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">filtered_nodes</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="../memoryscope.scheme.memory_node.html#memoryscope.scheme.memory_node.MemoryNode" title="memoryscope.scheme.memory_node.MemoryNode"><span class="pre">MemoryNode</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="../memoryscope.scheme.memory_node.html#memoryscope.scheme.memory_node.MemoryNode" title="memoryscope.scheme.memory_node.MemoryNode"><span class="pre">MemoryNode</span></a></span></span><a class="reference internal" href="../_modules/memoryscope/core/worker/backend/update_insight_worker.html#UpdateInsightWorker.update_insight"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.core.worker.backend.UpdateInsightWorker.update_insight" title="Link to this definition"></a></dt>
<dd><p>Updates the insight value of a given MemoryNode based on the context from a list of filtered MemoryNodes.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>insight_node</strong> (<a class="reference internal" href="../memoryscope.scheme.html#memoryscope.scheme.MemoryNode" title="memoryscope.scheme.MemoryNode"><em>MemoryNode</em></a>) -- The MemoryNode whose insight value needs to be updated.</p></li>
<li><p><strong>filtered_nodes</strong> (<em>List</em><em>[</em><a class="reference internal" href="../memoryscope.scheme.html#memoryscope.scheme.MemoryNode" title="memoryscope.scheme.MemoryNode"><em>MemoryNode</em></a><em>]</em>) -- A list of MemoryNodes used as context for updating the insight.</p></li>
</ul>
</dd>
<dt class="field-even">返回<span class="colon">:</span></dt>
<dd class="field-even"><p>The updated MemoryNode with potentially revised insight value.</p>
</dd>
<dt class="field-odd">返回类型<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="../memoryscope.scheme.html#memoryscope.scheme.MemoryNode" title="memoryscope.scheme.MemoryNode">MemoryNode</a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="memoryscope.core.worker.backend.UpdateMemoryWorker">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">memoryscope.core.worker.backend.</span></span><span class="sig-name descname"><span class="pre">UpdateMemoryWorker</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">embedding_model</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">generation_model</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rank_model</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/memoryscope/core/worker/backend/update_memory_worker.html#UpdateMemoryWorker"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.core.worker.backend.UpdateMemoryWorker" title="Link to this definition"></a></dt>
<dd><dl class="py method">
<dt class="sig sig-object py" id="memoryscope.core.worker.backend.UpdateMemoryWorker.from_query">
<span class="sig-name descname"><span class="pre">from_query</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/memoryscope/core/worker/backend/update_memory_worker.html#UpdateMemoryWorker.from_query"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.core.worker.backend.UpdateMemoryWorker.from_query" title="Link to this definition"></a></dt>
<dd><p>Creates a MemoryNode from the provided query if present in chat_kwargs.</p>
<dl class="field-list simple">
<dt class="field-odd">返回<span class="colon">:</span></dt>
<dd class="field-odd"><p>A list containing a single MemoryNode created from the query.</p>
</dd>
<dt class="field-even">返回类型<span class="colon">:</span></dt>
<dd class="field-even"><p>List[<a class="reference internal" href="../memoryscope.scheme.html#memoryscope.scheme.MemoryNode" title="memoryscope.scheme.MemoryNode">MemoryNode</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="memoryscope.core.worker.backend.UpdateMemoryWorker.from_memory_key">
<span class="sig-name descname"><span class="pre">from_memory_key</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/memoryscope/core/worker/backend/update_memory_worker.html#UpdateMemoryWorker.from_memory_key"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.core.worker.backend.UpdateMemoryWorker.from_memory_key" title="Link to this definition"></a></dt>
<dd><p>Retrieves memories based on the memory key if it exists.</p>
<dl class="field-list simple">
<dt class="field-odd">返回<span class="colon">:</span></dt>
<dd class="field-odd"><p>A list of MemoryNode objects retrieved using the memory key.</p>
</dd>
<dt class="field-even">返回类型<span class="colon">:</span></dt>
<dd class="field-even"><p>List[<a class="reference internal" href="../memoryscope.scheme.html#memoryscope.scheme.MemoryNode" title="memoryscope.scheme.MemoryNode">MemoryNode</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="memoryscope.core.worker.backend.UpdateMemoryWorker.delete_all">
<span class="sig-name descname"><span class="pre">delete_all</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/memoryscope/core/worker/backend/update_memory_worker.html#UpdateMemoryWorker.delete_all"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.core.worker.backend.UpdateMemoryWorker.delete_all" title="Link to this definition"></a></dt>
<dd><p>Marks all memories for deletion by setting their action_status to 'DELETE'.</p>
<dl class="field-list simple">
<dt class="field-odd">返回<span class="colon">:</span></dt>
<dd class="field-odd"><p>A list of all MemoryNode objects marked for deletion.</p>
</dd>
<dt class="field-even">返回类型<span class="colon">:</span></dt>
<dd class="field-even"><p>List[<a class="reference internal" href="../memoryscope.scheme.html#memoryscope.scheme.MemoryNode" title="memoryscope.scheme.MemoryNode">MemoryNode</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="memoryscope.core.worker.backend.UpdateMemoryWorker.delete_memory">
<span class="sig-name descname"><span class="pre">delete_memory</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/memoryscope/core/worker/backend/update_memory_worker.html#UpdateMemoryWorker.delete_memory"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.core.worker.backend.UpdateMemoryWorker.delete_memory" title="Link to this definition"></a></dt>
<dd><p>Marks specific memories for deletion based on query or memory_id present in chat_kwargs.</p>
<dl class="field-list simple">
<dt class="field-odd">返回<span class="colon">:</span></dt>
<dd class="field-odd"><p>A list of MemoryNode objects marked for deletion based on the query or memory_id.</p>
</dd>
<dt class="field-even">返回类型<span class="colon">:</span></dt>
<dd class="field-even"><p>List[<a class="reference internal" href="../memoryscope.scheme.html#memoryscope.scheme.MemoryNode" title="memoryscope.scheme.MemoryNode">MemoryNode</a>]</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
</section>
<section id="module-memoryscope.core.operation">
<span id="operation"></span><h1>Operation<a class="headerlink" href="#module-memoryscope.core.operation" title="Link to this heading"></a></h1>
<dl class="py class">
<dt class="sig sig-object py" id="memoryscope.core.operation.BackendOperation">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">memoryscope.core.operation.</span></span><span class="sig-name descname"><span class="pre">BackendOperation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">interval_time</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/memoryscope/core/operation/backend_operation.html#BackendOperation"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.core.operation.BackendOperation" title="Link to this definition"></a></dt>
<dd><p>BaseBackendOperation serves as an abstract base class for defining backend operations.
It manages operation status, loop control, and integrates with a global context for thread management.</p>
<dl class="py method">
<dt class="sig sig-object py" id="memoryscope.core.operation.BackendOperation.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">interval_time</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/memoryscope/core/operation/backend_operation.html#BackendOperation.__init__"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.core.operation.BackendOperation.__init__" title="Link to this definition"></a></dt>
<dd><p>Initializes a new instance of the BaseOperation.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="memoryscope.core.operation.BackendOperation.init_workflow">
<span class="sig-name descname"><span class="pre">init_workflow</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/memoryscope/core/operation/backend_operation.html#BackendOperation.init_workflow"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.core.operation.BackendOperation.init_workflow" title="Link to this definition"></a></dt>
<dd><p>Initializes the workflow by setting up workers with provided keyword arguments.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>**kwargs</strong> -- Arbitrary keyword arguments to be passed during worker initialization.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="memoryscope.core.operation.BackendOperation.start_operation_backend">
<span class="sig-name descname"><span class="pre">start_operation_backend</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/memoryscope/core/operation/backend_operation.html#BackendOperation.start_operation_backend"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.core.operation.BackendOperation.start_operation_backend" title="Link to this definition"></a></dt>
<dd><p>Initiates the background operation loop if it's not already running.
Sets the _loop_switch to True and submits the _loop_operation to a thread from the global thread pool.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="memoryscope.core.operation.BackendOperation.stop_operation_backend">
<span class="sig-name descname"><span class="pre">stop_operation_backend</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">wait_operation</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/memoryscope/core/operation/backend_operation.html#BackendOperation.stop_operation_backend"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.core.operation.BackendOperation.stop_operation_backend" title="Link to this definition"></a></dt>
<dd><p>Stops the background operation loop by setting the _loop_switch to False.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="memoryscope.core.operation.BaseOperation">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">memoryscope.core.operation.</span></span><span class="sig-name descname"><span class="pre">BaseOperation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">user_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target_names</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">chat_messages</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="../memoryscope.scheme.message.html#memoryscope.scheme.message.Message" title="memoryscope.scheme.message.Message"><span class="pre">Message</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">description</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/memoryscope/core/operation/base_operation.html#BaseOperation"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.core.operation.BaseOperation" title="Link to this definition"></a></dt>
<dd><p>An abstract base class representing an operation that can be categorized as either frontend or backend.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="memoryscope.core.operation.BaseOperation.operation_type">
<span class="sig-name descname"><span class="pre">operation_type</span></span><a class="headerlink" href="#memoryscope.core.operation.BaseOperation.operation_type" title="Link to this definition"></a></dt>
<dd><p>Specifies the type of operation, defaulting to &quot;frontend&quot;.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>OPERATION_TYPE</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="memoryscope.core.operation.BaseOperation.name">
<span class="sig-name descname"><span class="pre">name</span></span><a class="headerlink" href="#memoryscope.core.operation.BaseOperation.name" title="Link to this definition"></a></dt>
<dd><p>The name of the operation.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="memoryscope.core.operation.BaseOperation.description">
<span class="sig-name descname"><span class="pre">description</span></span><a class="headerlink" href="#memoryscope.core.operation.BaseOperation.description" title="Link to this definition"></a></dt>
<dd><p>A description of the operation.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="memoryscope.core.operation.BaseOperation.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">user_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target_names</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">chat_messages</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="../memoryscope.scheme.message.html#memoryscope.scheme.message.Message" title="memoryscope.scheme.message.Message"><span class="pre">Message</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">description</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/memoryscope/core/operation/base_operation.html#BaseOperation.__init__"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.core.operation.BaseOperation.__init__" title="Link to this definition"></a></dt>
<dd><p>Initializes a new instance of the BaseOperation.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="memoryscope.core.operation.BaseOperation.init_workflow">
<span class="sig-name descname"><span class="pre">init_workflow</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/memoryscope/core/operation/base_operation.html#BaseOperation.init_workflow"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.core.operation.BaseOperation.init_workflow" title="Link to this definition"></a></dt>
<dd><p>Initialize the workflow with additional keyword arguments if needed.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>**kwargs</strong> -- Additional parameters for initializing the workflow.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="memoryscope.core.operation.BaseOperation.run_operation">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">run_operation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">target_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/memoryscope/core/operation/base_operation.html#BaseOperation.run_operation"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.core.operation.BaseOperation.run_operation" title="Link to this definition"></a></dt>
<dd><p>Abstract method to define the operation to be run.
Subclasses must implement this method.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>target_name</strong> (<em>str</em>) -- target_name(human name).</p></li>
<li><p><strong>**kwargs</strong> -- Keyword arguments for running the operation.</p></li>
</ul>
</dd>
<dt class="field-even">抛出<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>NotImplementedError</strong> -- If the subclass does not implement this method.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="memoryscope.core.operation.BaseOperation.start_operation_backend">
<span class="sig-name descname"><span class="pre">start_operation_backend</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/memoryscope/core/operation/base_operation.html#BaseOperation.start_operation_backend"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.core.operation.BaseOperation.start_operation_backend" title="Link to this definition"></a></dt>
<dd><p>Placeholder method for running an operation specific to the backend.
Intended to be overridden by subclasses if backend operations are required.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="memoryscope.core.operation.BaseOperation.stop_operation_backend">
<span class="sig-name descname"><span class="pre">stop_operation_backend</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">wait_operation</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/memoryscope/core/operation/base_operation.html#BaseOperation.stop_operation_backend"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.core.operation.BaseOperation.stop_operation_backend" title="Link to this definition"></a></dt>
<dd><p>Placeholder method to stop any ongoing backend operations.
Should be implemented in subclasses where backend operations are managed.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="memoryscope.core.operation.ConsolidateMemoryOp">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">memoryscope.core.operation.</span></span><span class="sig-name descname"><span class="pre">ConsolidateMemoryOp</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">message_lock</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">contextual_msg_min_count</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/memoryscope/core/operation/consolidate_memory_op.html#ConsolidateMemoryOp"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.core.operation.ConsolidateMemoryOp" title="Link to this definition"></a></dt>
<dd><dl class="py method">
<dt class="sig sig-object py" id="memoryscope.core.operation.ConsolidateMemoryOp.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">message_lock</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">contextual_msg_min_count</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/memoryscope/core/operation/consolidate_memory_op.html#ConsolidateMemoryOp.__init__"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.core.operation.ConsolidateMemoryOp.__init__" title="Link to this definition"></a></dt>
<dd><p>Initializes a new instance of the BaseOperation.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="memoryscope.core.operation.ConsolidateMemoryOp.run_operation">
<span class="sig-name descname"><span class="pre">run_operation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">target_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/memoryscope/core/operation/consolidate_memory_op.html#ConsolidateMemoryOp.run_operation"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.core.operation.ConsolidateMemoryOp.run_operation" title="Link to this definition"></a></dt>
<dd><p>Executes an operation after preparing the chat context, checking message memory status,
and updating workflow status accordingly.</p>
<p>If the number of not-memorized messages is less than the contextual message count,
the operation is skipped. Otherwise, it sets up the chat context, runs the workflow,
captures the result, and updates the memory status.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>target_name</strong> (<em>str</em>) -- target_name(human name).</p></li>
<li><p><strong>**kwargs</strong> -- Keyword arguments for chat operation configuration.</p></li>
</ul>
</dd>
<dt class="field-even">返回<span class="colon">:</span></dt>
<dd class="field-even"><p>The result obtained from running the workflow.</p>
</dd>
<dt class="field-odd">返回类型<span class="colon">:</span></dt>
<dd class="field-odd"><p>Any</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="memoryscope.core.operation.FrontendOperation">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">memoryscope.core.operation.</span></span><span class="sig-name descname"><span class="pre">FrontendOperation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">user_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target_names</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">chat_messages</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="../memoryscope.scheme.message.html#memoryscope.scheme.message.Message" title="memoryscope.scheme.message.Message"><span class="pre">Message</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">description</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/memoryscope/core/operation/frontend_operation.html#FrontendOperation"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.core.operation.FrontendOperation" title="Link to this definition"></a></dt>
<dd><dl class="py method">
<dt class="sig sig-object py" id="memoryscope.core.operation.FrontendOperation.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">user_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target_names</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">chat_messages</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="../memoryscope.scheme.message.html#memoryscope.scheme.message.Message" title="memoryscope.scheme.message.Message"><span class="pre">Message</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">description</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/memoryscope/core/operation/frontend_operation.html#FrontendOperation.__init__"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.core.operation.FrontendOperation.__init__" title="Link to this definition"></a></dt>
<dd><p>Initializes a new instance of the BaseOperation.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="memoryscope.core.operation.FrontendOperation.init_workflow">
<span class="sig-name descname"><span class="pre">init_workflow</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/memoryscope/core/operation/frontend_operation.html#FrontendOperation.init_workflow"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.core.operation.FrontendOperation.init_workflow" title="Link to this definition"></a></dt>
<dd><p>Initializes the workflow by setting up workers with provided keyword arguments.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>**kwargs</strong> -- Arbitrary keyword arguments to be passed during worker initialization.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="memoryscope.core.operation.FrontendOperation.run_operation">
<span class="sig-name descname"><span class="pre">run_operation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">target_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/memoryscope/core/operation/frontend_operation.html#FrontendOperation.run_operation"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.core.operation.FrontendOperation.run_operation" title="Link to this definition"></a></dt>
<dd><p>Executes the main operation of reading recent chat messages, initializing workflow,
and returning the result of the workflow execution.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>target_name</strong> (<em>str</em>) -- target_name(human name).</p></li>
<li><p><strong>**kwargs</strong> -- Additional keyword arguments used in the operation context.</p></li>
</ul>
</dd>
<dt class="field-even">返回<span class="colon">:</span></dt>
<dd class="field-even"><p>The result obtained from executing the workflow.</p>
</dd>
<dt class="field-odd">返回类型<span class="colon">:</span></dt>
<dd class="field-odd"><p>Any</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="module-memoryscope.core.service">
<span id="service"></span><h1>Service<a class="headerlink" href="#module-memoryscope.core.service" title="Link to this heading"></a></h1>
<dl class="py class">
<dt class="sig sig-object py" id="memoryscope.core.service.BaseMemoryService">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">memoryscope.core.service.</span></span><span class="sig-name descname"><span class="pre">BaseMemoryService</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">memory_operations:</span> <span class="pre">~typing.Dict[str,</span> <span class="pre">dict],</span> <span class="pre">context:</span> <span class="pre">~memoryscope.core.utils.singleton.singleton.&lt;locals&gt;._singleton,</span> <span class="pre">assistant_name:</span> <span class="pre">str</span> <span class="pre">|</span> <span class="pre">None</span> <span class="pre">=</span> <span class="pre">None,</span> <span class="pre">human_name:</span> <span class="pre">str</span> <span class="pre">|</span> <span class="pre">None</span> <span class="pre">=</span> <span class="pre">None,</span> <span class="pre">**kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/memoryscope/core/service/base_memory_service.html#BaseMemoryService"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.core.service.BaseMemoryService" title="Link to this definition"></a></dt>
<dd><p>An abstract base class for managing memory operations within a multithreaded context.
It sets up the infrastructure for operation handling, message storage, and synchronization,
along with logging capabilities and customizable configurations.</p>
<dl class="py method">
<dt class="sig sig-object py" id="memoryscope.core.service.BaseMemoryService.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">memory_operations:</span> <span class="pre">~typing.Dict[str,</span> <span class="pre">dict],</span> <span class="pre">context:</span> <span class="pre">~memoryscope.core.utils.singleton.singleton.&lt;locals&gt;._singleton,</span> <span class="pre">assistant_name:</span> <span class="pre">str</span> <span class="pre">|</span> <span class="pre">None</span> <span class="pre">=</span> <span class="pre">None,</span> <span class="pre">human_name:</span> <span class="pre">str</span> <span class="pre">|</span> <span class="pre">None</span> <span class="pre">=</span> <span class="pre">None,</span> <span class="pre">**kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/memoryscope/core/service/base_memory_service.html#BaseMemoryService.__init__"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.core.service.BaseMemoryService.__init__" title="Link to this definition"></a></dt>
<dd><p>Initializes the BaseMemoryService with operation definitions, keys for memory access,
and additional keyword arguments for flexibility.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>memory_operations</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>dict</em><em>]</em>) -- A dictionary defining available memory operations.</p></li>
<li><p><strong>context</strong> (<em>MemoryscopeContext</em>) -- runtime context.</p></li>
<li><p><strong>human_name</strong> (<em>str</em>) -- human name.</p></li>
<li><p><strong>assistant_name</strong> (<em>str</em>) -- assistant name.</p></li>
<li><p><strong>**kwargs</strong> -- Additional parameters to customize service behavior.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="memoryscope.core.service.BaseMemoryService.op_description_dict">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">op_description_dict</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#memoryscope.core.service.BaseMemoryService.op_description_dict" title="Link to this definition"></a></dt>
<dd><p>Property to retrieve a dictionary mapping operation keys to their descriptions.
:returns: A dictionary where keys are operation identifiers and values are their descriptions.
:rtype: Dict[str, str]</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="memoryscope.core.service.MemoryScopeService">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">memoryscope.core.service.</span></span><span class="sig-name descname"><span class="pre">MemoryScopeService</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">history_msg_count</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">100</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">contextual_msg_max_count</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">10</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">contextual_msg_min_count</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/memoryscope/core/service/memory_scope_service.html#MemoryScopeService"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.core.service.MemoryScopeService" title="Link to this definition"></a></dt>
<dd><dl class="py method">
<dt class="sig sig-object py" id="memoryscope.core.service.MemoryScopeService.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">history_msg_count</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">100</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">contextual_msg_max_count</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">10</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">contextual_msg_min_count</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/memoryscope/core/service/memory_scope_service.html#MemoryScopeService.__init__"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.core.service.MemoryScopeService.__init__" title="Link to this definition"></a></dt>
<dd><p>init function.
:param history_msg_count: The conversation history in memory, control the quantity, and reduce memory usage.
:type history_msg_count: int
:param contextual_msg_max_count: The maximum context length in a conversation. If it exceeds this length,</p>
<blockquote>
<div><p>it will not be included in the context to prevent token overflow.</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>contextual_msg_min_count</strong> (<em>int</em>) -- The minimum context length in a conversation. If it is shorter than this
length, no conversation summary will be made and no long-term memory will be generated.</p></li>
<li><p><strong>kwargs</strong> (<em>dict</em>) -- Additional parameters to customize service behavior.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="memoryscope.core.service.MemoryScopeService.add_messages_pair">
<span class="sig-name descname"><span class="pre">add_messages_pair</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">messages</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="../memoryscope.scheme.message.html#memoryscope.scheme.message.Message" title="memoryscope.scheme.message.Message"><span class="pre">Message</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/memoryscope/core/service/memory_scope_service.html#MemoryScopeService.add_messages_pair"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.core.service.MemoryScopeService.add_messages_pair" title="Link to this definition"></a></dt>
<dd><p>Adds a list of messages to the chat history, it can be a pair [user_message, assistant_message].
Ensuring the message list remains sorted by creation time and does not exceed the maximum history message count.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>messages</strong> (<em>List</em><em>[</em><a class="reference internal" href="../memoryscope.scheme.html#memoryscope.scheme.Message" title="memoryscope.scheme.Message"><em>Message</em></a><em>] </em><em>| </em><a class="reference internal" href="../memoryscope.scheme.html#memoryscope.scheme.Message" title="memoryscope.scheme.Message"><em>Message</em></a>) -- A single message instance or a list of message instances</p></li>
<li><p><strong>history.</strong> (<em>to be added to the chat</em>)</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="memoryscope.core.service.MemoryScopeService.run_operation">
<span class="sig-name descname"><span class="pre">run_operation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">role_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/memoryscope/core/service/memory_scope_service.html#MemoryScopeService.run_operation"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.core.service.MemoryScopeService.run_operation" title="Link to this definition"></a></dt>
<dd><p>Executes a specific operation by its name with provided keyword arguments.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<em>str</em>) -- The name of the operation to execute.</p></li>
<li><p><strong>role_name</strong> (<em>str</em>) -- The name of the operation to execute.</p></li>
<li><p><strong>**kwargs</strong> -- Keyword arguments for the operation's execution.</p></li>
</ul>
</dd>
<dt class="field-even">返回<span class="colon">:</span></dt>
<dd class="field-even"><p>The result of the operation execution, if any. Otherwise, None.</p>
</dd>
<dt class="field-odd">抛出<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>Warning</strong> -- If the operation name is not initialized in <cite>_operation_dict</cite>.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="memoryscope.core.service.MemoryScopeService.start_backend_service">
<span class="sig-name descname"><span class="pre">start_backend_service</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/memoryscope/core/service/memory_scope_service.html#MemoryScopeService.start_backend_service"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.core.service.MemoryScopeService.start_backend_service" title="Link to this definition"></a></dt>
<dd><p>Start all backend operations.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="memoryscope.core.service.MemoryScopeService.stop_backend_service">
<span class="sig-name descname"><span class="pre">stop_backend_service</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">wait_service</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/memoryscope/core/service/memory_scope_service.html#MemoryScopeService.stop_backend_service"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.core.service.MemoryScopeService.stop_backend_service" title="Link to this definition"></a></dt>
<dd><p>Stops all backend operations that are currently running.</p>
</dd></dl>

</dd></dl>

</section>
<section id="module-memoryscope.core.chat">
<span id="chat"></span><h1>Chat<a class="headerlink" href="#module-memoryscope.core.chat" title="Link to this heading"></a></h1>
<dl class="py class">
<dt class="sig sig-object py" id="memoryscope.core.chat.ApiMemoryChat">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">memoryscope.core.chat.</span></span><span class="sig-name descname"><span class="pre">ApiMemoryChat</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">memory_service:</span> <span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">generation_model:</span> <span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">context:</span> <span class="pre">~memoryscope.core.utils.singleton.singleton.&lt;locals&gt;._singleton</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stream:</span> <span class="pre">bool</span> <span class="pre">=</span> <span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">**kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/memoryscope/core/chat/api_memory_chat.html#ApiMemoryChat"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.core.chat.ApiMemoryChat" title="Link to this definition"></a></dt>
<dd><dl class="py method">
<dt class="sig sig-object py" id="memoryscope.core.chat.ApiMemoryChat.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">memory_service:</span> <span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">generation_model:</span> <span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">context:</span> <span class="pre">~memoryscope.core.utils.singleton.singleton.&lt;locals&gt;._singleton</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stream:</span> <span class="pre">bool</span> <span class="pre">=</span> <span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">**kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/memoryscope/core/chat/api_memory_chat.html#ApiMemoryChat.__init__"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.core.chat.ApiMemoryChat.__init__" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="memoryscope.core.chat.ApiMemoryChat.prompt_handler">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">prompt_handler</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="../memoryscope.core.utils.prompt_handler.html#memoryscope.core.utils.prompt_handler.PromptHandler" title="memoryscope.core.utils.prompt_handler.PromptHandler"><span class="pre">PromptHandler</span></a></em><a class="headerlink" href="#memoryscope.core.chat.ApiMemoryChat.prompt_handler" title="Link to this definition"></a></dt>
<dd><p>Lazy initialization property for the prompt handler.</p>
<p>This property ensures that the <cite>_prompt_handler</cite> attribute is only instantiated when it is first accessed.
It uses the current file's path and additional keyword arguments for configuration.</p>
<dl class="field-list simple">
<dt class="field-odd">返回<span class="colon">:</span></dt>
<dd class="field-odd"><p>An instance of the PromptHandler configured for this CLI session.</p>
</dd>
<dt class="field-even">返回类型<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="../memoryscope.core.utils.html#memoryscope.core.utils.PromptHandler" title="memoryscope.core.utils.PromptHandler">PromptHandler</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="memoryscope.core.chat.ApiMemoryChat.memory_service">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">memory_service</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="../memoryscope.core.service.base_memory_service.html#memoryscope.core.service.base_memory_service.BaseMemoryService" title="memoryscope.core.service.base_memory_service.BaseMemoryService"><span class="pre">BaseMemoryService</span></a></em><a class="headerlink" href="#memoryscope.core.chat.ApiMemoryChat.memory_service" title="Link to this definition"></a></dt>
<dd><p>Property to access the memory service. If the service is initially set as a string,
it will be looked up in the memory service dictionary of context, initialized,
and then returned as an instance of <cite>BaseMemoryService</cite>. Ensures the memory service
is properly started before use.</p>
<dl class="field-list simple">
<dt class="field-odd">返回<span class="colon">:</span></dt>
<dd class="field-odd"><p>An active memory service instance.</p>
</dd>
<dt class="field-even">返回类型<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="../memoryscope.core.service.html#memoryscope.core.service.BaseMemoryService" title="memoryscope.core.service.BaseMemoryService">BaseMemoryService</a></p>
</dd>
<dt class="field-odd">抛出<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>ValueError</strong> -- If the declaration of memory service is not found in the memory service dictionary of context.</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="memoryscope.core.chat.ApiMemoryChat.generation_model">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">generation_model</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="../memoryscope.core.models.base_model.html#memoryscope.core.models.base_model.BaseModel" title="memoryscope.core.models.base_model.BaseModel"><span class="pre">BaseModel</span></a></em><a class="headerlink" href="#memoryscope.core.chat.ApiMemoryChat.generation_model" title="Link to this definition"></a></dt>
<dd><p>Property to get the generation model. If the model is set as a string, it will be resolved from the global
context's model dictionary.</p>
<dl class="field-list simple">
<dt class="field-odd">抛出<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>ValueError</strong> -- If the declaration of generation model is not found in the model dictionary of context .</p>
</dd>
<dt class="field-even">返回<span class="colon">:</span></dt>
<dd class="field-even"><p>An actual generation model instance.</p>
</dd>
<dt class="field-odd">返回类型<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="../memoryscope.core.models.html#memoryscope.core.models.BaseModel" title="memoryscope.core.models.BaseModel">BaseModel</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="memoryscope.core.chat.ApiMemoryChat.chat_with_memory">
<span class="sig-name descname"><span class="pre">chat_with_memory</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">query</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">role_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">system_prompt</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">memory_prompt</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">temporary_memories</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">history_message_strategy</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Literal</span><span class="p"><span class="pre">[</span></span><span class="s"><span class="pre">'auto'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">None</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'auto'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">remember_response</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/memoryscope/core/chat/api_memory_chat.html#ApiMemoryChat.chat_with_memory"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.core.chat.ApiMemoryChat.chat_with_memory" title="Link to this definition"></a></dt>
<dd><p>The core function that carries out conversation with memory accepts user queries through query and returns the
conversation results through model_response. The retrieved memories are stored in the memories within meta_data.
:param query: User's query, includes the user's question.
:type query: str
:param role_name: User's role name.
:type role_name: str, optional
:param system_prompt: System prompt. Defaults to the system_prompt in &quot;memory_chat_prompt.yaml&quot;.
:type system_prompt: str, optional
:param memory_prompt: Memory prompt, It takes effect when there is a memory and will be placed in</p>
<blockquote>
<div><p>front of the retrieved memory. Defaults to the memory_prompt in &quot;memory_chat_prompt.yaml&quot;.</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>temporary_memories</strong> (<em>str</em><em>, </em><em>optional</em>) -- Manually added user memory in this function.</p></li>
<li><p><strong>history_message_strategy</strong> (<em>&quot;auto&quot;</em><em>, </em><em>None</em><em>, </em><em>int</em>) -- <ul>
<li><dl class="simple">
<dt>If it is set to &quot;auto&quot;， the history messages in the conversation will retain those that have not</dt><dd><p>yet been summarized. Default to &quot;auto&quot;.</p>
</dd>
</dl>
</li>
<li><p>If it is set to None， no conversation history will be saved.</p></li>
<li><p>If it is set to an integer value &quot;n&quot;, recent &quot;n&quot; message-pair[user, assistant] will be retained.</p></li>
</ul>
</p></li>
<li><p><strong>remember_response</strong> (<em>bool</em><em>, </em><em>optional</em>) -- Flag indicating whether to save the AI's response to memory.
Defaults to False.</p></li>
</ul>
</dd>
<dt class="field-even">返回<span class="colon">:</span></dt>
<dd class="field-even"><p>In non-streaming mode, returns a complete AI response.
- ModelResponseGen: In streaming mode, returns a generator yielding AI response parts.
- Memories: To obtain the memory by invoking the method of model_response.meta_data[MEMORIES]</p>
</dd>
<dt class="field-odd">返回类型<span class="colon">:</span></dt>
<dd class="field-odd"><p><ul class="simple">
<li><p>ModelResponse</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="memoryscope.core.chat.BaseMemoryChat">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">memoryscope.core.chat.</span></span><span class="sig-name descname"><span class="pre">BaseMemoryChat</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/memoryscope/core/chat/base_memory_chat.html#BaseMemoryChat"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.core.chat.BaseMemoryChat" title="Link to this definition"></a></dt>
<dd><p>An abstract base class representing a chat system integrated with memory services.
It outlines the method to initiate a chat session leveraging memory data, which concrete subclasses must implement.</p>
<dl class="py method">
<dt class="sig sig-object py" id="memoryscope.core.chat.BaseMemoryChat.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/memoryscope/core/chat/base_memory_chat.html#BaseMemoryChat.__init__"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.core.chat.BaseMemoryChat.__init__" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="memoryscope.core.chat.BaseMemoryChat.memory_service">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">memory_service</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="../memoryscope.core.service.base_memory_service.html#memoryscope.core.service.base_memory_service.BaseMemoryService" title="memoryscope.core.service.base_memory_service.BaseMemoryService"><span class="pre">BaseMemoryService</span></a></em><a class="headerlink" href="#memoryscope.core.chat.BaseMemoryChat.memory_service" title="Link to this definition"></a></dt>
<dd><p>Abstract property to access the memory service.</p>
<dl class="field-list simple">
<dt class="field-odd">抛出<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>NotImplementedError</strong> -- This method should be implemented in a subclass.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="memoryscope.core.chat.BaseMemoryChat.chat_with_memory">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">chat_with_memory</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">query</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">role_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">system_prompt</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">memory_prompt</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">temporary_memories</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">history_message_strategy</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Literal</span><span class="p"><span class="pre">[</span></span><span class="s"><span class="pre">'auto'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">None</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'auto'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">remember_response</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/memoryscope/core/chat/base_memory_chat.html#BaseMemoryChat.chat_with_memory"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.core.chat.BaseMemoryChat.chat_with_memory" title="Link to this definition"></a></dt>
<dd><p>The core function that carries out conversation with memory accepts user queries through query and returns the
conversation results through model_response. The retrieved memories are stored in the memories within meta_data.
:param query: User's query, includes the user's question.
:type query: str
:param role_name: User's role name.
:type role_name: str, optional
:param system_prompt: System prompt. Defaults to the system_prompt in &quot;memory_chat_prompt.yaml&quot;.
:type system_prompt: str, optional
:param memory_prompt: Memory prompt, It takes effect when there is a memory and will be placed in</p>
<blockquote>
<div><p>front of the retrieved memory. Defaults to the memory_prompt in &quot;memory_chat_prompt.yaml&quot;.</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>temporary_memories</strong> (<em>str</em><em>, </em><em>optional</em>) -- Manually added user memory in this function.</p></li>
<li><p><strong>history_message_strategy</strong> (<em>&quot;auto&quot;</em><em>, </em><em>None</em><em>, </em><em>int</em>) -- <ul>
<li><dl class="simple">
<dt>If it is set to &quot;auto&quot;， the history messages in the conversation will retain those that have not</dt><dd><p>yet been summarized. Default to &quot;auto&quot;.</p>
</dd>
</dl>
</li>
<li><p>If it is set to None， no conversation history will be saved.</p></li>
<li><p>If it is set to an integer value &quot;n&quot;, recent &quot;n&quot; message-pair[user, assistant] will be retained.</p></li>
</ul>
</p></li>
<li><p><strong>remember_response</strong> (<em>bool</em><em>, </em><em>optional</em>) -- Flag indicating whether to save the AI's response to memory.
Defaults to False.</p></li>
</ul>
</dd>
<dt class="field-even">返回<span class="colon">:</span></dt>
<dd class="field-even"><p>In non-streaming mode, returns a complete AI response.
- ModelResponseGen: In streaming mode, returns a generator yielding AI response parts.
- Memories: To obtain the memory by invoking the method of model_response.meta_data[MEMORIES]</p>
</dd>
<dt class="field-odd">返回类型<span class="colon">:</span></dt>
<dd class="field-odd"><p><ul class="simple">
<li><p>ModelResponse</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="memoryscope.core.chat.BaseMemoryChat.run">
<span class="sig-name descname"><span class="pre">run</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/memoryscope/core/chat/base_memory_chat.html#BaseMemoryChat.run"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.core.chat.BaseMemoryChat.run" title="Link to this definition"></a></dt>
<dd><p>Abstract method to run the chat system.</p>
<p>This method should contain the logic to initiate and manage the chat process,
utilizing the memory service as needed. It must be implemented by subclasses.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="memoryscope.core.chat.CliMemoryChat">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">memoryscope.core.chat.</span></span><span class="sig-name descname"><span class="pre">CliMemoryChat</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/memoryscope/core/chat/cli_memory_chat.html#CliMemoryChat"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.core.chat.CliMemoryChat" title="Link to this definition"></a></dt>
<dd><p>Command-line interface for chatting with an AI that integrates memory functionality.
Allows users to interact, manage chat history, adjust streaming settings, and view commands' help.</p>
<dl class="py method">
<dt class="sig sig-object py" id="memoryscope.core.chat.CliMemoryChat.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/memoryscope/core/chat/cli_memory_chat.html#CliMemoryChat.__init__"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.core.chat.CliMemoryChat.__init__" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="memoryscope.core.chat.CliMemoryChat.print_logo">
<span class="sig-name descname"><span class="pre">print_logo</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/memoryscope/core/chat/cli_memory_chat.html#CliMemoryChat.print_logo"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.core.chat.CliMemoryChat.print_logo" title="Link to this definition"></a></dt>
<dd><p>Prints the logo of the CLI application to the console.</p>
<p>The logo is composed of multiple lines, which are iterated through
and printed one by one to provide a visual identity for the chat interface.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="memoryscope.core.chat.CliMemoryChat.chat_with_memory">
<span class="sig-name descname"><span class="pre">chat_with_memory</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">query</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">role_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">system_prompt</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">memory_prompt</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">temporary_memories</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">history_message_strategy</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Literal</span><span class="p"><span class="pre">[</span></span><span class="s"><span class="pre">'auto'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">None</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'auto'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">remember_response</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/memoryscope/core/chat/cli_memory_chat.html#CliMemoryChat.chat_with_memory"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.core.chat.CliMemoryChat.chat_with_memory" title="Link to this definition"></a></dt>
<dd><p>The core function that carries out conversation with memory accepts user queries through query and returns the
conversation results through model_response. The retrieved memories are stored in the memories within meta_data.
:param query: User's query, includes the user's question.
:type query: str
:param role_name: User's role name.
:type role_name: str, optional
:param system_prompt: System prompt. Defaults to the system_prompt in &quot;memory_chat_prompt.yaml&quot;.
:type system_prompt: str, optional
:param memory_prompt: Memory prompt, It takes effect when there is a memory and will be placed in</p>
<blockquote>
<div><p>front of the retrieved memory. Defaults to the memory_prompt in &quot;memory_chat_prompt.yaml&quot;.</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>temporary_memories</strong> (<em>str</em><em>, </em><em>optional</em>) -- Manually added user memory in this function.</p></li>
<li><p><strong>history_message_strategy</strong> (<em>&quot;auto&quot;</em><em>, </em><em>None</em><em>, </em><em>int</em>) -- <ul>
<li><dl class="simple">
<dt>If it is set to &quot;auto&quot;， the history messages in the conversation will retain those that have not</dt><dd><p>yet been summarized. Default to &quot;auto&quot;.</p>
</dd>
</dl>
</li>
<li><p>If it is set to None， no conversation history will be saved.</p></li>
<li><p>If it is set to an integer value &quot;n&quot;, recent &quot;n&quot; message-pair[user, assistant] will be retained.</p></li>
</ul>
</p></li>
<li><p><strong>remember_response</strong> (<em>bool</em><em>, </em><em>optional</em>) -- Flag indicating whether to save the AI's response to memory.
Defaults to False.</p></li>
</ul>
</dd>
<dt class="field-even">返回<span class="colon">:</span></dt>
<dd class="field-even"><p>In non-streaming mode, returns a complete AI response.
- ModelResponseGen: In streaming mode, returns a generator yielding AI response parts.
- Memories: To obtain the memory by invoking the method of model_response.meta_data[MEMORIES]</p>
</dd>
<dt class="field-odd">返回类型<span class="colon">:</span></dt>
<dd class="field-odd"><p><ul class="simple">
<li><p>ModelResponse</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="memoryscope.core.chat.CliMemoryChat.parse_query_command">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">parse_query_command</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">query</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/memoryscope/core/chat/cli_memory_chat.html#CliMemoryChat.parse_query_command"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.core.chat.CliMemoryChat.parse_query_command" title="Link to this definition"></a></dt>
<dd><p>Parses the user's input query command, separating it into the command and its associated keyword arguments.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>query</strong> (<em>str</em>) -- The raw input string from the user which includes the command and its arguments.</p>
</dd>
<dt class="field-even">返回<span class="colon">:</span></dt>
<dd class="field-even"><p>A tuple containing the command (str) as the first element and a dictionary (kwargs) of keyword
arguments as the second element.</p>
</dd>
<dt class="field-odd">返回类型<span class="colon">:</span></dt>
<dd class="field-odd"><p>tuple</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="memoryscope.core.chat.CliMemoryChat.process_commands">
<span class="sig-name descname"><span class="pre">process_commands</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">query</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bool</span></span></span><a class="reference internal" href="../_modules/memoryscope/core/chat/cli_memory_chat.html#CliMemoryChat.process_commands"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.core.chat.CliMemoryChat.process_commands" title="Link to this definition"></a></dt>
<dd><p>Parses and executes commands from user input in the CLI chat interface.
Supports operations like exiting, clearing screen, showing help, toggling stream mode,
executing predefined memory operations, and handling unknown commands.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>query</strong> (<em>str</em>) -- The user's input command string.</p>
</dd>
<dt class="field-even">返回<span class="colon">:</span></dt>
<dd class="field-even"><p>Indicates whether to continue running the CLI after processing the command.</p>
</dd>
<dt class="field-odd">返回类型<span class="colon">:</span></dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="memoryscope.core.chat.CliMemoryChat.run">
<span class="sig-name descname"><span class="pre">run</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/memoryscope/core/chat/cli_memory_chat.html#CliMemoryChat.run"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#memoryscope.core.chat.CliMemoryChat.run" title="Link to this definition"></a></dt>
<dd><p>Runs the CLI chat loop, which handles user input, processes commands,
communicates with the AI model, manages conversation memory, and controls
the chat session including streaming responses, command execution, and error handling.</p>
<p>The loop continues until the user explicitly chooses to exit.</p>
</dd></dl>

</dd></dl>

</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="页脚">
        <a href="contribution.html" class="btn btn-neutral float-left" title="贡献到MemoryScope" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> 上一页</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; 版权所有 2024, Alibaba Tongyi Lab。</p>
  </div>

  利用 <a href="https://www.sphinx-doc.org/">Sphinx</a> 构建，使用的 
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">主题</a>
    由 <a href="https://readthedocs.org">Read the Docs</a> 开发.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>